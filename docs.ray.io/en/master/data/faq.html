
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>FAQ &#8212; Ray 3.0.0.dev0</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css@digest=5115cc725059bd94278eecd172e13a965bf8f5a9.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/termynal.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_/static/css/badge_only.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/versionwarning.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../_static/js/docsearch.js"></script>
    <script src="../_static/js/rate-the-docs.es.min.js"></script>
    <script defer="defer" src="../_static/js/termynal.js"></script>
    <script defer="defer" src="../_static/js/custom.js"></script>
    <script defer="defer" src="../_static/js/top-navigation.js"></script>
    <script src="../_static/js/tags.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js@digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script async="async" src="../../../_/static/javascript/readthedocs-doc-embed.js"></script>
    <link rel="canonical" href="https://docs.ray.io/en/latest/data/faq.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ray Data API" href="api/api.html" />
    <link rel="prev" title="Implementing a Custom Datasource" href="examples/custom-datasource.html" />

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://deer.ray.io/script.js" data-site="WYYANYOS" defer></script>
<!-- / Fathom -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110413294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110413294-1');
</script>

<script
  src="https://widget.kapa.ai/kapa-widget.bundle.js"
  data-website-id="18a8c339-4ec5-43c8-8182-db3f2bc8c6b6"
  data-project-name="Ray"
  data-project-color="#2C2C2C"
  data-project-logo="https://global.discourse-cdn.com/business7/uploads/ray/original/1X/8f4dcb72f7cd34e2a332d548bd65860994bc8ff1.png"
></script>

<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id: 'VISITOR-UNIQUE-ID'
            },
            account: {
                id: 'ACCOUNT-UNIQUE-ID'
            }
        });
})('f89fa48a-6dd7-4d7c-67cf-a8051ed891f2');
</script>



  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="../../../_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": true, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/doc/source/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "data/faq", "programming_language": "py", "project": "ray", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_book_theme", "user_analytics_code": "", "version": "master"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="../../../_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"><div class='topnav'></div></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ray 3.0.0.dev0</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main Navigation">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome to Ray!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ray
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/index.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/getting-started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-more-libs/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/use-cases.html">
   Use Cases
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/examples.html">
   Example Gallery
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/ray-libraries.html">
   Ecosystem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-core/walkthrough.html">
   Ray Core
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-air/getting-started.html">
   Ray AI Runtime (AIR)
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="data.html">
   Ray Data
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="overview.html">
     Overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="getting-started.html">
     Getting Started
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="key-concepts.html">
     Key Concepts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="user-guide.html">
     User Guides
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="examples/index.html">
     Ray Data Examples
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="faq.html#">
     FAQ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/api.html">
     Ray Data API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../train/train.html">
   Ray Train
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tune.html">
   Ray Tune
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../serve/index.html">
   Ray Serve
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../rllib/index.html">
   Ray RLlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-more-libs/index.html">
   More Libraries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-core/cluster/index.html">
   Ray Clusters
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-observability/index.html">
   Monitoring and Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-references/api.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-contribute/stability.html">
   Developer Guides
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ray-project/ray"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/issues/new?title=Issue%20on%20page%20%2Fdata/faq.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/edit/master/doc/source/data/faq.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/data/faq.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#what-problems-does-ray-data-solve">
   What problems does Ray Data solve?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#who-is-using-ray-data">
   Who is using Ray Data?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#what-should-i-use-ray-data-for">
   What should I use Ray Data for?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#what-should-i-not-use-ray-data-for">
   What should I not use Ray Data for?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#for-data-loading-for-training-how-does-ray-data-compare-to-other-solutions">
   For data loading for training, how does Ray Data compare to other solutions?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#torch-datasets-and-data-loaders">
     Torch datasets (and data loaders)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#tensorflow-datasets">
     TensorFlow datasets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#petastorm">
     Petastorm
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#nvtabular">
     NVTabular
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#for-batch-offline-inference-why-should-i-use-ray-data-instead-of-an-actor-pool">
   For batch (offline) inference, why should I use Ray Data instead of an actor pool?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#how-fast-is-ray-data">
   How fast is Ray Data?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#does-all-of-my-data-need-to-fit-into-memory">
   Does all of my data need to fit into memory?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#how-much-data-can-ray-data-handle">
   How much data can Ray Data handle?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#how-do-i-get-my-data-into-ray-data">
   How do I get my data into Ray Data?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#when-should-i-use-global-per-epoch-shuffling">
   When should I use global per-epoch shuffling?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#background">
     Background
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#how-to-choose-a-shuffling-policy">
     How to choose a shuffling policy
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#what-is-arrow-and-how-does-ray-data-use-it">
   What is Arrow and how does Ray Data use it?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#how-much-performance-tuning-does-ray-data-require">
   How much performance tuning does Ray Data require?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#migrating-to-strict-mode">
   Migrating to strict mode
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#list-of-strict-mode-changes">
     List of strict mode changes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#how-can-i-contribute-to-ray-data">
   How can I contribute to Ray Data?
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>FAQ</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#what-problems-does-ray-data-solve">
   What problems does Ray Data solve?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#who-is-using-ray-data">
   Who is using Ray Data?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#what-should-i-use-ray-data-for">
   What should I use Ray Data for?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#what-should-i-not-use-ray-data-for">
   What should I not use Ray Data for?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#for-data-loading-for-training-how-does-ray-data-compare-to-other-solutions">
   For data loading for training, how does Ray Data compare to other solutions?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#torch-datasets-and-data-loaders">
     Torch datasets (and data loaders)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#tensorflow-datasets">
     TensorFlow datasets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#petastorm">
     Petastorm
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#nvtabular">
     NVTabular
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#for-batch-offline-inference-why-should-i-use-ray-data-instead-of-an-actor-pool">
   For batch (offline) inference, why should I use Ray Data instead of an actor pool?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#how-fast-is-ray-data">
   How fast is Ray Data?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#does-all-of-my-data-need-to-fit-into-memory">
   Does all of my data need to fit into memory?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#how-much-data-can-ray-data-handle">
   How much data can Ray Data handle?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#how-do-i-get-my-data-into-ray-data">
   How do I get my data into Ray Data?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#when-should-i-use-global-per-epoch-shuffling">
   When should I use global per-epoch shuffling?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#background">
     Background
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#how-to-choose-a-shuffling-policy">
     How to choose a shuffling policy
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#what-is-arrow-and-how-does-ray-data-use-it">
   What is Arrow and how does Ray Data use it?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#how-much-performance-tuning-does-ray-data-require">
   How much performance tuning does Ray Data require?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#migrating-to-strict-mode">
   Migrating to strict mode
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="faq.html#list-of-strict-mode-changes">
     List of strict mode changes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="faq.html#how-can-i-contribute-to-ray-data">
   How can I contribute to Ray Data?
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="faq">
<span id="data-faq"></span><h1>FAQ<a class="headerlink" href="faq.html#faq" title="Permalink to this headline">#</a></h1>
<p>These are some Frequently Asked Questions that we’ve seen pop up for Ray Data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a general conceptual overview of Ray Data, see our
<a class="reference internal" href="key-concepts.html#data-key-concepts"><span class="std std-ref">Key Concepts docs</span></a>.</p>
</div>
<p>If you still have questions after reading this FAQ,  please reach out on
<a class="reference external" href="https://discuss.ray.io/">our Discourse</a>!</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="faq.html#what-problems-does-ray-data-solve" id="id1">What problems does Ray Data solve?</a></p></li>
<li><p><a class="reference internal" href="faq.html#who-is-using-ray-data" id="id2">Who is using Ray Data?</a></p></li>
<li><p><a class="reference internal" href="faq.html#what-should-i-use-ray-data-for" id="id3">What should I use Ray Data for?</a></p></li>
<li><p><a class="reference internal" href="faq.html#what-should-i-not-use-ray-data-for" id="id4">What should I not use Ray Data for?</a></p></li>
<li><p><a class="reference internal" href="faq.html#for-data-loading-for-training-how-does-ray-data-compare-to-other-solutions" id="id5">For data loading for training, how does Ray Data compare to other solutions?</a></p>
<ul>
<li><p><a class="reference internal" href="faq.html#torch-datasets-and-data-loaders" id="id6">Torch datasets (and data loaders)</a></p></li>
<li><p><a class="reference internal" href="faq.html#tensorflow-datasets" id="id7">TensorFlow datasets</a></p></li>
<li><p><a class="reference internal" href="faq.html#petastorm" id="id8">Petastorm</a></p></li>
<li><p><a class="reference internal" href="faq.html#nvtabular" id="id9">NVTabular</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="faq.html#for-batch-offline-inference-why-should-i-use-ray-data-instead-of-an-actor-pool" id="id10">For batch (offline) inference, why should I use Ray Data instead of an actor pool?</a></p></li>
<li><p><a class="reference internal" href="faq.html#how-fast-is-ray-data" id="id11">How fast is Ray Data?</a></p></li>
<li><p><a class="reference internal" href="faq.html#does-all-of-my-data-need-to-fit-into-memory" id="id12">Does all of my data need to fit into memory?</a></p></li>
<li><p><a class="reference internal" href="faq.html#how-much-data-can-ray-data-handle" id="id13">How much data can Ray Data handle?</a></p></li>
<li><p><a class="reference internal" href="faq.html#how-do-i-get-my-data-into-ray-data" id="id14">How do I get my data into Ray Data?</a></p></li>
<li><p><a class="reference internal" href="faq.html#when-should-i-use-global-per-epoch-shuffling" id="id15">When should I use global per-epoch shuffling?</a></p>
<ul>
<li><p><a class="reference internal" href="faq.html#background" id="id16">Background</a></p></li>
<li><p><a class="reference internal" href="faq.html#how-to-choose-a-shuffling-policy" id="id17">How to choose a shuffling policy</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="faq.html#what-is-arrow-and-how-does-ray-data-use-it" id="id18">What is Arrow and how does Ray Data use it?</a></p></li>
<li><p><a class="reference internal" href="faq.html#how-much-performance-tuning-does-ray-data-require" id="id19">How much performance tuning does Ray Data require?</a></p></li>
<li><p><a class="reference internal" href="faq.html#migrating-to-strict-mode" id="id20">Migrating to strict mode</a></p>
<ul>
<li><p><a class="reference internal" href="faq.html#list-of-strict-mode-changes" id="id21">List of strict mode changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="faq.html#how-can-i-contribute-to-ray-data" id="id22">How can I contribute to Ray Data?</a></p></li>
</ul>
</div>
<section id="what-problems-does-ray-data-solve">
<h2><a class="toc-backref" href="faq.html#id1">What problems does Ray Data solve?</a><a class="headerlink" href="faq.html#what-problems-does-ray-data-solve" title="Permalink to this headline">#</a></h2>
<p>Ray Data aims to solve the problems of slow, resource-inefficient, unscalable data
loading and preprocessing pipelines for two core uses cases:</p>
<ol class="arabic simple">
<li><p><strong>Model training:</strong> resulting in poor training throughput and low GPU utilization as
the trainers are bottlenecked on preprocessing and data loading.</p></li>
<li><p><strong>Batch inference:</strong> resulting in poor batch inference throughput and low GPU
utilization.</p></li>
</ol>
<p>In order to solve these problems without sacrificing usability, Ray Data simplifies
parallel and pipelined data processing on Ray, providing a higher-level API while
internally handling data batching, task parallelism and pipelining, and memory
management.</p>
</section>
<section id="who-is-using-ray-data">
<h2><a class="toc-backref" href="faq.html#id2">Who is using Ray Data?</a><a class="headerlink" href="faq.html#who-is-using-ray-data" title="Permalink to this headline">#</a></h2>
<p>To give an idea of Ray Data use cases, we list a few notable users running Ray Data
integrations in production below:</p>
<ul class="simple">
<li><p>Predibase is using Ray Data for ML ingest and batch inference in their OSS
declarative ML framework, <a class="reference external" href="https://github.com/ludwig-ai/ludwig">Ludwig</a>, and
internally in their <a class="reference external" href="https://predibase.com/">AutoML product</a>.</p></li>
<li><p>Amazon is using Ray Data for large-scale I/O in their scalable data catalog,
<a class="reference external" href="https://github.com/ray-project/deltacat">DeltaCAT</a>.</p></li>
<li><p>Shopify is using Ray Data for ML ingest and batch inference in their ML platform,
<a class="reference external" href="https://shopify.engineering/merlin-shopify-machine-learning-platform">Merlin</a>.</p></li>
<li><p>Ray Data is used as the data processing engine for the
<a class="reference external" href="https://github.com/ray-project/ray_beam_runner">Ray-based Apache Beam runner</a>.</p></li>
<li><p>Ray Data is used as the preprocessing and batch inference engine for
<a class="reference internal" href="../ray-air/getting-started.html#air"><span class="std std-ref">Ray AIR</span></a>.</p></li>
</ul>
<p>If you’re using Ray Data, please let us know about your experience on the
<a class="reference external" href="https://forms.gle/9TSdDYUgxYs8SA9e8">Slack</a>  or
<a class="reference external" href="https://discuss.ray.io/">Discourse</a>; we’d love to hear from you!</p>
</section>
<section id="what-should-i-use-ray-data-for">
<h2><a class="toc-backref" href="faq.html#id3">What should I use Ray Data for?</a><a class="headerlink" href="faq.html#what-should-i-use-ray-data-for" title="Permalink to this headline">#</a></h2>
<p>Ray Data is the standard way to load, process, and exchange data in Ray libraries
and applications, with a particular emphasis on ease-of-use, performance, and
scalability in both data size and cluster size. Within that, Datasets is designed for
two core uses cases:</p>
<ul class="simple">
<li><p><strong>ML (training) ingest:</strong> Loading, preprocessing, and ingesting data into one or more
(possibly distributed) model trainers.</p></li>
<li><p><strong>Batch inference:</strong> Loading, preprocessing, and performing parallel batch
inference on data.</p></li>
</ul>
<p>We have designed the Dataset APIs, data model, execution model, and
integrations with these use cases in mind, and have captured these use cases in
large-scale nightly tests to ensure that we’re hitting our scalability, performance,
and efficiency marks for these use cases.</p>
</section>
<section id="what-should-i-not-use-ray-data-for">
<h2><a class="toc-backref" href="faq.html#id4">What should I not use Ray Data for?</a><a class="headerlink" href="faq.html#what-should-i-not-use-ray-data-for" title="Permalink to this headline">#</a></h2>
<p>Ray Data is not meant to be used for generic ETL pipelines (like Spark) or
scalable data science (like Dask, Modin, or Mars). However, each of these frameworks
are runnable on Ray, and Datasets integrates tightly with
these frameworks, allowing for efficient exchange of distributed data partitions often
with zero-copy. Check out the
<a class="reference internal" href="loading-data.html#loading-datasets-from-distributed-df"><span class="std std-ref">dataset creation feature guide</span></a> to learn
more about these integrations.</p>
<p>Datasets is specifically targeting
the ML ingest and batch inference use cases, with focus on data loading and last-mile
preprocessing for ML pipelines.</p>
</section>
<section id="for-data-loading-for-training-how-does-ray-data-compare-to-other-solutions">
<h2><a class="toc-backref" href="faq.html#id5">For data loading for training, how does Ray Data compare to other solutions?</a><a class="headerlink" href="faq.html#for-data-loading-for-training-how-does-ray-data-compare-to-other-solutions" title="Permalink to this headline">#</a></h2>
<p>There are several ML framework-specific and general solutions for loading data into
model trainers. Below, we summarize some advantages Datasets offers over these more
specific ingest frameworks.</p>
<section id="torch-datasets-and-data-loaders">
<h3><a class="toc-backref" href="faq.html#id6">Torch datasets (and data loaders)</a><a class="headerlink" href="faq.html#torch-datasets-and-data-loaders" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><strong>Framework-agnostic:</strong> Datasets is framework-agnostic and portable between different
distributed training frameworks, while
<a class="reference external" href="https://pytorch.org/docs/stable/data.html">Torch datasets</a> are specific to Torch.</p></li>
<li><p><strong>No built-in IO layer:</strong> Torch datasets do not have an I/O layer for common file formats or in-memory exchange
with other frameworks; users need to bring in other libraries and roll this
integration themselves.</p></li>
<li><p><strong>Generic distributed data processing:</strong> Datasets is more general: it can handle
generic distributed operations, including global per-epoch shuffling,
which would otherwise have to be implemented by stitching together two separate
systems. Torch datasets would require such stitching for anything more involved
than batch-based preprocessing, and does not natively support shuffling across worker
shards. See our
<a class="reference external" href="https://www.anyscale.com/blog/deep-dive-data-ingest-in-a-third-generation-ml-architecture">blog post</a>
on why this shared infrastructure is important for 3rd generation ML architectures.</p></li>
<li><p><strong>Lower overhead:</strong> Datasets is lower overhead: it supports zero-copy exchange between
processes, in contrast to the multi-processing-based pipelines of Torch datasets.</p></li>
</ul>
</section>
<section id="tensorflow-datasets">
<h3><a class="toc-backref" href="faq.html#id7">TensorFlow datasets</a><a class="headerlink" href="faq.html#tensorflow-datasets" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><strong>Framework-agnostic:</strong> Datasets is framework-agnostic and portable between different
distributed training frameworks, while
<a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/data/Dataset">TensorFlow datasets</a>
is specific to TensorFlow.</p></li>
<li><p><strong>Unified single-node and distributed:</strong> Datasets unifies single and multi-node training under
the same abstraction. TensorFlow datasets presents
<a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/distribute/DistributedDataset">separate concepts</a>
for distributed data loading and prevents code from being seamlessly scaled to larger
clusters.</p></li>
<li><p><strong>Generic distributed data processing:</strong> Datasets is more general: it can handle
generic distributed operations, including global per-epoch shuffling,
which would otherwise have to be implemented by stitching together two separate
systems. TensorFlow datasets would require such stitching for anything more involved
than basic preprocessing, and does not natively support full-shuffling across worker
shards; only file interleaving is supported. See our
<a class="reference external" href="https://www.anyscale.com/blog/deep-dive-data-ingest-in-a-third-generation-ml-architecture">blog post</a>
on why this shared infrastructure is important for 3rd generation ML architectures.</p></li>
<li><p><strong>Lower overhead:</strong> Datasets is lower overhead: it supports zero-copy exchange between
processes, in contrast to the multi-processing-based pipelines of TensorFlow datasets.</p></li>
</ul>
</section>
<section id="petastorm">
<h3><a class="toc-backref" href="faq.html#id8">Petastorm</a><a class="headerlink" href="faq.html#petastorm" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><strong>Supported data types:</strong> <a class="reference external" href="https://github.com/uber/petastorm">Petastorm</a> only supports Parquet data, while
Ray Data supports many file formats.</p></li>
<li><p><strong>Lower overhead:</strong> Datasets is lower overhead: it supports zero-copy exchange between
processes, in contrast to the multi-processing-based pipelines used by Petastorm.</p></li>
<li><p><strong>No data processing:</strong> Petastorm does not expose any data processing APIs.</p></li>
</ul>
</section>
<section id="nvtabular">
<h3><a class="toc-backref" href="faq.html#id9">NVTabular</a><a class="headerlink" href="faq.html#nvtabular" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><strong>Supported data types:</strong> <a class="reference external" href="https://github.com/NVIDIA-Merlin/NVTabular">NVTabular</a> only supports tabular
(Parquet, CSV, Avro) data, while Ray Data supports many other file formats.</p></li>
<li><p><strong>Lower overhead:</strong> Datasets is lower overhead: it supports zero-copy exchange between
processes, in contrast to the multi-processing-based pipelines used by Petastorm.</p></li>
<li><p><strong>Heterogeneous compute:</strong> NVTabular doesn’t support mixing heterogeneous resources in dataset transforms (e.g.
both CPU and GPU transformations), while Ray Data supports this.</p></li>
<li><p><strong>ML-specific ops:</strong> NVTabular has a bunch of great ML-specific preprocessing
operations; this is currently WIP for Ray Data:
<a class="reference internal" href="../ray-air/key-concepts.html#air-key-concepts"><span class="std std-ref">Ray AIR preprocessors</span></a>.</p></li>
</ul>
</section>
</section>
<section id="for-batch-offline-inference-why-should-i-use-ray-data-instead-of-an-actor-pool">
<span id="streaming-faq"></span><h2><a class="toc-backref" href="faq.html#id10">For batch (offline) inference, why should I use Ray Data instead of an actor pool?</a><a class="headerlink" href="faq.html#for-batch-offline-inference-why-should-i-use-ray-data-instead-of-an-actor-pool" title="Permalink to this headline">#</a></h2>
<p>Ray Data provides its own autoscaling actor pool via the actor compute strategy for
<a class="reference internal" href="api/doc/ray.data.Dataset.map_batches.html#ray.data.Dataset.map_batches" title="ray.data.Dataset.map_batches"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ds.map_batches()</span></code></a>, allowing you to perform CPU- or
GPU-based batch inference on this actor pool. Using this instead of the
<a class="reference external" href="https://github.com/ray-project/ray/blob/b17cbd825fe3fbde4fe9b03c9dd33be2454d4737/python/ray/util/actor_pool.py#L6">Ray actor pool</a>
has a few advantages:</p>
<ul class="simple">
<li><p>Ray Data actor pool is autoscaling and supports easy-to-configure task dependency
prefetching, pipelining data transfer with compute.</p></li>
<li><p>Ray Data takes care of orchestrating the tasks, batching the data, and managing
the memory.</p></li>
<li><p>Ray Data provides a broad and performant I/O layer, which you would otherwise have
to roll yourself.</p></li>
</ul>
</section>
<section id="how-fast-is-ray-data">
<h2><a class="toc-backref" href="faq.html#id11">How fast is Ray Data?</a><a class="headerlink" href="faq.html#how-fast-is-ray-data" title="Permalink to this headline">#</a></h2>
<p>We’re still working on open benchmarks, but we’ve done some benchmarking on synthetic
data and have helped several users port from solutions using Petastorm, Torch
multi-processing data loader, and TensorFlow datasets that have seen a big training
throughput improvement (4-8x) and model accuracy improvement (due to global per-epoch
shuffling) using Ray Data.</p>
<p>Please see this
<a class="reference external" href="https://www.anyscale.com/blog/ray-data-for-machine-learning-training-and-scoring">blog post on Ray Data</a>
for more information on this benchmarking.</p>
<p>The new streaming backend for Ray Data (Dataset) supports throughputs of up to
hundreds of gigabytes per second in a large cluster.</p>
</section>
<section id="does-all-of-my-data-need-to-fit-into-memory">
<h2><a class="toc-backref" href="faq.html#id12">Does all of my data need to fit into memory?</a><a class="headerlink" href="faq.html#does-all-of-my-data-need-to-fit-into-memory" title="Permalink to this headline">#</a></h2>
<p>No, with Ray’s support for <a class="reference internal" href="../ray-core/objects/object-spilling.html#id1"><span class="std std-ref">spilling objects to disk</span></a>, you only
need to be able to fit your data into memory OR disk. However, keeping your data in
distributed memory may speed up your workload, which can be done on arbitrarily large
datasets by windowing them, creating pipelines.</p>
</section>
<section id="how-much-data-can-ray-data-handle">
<h2><a class="toc-backref" href="faq.html#id13">How much data can Ray Data handle?</a><a class="headerlink" href="faq.html#how-much-data-can-ray-data-handle" title="Permalink to this headline">#</a></h2>
<p>Ray Data has been tested at multi-petabyte scale for I/O and multi-terabyte scale for
shuffling, and we’re continuously working on improving this scalability. If you have a
very large dataset that you’d like to process and you’re running into scalability
issues, please reach out to us on our <a class="reference external" href="https://discuss.ray.io/">Discourse</a>.</p>
</section>
<section id="how-do-i-get-my-data-into-ray-data">
<h2><a class="toc-backref" href="faq.html#id14">How do I get my data into Ray Data?</a><a class="headerlink" href="faq.html#how-do-i-get-my-data-into-ray-data" title="Permalink to this headline">#</a></h2>
<p>Ray Data supports creating a <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> from local and distributed in-memory data
via integrations with common data libraries, as well as from local and remote storage
systems via our support for many common file formats and storage backends.</p>
<p>For more details, read <a class="reference internal" href="loading-data.html#loading-data"><span class="std std-ref">Loading Data</span></a>.</p>
</section>
<section id="when-should-i-use-global-per-epoch-shuffling">
<h2><a class="toc-backref" href="faq.html#id15">When should I use global per-epoch shuffling?</a><a class="headerlink" href="faq.html#when-should-i-use-global-per-epoch-shuffling" title="Permalink to this headline">#</a></h2>
<section id="background">
<h3><a class="toc-backref" href="faq.html#id16">Background</a><a class="headerlink" href="faq.html#background" title="Permalink to this headline">#</a></h3>
<p>When training a machine learning model, shuffling your training dataset is important in
general in order to ensure that your model isn’t overfitting on some unintended pattern
in your data, e.g. sorting on the label column, or time-correlated samples. Per-epoch
shuffling in particular can improve your model’s precision gain per epoch by reducing
the likelihood of bad (unrepresentative) batches getting you permanently stuck in local
minima: if you get unlucky and your last few batches have noisy labels that pull your
learned weights in the wrong direction, shuffling before the next epoch lets you bounce
out of such a gradient rut. In the distributed data-parallel training case, the current
status quo solution is typically to have a per-shard in-memory shuffle buffer that you
fill up and pop random batches from, without mixing data across shards between epochs.
Ray Data also offers fully global random shuffling via
<a class="reference internal" href="api/doc/ray.data.Dataset.random_shuffle.html#ray.data.Dataset.random_shuffle" title="ray.data.Dataset.random_shuffle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ds.random_shuffle()</span></code></a>, and doing so on an
epoch-repeated dataset pipeline to provide global per-epoch shuffling is as simple as
<code class="docutils literal notranslate"><span class="pre">ray.data.read().repeat().random_shuffle_each_window()</span></code>. But when should you opt for
global per-epoch shuffling instead of local shuffle buffer shuffling?</p>
</section>
<section id="how-to-choose-a-shuffling-policy">
<h3><a class="toc-backref" href="faq.html#id17">How to choose a shuffling policy</a><a class="headerlink" href="faq.html#how-to-choose-a-shuffling-policy" title="Permalink to this headline">#</a></h3>
<p>Global per-epoch shuffling should only be used if your model is sensitive to the
randomness of the training data. There is
<a class="reference external" href="https://arxiv.org/abs/1709.10432">theoretical foundation</a> for all
gradient-descent-based model trainers benefiting from improved (global) shuffle quality,
and we’ve found that this is particular pronounced for tabular data/models in practice.
However, the more global your shuffle is, the expensive the shuffling operation, and
this compounds when doing distributed data-parallel training on a multi-node cluster due
to data transfer costs, and this cost can be prohibitive when using very large datasets.</p>
<p>The best route for determining the best tradeoff between preprocessing time + cost and
per-epoch shuffle quality is to measure the precision gain per training step for your
particular model under different shuffling policies:</p>
<ul class="simple">
<li><p>no shuffling,</p></li>
<li><p>local (per-shard) limited-memory shuffle buffer,</p></li>
<li><p>local (per-shard) shuffling,</p></li>
<li><p>windowed (pseudo-global) shuffling, and</p></li>
<li><p>fully global shuffling.</p></li>
</ul>
<p>From the perspective of keeping preprocessing time in check, as long as your data
loading + shuffling throughput is higher than your training throughput, your GPU should
be saturated, so we like to recommend users with shuffle-sensitive models to push their
shuffle quality higher until this threshold is hit.</p>
</section>
</section>
<section id="what-is-arrow-and-how-does-ray-data-use-it">
<h2><a class="toc-backref" href="faq.html#id18">What is Arrow and how does Ray Data use it?</a><a class="headerlink" href="faq.html#what-is-arrow-and-how-does-ray-data-use-it" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="https://arrow.apache.org/">Apache Arrow</a> is a columnar memory format and a
single-node data processing and I/O library that Ray Data leverages extensively. You
can think of Ray Data as orchestrating distributed processing of Arrow data.</p>
<p>See our <a class="reference internal" href="key-concepts.html#data-key-concepts"><span class="std std-ref">key concepts</span></a> for more information on how Ray Data
uses Arrow.</p>
</section>
<section id="how-much-performance-tuning-does-ray-data-require">
<h2><a class="toc-backref" href="faq.html#id19">How much performance tuning does Ray Data require?</a><a class="headerlink" href="faq.html#how-much-performance-tuning-does-ray-data-require" title="Permalink to this headline">#</a></h2>
<p>Ray Data doesn’t perform query optimization, so some manual performance
tuning may be necessary depending on your use case and data scale. Please see our
<a class="reference internal" href="performance-tips.html#data-performance-tips"><span class="std std-ref">performance tuning guide</span></a> for more information.</p>
</section>
<section id="migrating-to-strict-mode">
<h2><a class="toc-backref" href="faq.html#id20">Migrating to strict mode</a><a class="headerlink" href="faq.html#migrating-to-strict-mode" title="Permalink to this headline">#</a></h2>
<p>In Ray 2.5, Ray Data by default always requires data schemas, dropping support for
standalone Python objects. In addition to unification and simplicity benefits, this
aligns the Ray Data API closer to industry-standard distributed data APIs like Apache
Spark and also emerging standards for machine learning datasets like HuggingFace.</p>
<p>You can disable strict mode temporarily by setting the environment variable
<code class="docutils literal notranslate"><span class="pre">RAY_DATA_STRICT_MODE=0</span></code> on all cluster processes. Strict mode will not be
possible to disable in future releases.</p>
<p>Migrating existing code is straightforward. There are two common changes you may need
to make to your code to be compatible:</p>
<ol class="arabic simple">
<li><p>Pass the <code class="docutils literal notranslate"><span class="pre">batch_format=&quot;pandas&quot;</span></code> argument to <code class="docutils literal notranslate"><span class="pre">map_batches</span></code> or <code class="docutils literal notranslate"><span class="pre">iter_batches</span></code>,
if your code assumes pandas is the default batch format.</p></li>
<li><p>Instead of returning a standalone objects or numpy arrays from <code class="docutils literal notranslate"><span class="pre">map</span></code> or <code class="docutils literal notranslate"><span class="pre">map_batches</span></code>,
return a dictionary that names the field. E.g., change function code from <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">object()</span></code> to
<code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">{&quot;my_obj&quot;:</span> <span class="pre">object()}</span></code>, and <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> to <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">{&quot;my_values&quot;:</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]}</span></code>.</p></li>
</ol>
<section id="list-of-strict-mode-changes">
<h3><a class="toc-backref" href="faq.html#id21">List of strict mode changes</a><a class="headerlink" href="faq.html#list-of-strict-mode-changes" title="Permalink to this headline">#</a></h3>
<p>In more detail, support for standalone Python objects is dropped. This means that
instead of directly storing, e.g., Python <code class="docutils literal notranslate"><span class="pre">Tuple[str,</span> <span class="pre">int]</span></code> instance in Ray Data,
you must either give each field a name (i.e., <code class="docutils literal notranslate"><span class="pre">{foo:</span> <span class="pre">str,</span> <span class="pre">bar:</span> <span class="pre">int}</span></code>), or
use a named object-type field (i.e., <code class="docutils literal notranslate"><span class="pre">{foo:</span> <span class="pre">object}</span></code>). In addition, the <code class="docutils literal notranslate"><span class="pre">default</span></code>
batch format is replaced with <code class="docutils literal notranslate"><span class="pre">numpy</span></code> by default. This means that most users
just need to be aware of <code class="docutils literal notranslate"><span class="pre">Dict[str,</span> <span class="pre">Any]</span></code> (non-batched data records) and
<code class="docutils literal notranslate"><span class="pre">Dict[str,</span> <span class="pre">np.ndarray]</span></code> (batched data) types when working with Ray Data.</p>
<p><strong>Full list of changes</strong>:</p>
<ul class="simple">
<li><p>All read apis return structured data, never standalone Python objects.</p></li>
<li><p>Standalone Python objects are prohibited from being returned from map / map batches.</p></li>
<li><p>Standalone Numpy arrays are prohibited from being returned from map / map batches.</p></li>
<li><p>There is no more special interpretation of single-column schema containing just <code class="docutils literal notranslate"><span class="pre">__value__</span></code> as a column.</p></li>
<li><p>The default batch format is <code class="docutils literal notranslate"><span class="pre">numpy</span></code> instead of <code class="docutils literal notranslate"><span class="pre">default</span></code> (pandas).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">schema()</span></code> returns a unified Schema class instead of <code class="docutils literal notranslate"><span class="pre">Union[pyarrow.lib.Schema,</span> <span class="pre">type]</span></code>.</p></li>
<li><p>When lists of array-like objects are returned from map batches, they will be converted into a contiguous numpy array, rather than treated as a list of objects.</p></li>
</ul>
<p><strong>Datasource behavior changes</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">range_tensor</span></code>: create <code class="docutils literal notranslate"><span class="pre">data</span></code>  column instead of <code class="docutils literal notranslate"><span class="pre">__value__</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_numpy</span></code> / <code class="docutils literal notranslate"><span class="pre">from_numpy_refs</span></code> : create <code class="docutils literal notranslate"><span class="pre">data</span></code> column instead of using <code class="docutils literal notranslate"><span class="pre">__value__</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_items</span></code>: create <code class="docutils literal notranslate"><span class="pre">item</span></code> column instead of using Python objects.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">range</span></code>: create <code class="docutils literal notranslate"><span class="pre">id</span></code> column instead of using Python objects.</p></li>
</ul>
</section>
</section>
<section id="how-can-i-contribute-to-ray-data">
<h2><a class="toc-backref" href="faq.html#id22">How can I contribute to Ray Data?</a><a class="headerlink" href="faq.html#how-can-i-contribute-to-ray-data" title="Permalink to this headline">#</a></h2>
<p>We’re always happy to accept external contributions! If you have a question, a feature
request, or want to contibute to Ray Data or tell us about your use case, please
reach out to us on <a class="reference external" href="https://discuss.ray.io/">Discourse</a>; if you have a you’re
confident that you’ve found a bug, please open an issue on the
<a class="reference external" href="https://github.com/ray-project/ray">Ray GitHub repo</a>. Please see our
<a class="reference internal" href="../ray-contribute/getting-involved.html#getting-involved"><span class="std std-ref">contributing guide</span></a> for more information!</p>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="examples/custom-datasource.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Implementing a Custom Datasource</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="api/api.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Ray Data API</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Ray Team<br/>
  
      &copy; Copyright 2023, The Ray Team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf"></script>


  </body>
</html>