
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Cluster YAML Configuration Options &#8212; Ray 3.0.0.dev0</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css@digest=5115cc725059bd94278eecd172e13a965bf8f5a9.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/termynal.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_/static/css/badge_only.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/js/versionwarning.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../../../_static/js/docsearch.js"></script>
    <script src="../../../_static/js/rate-the-docs.es.min.js"></script>
    <script defer="defer" src="../../../_static/js/termynal.js"></script>
    <script defer="defer" src="../../../_static/js/custom.js"></script>
    <script defer="defer" src="../../../_static/js/top-navigation.js"></script>
    <script src="../../../_static/js/tags.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js@digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script async="async" src="../../../../../_/static/javascript/readthedocs-doc-embed.js"></script>
    <link rel="canonical" href="https://docs.ray.io/en/latest/cluster/vms/references/ray-cluster-configuration.html" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Collecting and monitoring metrics" href="../../metrics.html" />
    <link rel="prev" title="Cluster Launcher Commands" href="ray-cluster-cli.html" />

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://deer.ray.io/script.js" data-site="WYYANYOS" defer></script>
<!-- / Fathom -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110413294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110413294-1');
</script>

<script
  src="https://widget.kapa.ai/kapa-widget.bundle.js"
  data-website-id="18a8c339-4ec5-43c8-8182-db3f2bc8c6b6"
  data-project-name="Ray"
  data-project-color="#2C2C2C"
  data-project-logo="https://global.discourse-cdn.com/business7/uploads/ray/original/1X/8f4dcb72f7cd34e2a332d548bd65860994bc8ff1.png"
></script>

<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id: 'VISITOR-UNIQUE-ID'
            },
            account: {
                id: 'ACCOUNT-UNIQUE-ID'
            }
        });
})('f89fa48a-6dd7-4d7c-67cf-a8051ed891f2');
</script>



  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="../../../../../_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": true, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/doc/source/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "cluster/vms/references/ray-cluster-configuration", "programming_language": "py", "project": "ray", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_book_theme", "user_analytics_code": "", "version": "master"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="../../../../../_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"><div class='topnav'></div></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ray 3.0.0.dev0</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main Navigation">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    Welcome to Ray!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ray
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/index.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/getting-started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-more-libs/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/use-cases.html">
   Use Cases
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/examples.html">
   Example Gallery
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/ray-libraries.html">
   Ecosystem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-core/walkthrough.html">
   Ray Core
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-air/getting-started.html">
   Ray AI Runtime (AIR)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../data/data.html">
   Ray Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../train/train.html">
   Ray Train
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../tune.html">
   Ray Tune
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../serve/index.html">
   Ray Serve
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../rllib/index.html">
   Ray RLlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-more-libs/index.html">
   More Libraries
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../../ray-core/cluster/index.html">
   Ray Clusters
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../../key-concepts.html">
     Key Concepts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../kubernetes/index.html">
     Deploying on Kubernetes
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="../index.html">
     Deploying on VMs
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="../getting-started.html">
       Getting Started
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../user-guides/index.html">
       User Guides
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../examples/index.html">
       Examples
      </a>
     </li>
     <li class="toctree-l3 current active has-children">
      <a class="reference internal" href="index.html">
       API References
      </a>
      <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
      <label for="toctree-checkbox-3">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul class="current">
       <li class="toctree-l4">
        <a class="reference internal" href="ray-cluster-cli.html">
         Cluster Launcher Commands
        </a>
       </li>
       <li class="toctree-l4 current active">
        <a class="current reference internal" href="ray-cluster-configuration.html#">
         Cluster YAML Configuration Options
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../metrics.html">
     Collecting and monitoring metrics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../configure-manage-dashboard.html">
     Configuring and Managing Ray Dashboard
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../running-applications/index.html">
     Applications Guide
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../faq.html">
     FAQ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../package-overview.html">
     Ray Cluster Management API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-observability/index.html">
   Monitoring and Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-references/api.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-contribute/stability.html">
   Developer Guides
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ray-project/ray"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/issues/new?title=Issue%20on%20page%20%2Fcluster/vms/references/ray-cluster-configuration.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/edit/master/doc/source/cluster/vms/references/ray-cluster-configuration.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/cluster/vms/references/ray-cluster-configuration.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-configuration.html#syntax">
   Syntax
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-configuration.html#custom-types">
   Custom types
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker">
     Docker
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#auth">
     Auth
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider">
     Provider
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#security-group">
     Security Group
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#node-types">
     Node types
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#node-config">
     Node config
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#node-docker">
     Node Docker
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#resources">
     Resources
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#file-mounts">
     File mounts
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-configuration.html#properties-and-definitions">
   Properties and Definitions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-name">
     <code class="docutils literal notranslate">
      <span class="pre">
       cluster_name
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#max-workers">
     <code class="docutils literal notranslate">
      <span class="pre">
       max_workers
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#upscaling-speed">
     <code class="docutils literal notranslate">
      <span class="pre">
       upscaling_speed
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-configuration-idle-timeout-minutes">
     <code class="docutils literal notranslate">
      <span class="pre">
       idle_timeout_minutes
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-configuration-docker">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-configuration-provider">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-configuration-auth">
     <code class="docutils literal notranslate">
      <span class="pre">
       auth
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#head-node-type">
     <code class="docutils literal notranslate">
      <span class="pre">
       head_node_type
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-configuration-file-mounts">
     <code class="docutils literal notranslate">
      <span class="pre">
       file_mounts
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-synced-files">
     <code class="docutils literal notranslate">
      <span class="pre">
       cluster_synced_files
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#rsync-exclude">
     <code class="docutils literal notranslate">
      <span class="pre">
       rsync_exclude
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#rsync-filter">
     <code class="docutils literal notranslate">
      <span class="pre">
       rsync_filter
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#initialization-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       initialization_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#setup-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       setup_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#head-setup-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       head_setup_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#worker-setup-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       worker_setup_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#head-start-ray-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       head_start_ray_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#worker-start-ray-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       worker_start_ray_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-image">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.image
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-head-image">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.head_image
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-worker-image">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.worker_image
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-container-name">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.container_name
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-pull-before-run">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.pull_before_run
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-run-options">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.run_options
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-head-run-options">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.head_run_options
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-worker-run-options">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.worker_run_options
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-disable-automatic-runtime-detection">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.disable_automatic_runtime_detection
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-disable-shm-size-detection">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.disable_shm_size_detection
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#auth-ssh-user">
     <code class="docutils literal notranslate">
      <span class="pre">
       auth.ssh_user
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#auth-ssh-private-key">
     <code class="docutils literal notranslate">
      <span class="pre">
       auth.ssh_private_key
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#auth-ssh-public-key">
     <code class="docutils literal notranslate">
      <span class="pre">
       auth.ssh_public_key
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-type">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.type
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-region">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.region
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-availability-zone">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.availability_zone
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-location">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.location
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-resource-group">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.resource_group
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-subscription-id">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.subscription_id
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-project-id">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.project_id
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-cache-stopped-nodes">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.cache_stopped_nodes
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-use-internal-ips">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.use_internal_ips
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-security-group">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.security_group
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#security-group-groupname">
     <code class="docutils literal notranslate">
      <span class="pre">
       security_group.GroupName
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#security-group-ippermissions">
     <code class="docutils literal notranslate">
      <span class="pre">
       security_group.IpPermissions
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-node-config">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.node_config
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.resources
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-min-workers">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.min_workers
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-max-workers">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.max_workers
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-worker-setup-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.worker_setup_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-cpu">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.resources.CPU
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-gpu">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.resources.GPU
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-memory">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.resources.memory
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-object-store-memory">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.resources.object-store-memory
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-docker">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.docker
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-configuration.html#examples">
   Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#minimal-configuration">
     Minimal configuration
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#full-configuration">
     Full configuration
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#tpu-configuration">
     TPU Configuration
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Cluster YAML Configuration Options</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-configuration.html#syntax">
   Syntax
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-configuration.html#custom-types">
   Custom types
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker">
     Docker
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#auth">
     Auth
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider">
     Provider
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#security-group">
     Security Group
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#node-types">
     Node types
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#node-config">
     Node config
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#node-docker">
     Node Docker
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#resources">
     Resources
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#file-mounts">
     File mounts
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-configuration.html#properties-and-definitions">
   Properties and Definitions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-name">
     <code class="docutils literal notranslate">
      <span class="pre">
       cluster_name
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#max-workers">
     <code class="docutils literal notranslate">
      <span class="pre">
       max_workers
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#upscaling-speed">
     <code class="docutils literal notranslate">
      <span class="pre">
       upscaling_speed
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-configuration-idle-timeout-minutes">
     <code class="docutils literal notranslate">
      <span class="pre">
       idle_timeout_minutes
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-configuration-docker">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-configuration-provider">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-configuration-auth">
     <code class="docutils literal notranslate">
      <span class="pre">
       auth
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#head-node-type">
     <code class="docutils literal notranslate">
      <span class="pre">
       head_node_type
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-configuration-file-mounts">
     <code class="docutils literal notranslate">
      <span class="pre">
       file_mounts
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#cluster-synced-files">
     <code class="docutils literal notranslate">
      <span class="pre">
       cluster_synced_files
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#rsync-exclude">
     <code class="docutils literal notranslate">
      <span class="pre">
       rsync_exclude
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#rsync-filter">
     <code class="docutils literal notranslate">
      <span class="pre">
       rsync_filter
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#initialization-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       initialization_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#setup-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       setup_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#head-setup-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       head_setup_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#worker-setup-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       worker_setup_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#head-start-ray-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       head_start_ray_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#worker-start-ray-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       worker_start_ray_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-image">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.image
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-head-image">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.head_image
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-worker-image">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.worker_image
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-container-name">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.container_name
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-pull-before-run">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.pull_before_run
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-run-options">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.run_options
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-head-run-options">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.head_run_options
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-worker-run-options">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.worker_run_options
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-disable-automatic-runtime-detection">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.disable_automatic_runtime_detection
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#docker-disable-shm-size-detection">
     <code class="docutils literal notranslate">
      <span class="pre">
       docker.disable_shm_size_detection
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#auth-ssh-user">
     <code class="docutils literal notranslate">
      <span class="pre">
       auth.ssh_user
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#auth-ssh-private-key">
     <code class="docutils literal notranslate">
      <span class="pre">
       auth.ssh_private_key
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#auth-ssh-public-key">
     <code class="docutils literal notranslate">
      <span class="pre">
       auth.ssh_public_key
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-type">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.type
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-region">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.region
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-availability-zone">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.availability_zone
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-location">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.location
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-resource-group">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.resource_group
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-subscription-id">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.subscription_id
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-project-id">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.project_id
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-cache-stopped-nodes">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.cache_stopped_nodes
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-use-internal-ips">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.use_internal_ips
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#provider-security-group">
     <code class="docutils literal notranslate">
      <span class="pre">
       provider.security_group
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#security-group-groupname">
     <code class="docutils literal notranslate">
      <span class="pre">
       security_group.GroupName
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#security-group-ippermissions">
     <code class="docutils literal notranslate">
      <span class="pre">
       security_group.IpPermissions
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-node-config">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.node_config
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.resources
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-min-workers">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.min_workers
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-max-workers">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.max_workers
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-worker-setup-commands">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.worker_setup_commands
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-cpu">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.resources.CPU
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-gpu">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.resources.GPU
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-memory">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.resources.memory
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-object-store-memory">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.node_type.resources.object-store-memory
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#available-node-types-node-type-name-docker">
     <code class="docutils literal notranslate">
      <span class="pre">
       available_node_types.&lt;node_type_name&gt;.docker
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-configuration.html#examples">
   Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#minimal-configuration">
     Minimal configuration
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#full-configuration">
     Full configuration
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-cluster-configuration.html#tpu-configuration">
     TPU Configuration
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="cluster-yaml-configuration-options">
<span id="cluster-config"></span><h1>Cluster YAML Configuration Options<a class="headerlink" href="ray-cluster-configuration.html#cluster-yaml-configuration-options" title="Permalink to this headline">#</a></h1>
<p>The cluster configuration is defined within a YAML file that will be used by the Cluster Launcher to launch the head node, and by the Autoscaler to launch worker nodes. Once the cluster configuration is defined, you will need to use the <a class="reference internal" href="../../cli.html#ray-cluster-cli"><span class="std std-ref">Ray CLI</span></a> to perform any operations such as starting and stopping the cluster.</p>
<section id="syntax">
<h2>Syntax<a class="headerlink" href="ray-cluster-configuration.html#syntax" title="Permalink to this headline">#</a></h2>
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-cluster-name"><span class="std std-ref">cluster_name</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-max-workers"><span class="std std-ref">max_workers</span></a>: int
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-upscaling-speed"><span class="std std-ref">upscaling_speed</span></a>: float
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-idle-timeout-minutes"><span class="std std-ref">idle_timeout_minutes</span></a>: int
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-docker"><span class="std std-ref">docker</span></a>:
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-docker-type"><span class="std std-ref">docker</span></a>
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-provider"><span class="std std-ref">provider</span></a>:
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-provider-type"><span class="std std-ref">provider</span></a>
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-auth"><span class="std std-ref">auth</span></a>:
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-auth-type"><span class="std std-ref">auth</span></a>
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-available-node-types"><span class="std std-ref">available_node_types</span></a>:
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-types-type"><span class="std std-ref">node_types</span></a>
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-head-node-type"><span class="std std-ref">head_node_type</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-file-mounts"><span class="std std-ref">file_mounts</span></a>:
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-file-mounts-type"><span class="std std-ref">file_mounts</span></a>
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-cluster-synced-files"><span class="std std-ref">cluster_synced_files</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-rsync-exclude"><span class="std std-ref">rsync_exclude</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-rsync-filter"><span class="std std-ref">rsync_filter</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-initialization-commands"><span class="std std-ref">initialization_commands</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-setup-commands"><span class="std std-ref">setup_commands</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-head-setup-commands"><span class="std std-ref">head_setup_commands</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-worker-setup-commands"><span class="std std-ref">worker_setup_commands</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-head-start-ray-commands"><span class="std std-ref">head_start_ray_commands</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-worker-start-ray-commands"><span class="std std-ref">worker_start_ray_commands</span></a>:
    - str</pre>
</section>
<section id="custom-types">
<h2>Custom types<a class="headerlink" href="ray-cluster-configuration.html#custom-types" title="Permalink to this headline">#</a></h2>
<section id="docker">
<span id="cluster-configuration-docker-type"></span><h3>Docker<a class="headerlink" href="ray-cluster-configuration.html#docker" title="Permalink to this headline">#</a></h3>
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-image"><span class="std std-ref">image</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-head-image"><span class="std std-ref">head_image</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-worker-image"><span class="std std-ref">worker_image</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-container-name"><span class="std std-ref">container_name</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-pull-before-run"><span class="std std-ref">pull_before_run</span></a>: bool
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-run-options"><span class="std std-ref">run_options</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-head-run-options"><span class="std std-ref">head_run_options</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-worker-run-options"><span class="std std-ref">worker_run_options</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-disable-automatic-runtime-detection"><span class="std std-ref">disable_automatic_runtime_detection</span></a>: bool
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-disable-shm-size-detection"><span class="std std-ref">disable_shm_size_detection</span></a>: bool</pre>
</section>
<section id="auth">
<span id="cluster-configuration-auth-type"></span><h3>Auth<a class="headerlink" href="ray-cluster-configuration.html#auth" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
AWS</label><div class="sd-tab-content docutils">
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-ssh-user"><span class="std std-ref">ssh_user</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-ssh-private-key"><span class="std std-ref">ssh_private_key</span></a>: str</pre>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Azure</label><div class="sd-tab-content docutils">
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-ssh-user"><span class="std std-ref">ssh_user</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-ssh-private-key"><span class="std std-ref">ssh_private_key</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-ssh-public-key"><span class="std std-ref">ssh_public_key</span></a>: str</pre>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-2">
GCP</label><div class="sd-tab-content docutils">
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-ssh-user"><span class="std std-ref">ssh_user</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-ssh-private-key"><span class="std std-ref">ssh_private_key</span></a>: str</pre>
</div>
</div>
</section>
<section id="provider">
<span id="cluster-configuration-provider-type"></span><h3>Provider<a class="headerlink" href="ray-cluster-configuration.html#provider" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-3">
AWS</label><div class="sd-tab-content docutils">
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-type"><span class="std std-ref">type</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-region"><span class="std std-ref">region</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-availability-zone"><span class="std std-ref">availability_zone</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-cache-stopped-nodes"><span class="std std-ref">cache_stopped_nodes</span></a>: bool
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-security-group"><span class="std std-ref">security_group</span></a>:
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-security-group-type"><span class="std std-ref">Security Group</span></a>
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-use-internal-ips"><span class="std std-ref">use_internal_ips</span></a>: bool</pre>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-4">
Azure</label><div class="sd-tab-content docutils">
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-type"><span class="std std-ref">type</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-location"><span class="std std-ref">location</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-resource-group"><span class="std std-ref">resource_group</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-subscription-id"><span class="std std-ref">subscription_id</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-cache-stopped-nodes"><span class="std std-ref">cache_stopped_nodes</span></a>: bool
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-use-internal-ips"><span class="std std-ref">use_internal_ips</span></a>: bool</pre>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-5">
GCP</label><div class="sd-tab-content docutils">
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-type"><span class="std std-ref">type</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-region"><span class="std std-ref">region</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-availability-zone"><span class="std std-ref">availability_zone</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-project-id"><span class="std std-ref">project_id</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-cache-stopped-nodes"><span class="std std-ref">cache_stopped_nodes</span></a>: bool
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-use-internal-ips"><span class="std std-ref">use_internal_ips</span></a>: bool</pre>
</div>
</div>
</section>
<section id="security-group">
<span id="cluster-configuration-security-group-type"></span><h3>Security Group<a class="headerlink" href="ray-cluster-configuration.html#security-group" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-6">
AWS</label><div class="sd-tab-content docutils">
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-group-name"><span class="std std-ref">GroupName</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-ip-permissions"><span class="std std-ref">IpPermissions</span></a>:
    - <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_IpPermission.html">IpPermission</a></pre>
</div>
</div>
</section>
<section id="node-types">
<span id="cluster-configuration-node-types-type"></span><h3>Node types<a class="headerlink" href="ray-cluster-configuration.html#node-types" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">available_nodes_types</span></code> object’s keys represent the names of the different node types.</p>
<p>Deleting a node type from <code class="docutils literal notranslate"><span class="pre">available_node_types</span></code> and updating with <a class="reference internal" href="../../cli.html#ray-up-doc"><span class="std std-ref">ray up</span></a> will cause the autoscaler to scale down all nodes of that type.
In particular, changing the key of a node type object will
result in removal of nodes corresponding to the old key; nodes with the new key name will then be
created according to cluster configuration and Ray resource demands.</p>
<pre class="literal-block">&lt;node_type_1_name&gt;:
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-config"><span class="std std-ref">node_config</span></a>:
        <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-config-type"><span class="std std-ref">Node config</span></a>
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-resources"><span class="std std-ref">resources</span></a>:
        <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-resources-type"><span class="std std-ref">Resources</span></a>
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-min-workers"><span class="std std-ref">min_workers</span></a>: int
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-max-workers"><span class="std std-ref">max_workers</span></a>: int
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-type-worker-setup-commands"><span class="std std-ref">worker_setup_commands</span></a>:
        - str
    <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-docker"><span class="std std-ref">docker</span></a>:
        <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-docker-type"><span class="std std-ref">Node Docker</span></a>
&lt;node_type_2_name&gt;:
    ...
...</pre>
</section>
<section id="node-config">
<span id="cluster-configuration-node-config-type"></span><h3>Node config<a class="headerlink" href="ray-cluster-configuration.html#node-config" title="Permalink to this headline">#</a></h3>
<p>Cloud-specific configuration for nodes of a given node type.</p>
<p>Modifying the <code class="docutils literal notranslate"><span class="pre">node_config</span></code> and updating with <a class="reference internal" href="../../cli.html#ray-up-doc"><span class="std std-ref">ray up</span></a> will cause the autoscaler to scale down all existing nodes of the node type;
nodes with the newly applied <code class="docutils literal notranslate"><span class="pre">node_config</span></code> will then be created according to cluster configuration and Ray resource demands.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-7" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-7">
AWS</label><div class="sd-tab-content docutils">
<p>A YAML object which conforms to the EC2 <code class="docutils literal notranslate"><span class="pre">create_instances</span></code> API in <a class="reference external" href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ec2.html#EC2.ServiceResource.create_instances">the AWS docs</a>.</p>
</div>
<input id="sd-tab-item-8" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-8">
Azure</label><div class="sd-tab-content docutils">
<p>A YAML object as defined in <a class="reference external" href="https://docs.microsoft.com/en-us/azure/templates/microsoft.compute/virtualmachines">the deployment template</a> whose resources are defined in <a class="reference external" href="https://docs.microsoft.com/en-us/azure/templates/">the Azure docs</a>.</p>
</div>
<input id="sd-tab-item-9" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-9">
GCP</label><div class="sd-tab-content docutils">
<p>A YAML object as defined in <a class="reference external" href="https://cloud.google.com/compute/docs/reference/rest/v1/instances">the GCP docs</a>.</p>
</div>
</div>
</section>
<section id="node-docker">
<span id="cluster-configuration-node-docker-type"></span><h3>Node Docker<a class="headerlink" href="ray-cluster-configuration.html#node-docker" title="Permalink to this headline">#</a></h3>
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-image"><span class="std std-ref">worker_image</span></a>: str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-pull-before-run"><span class="std std-ref">pull_before_run</span></a>: bool
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-worker-run-options"><span class="std std-ref">worker_run_options</span></a>:
    - str
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-disable-automatic-runtime-detection"><span class="std std-ref">disable_automatic_runtime_detection</span></a>: bool
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-disable-shm-size-detection"><span class="std std-ref">disable_shm_size_detection</span></a>: bool</pre>
</section>
<section id="resources">
<span id="cluster-configuration-resources-type"></span><h3>Resources<a class="headerlink" href="ray-cluster-configuration.html#resources" title="Permalink to this headline">#</a></h3>
<pre class="literal-block"><a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-cpu"><span class="std std-ref">CPU</span></a>: int
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-gpu"><span class="std std-ref">GPU</span></a>: int
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-object-store-memory"><span class="std std-ref">object_store_memory</span></a>: int
<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-memory"><span class="std std-ref">memory</span></a>: int
&lt;custom_resource1&gt;: int
&lt;custom_resource2&gt;: int
...</pre>
</section>
<section id="file-mounts">
<span id="cluster-configuration-file-mounts-type"></span><h3>File mounts<a class="headerlink" href="ray-cluster-configuration.html#file-mounts" title="Permalink to this headline">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">path1_on_remote_machine</span><span class="o">&gt;</span><span class="p">:</span> <span class="nb">str</span> <span class="c1"># Path 1 on local machine</span>
<span class="o">&lt;</span><span class="n">path2_on_remote_machine</span><span class="o">&gt;</span><span class="p">:</span> <span class="nb">str</span> <span class="c1"># Path 2 on local machine</span>
<span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="properties-and-definitions">
<h2>Properties and Definitions<a class="headerlink" href="ray-cluster-configuration.html#properties-and-definitions" title="Permalink to this headline">#</a></h2>
<section id="cluster-name">
<span id="cluster-configuration-cluster-name"></span><h3><code class="docutils literal notranslate"><span class="pre">cluster_name</span></code><a class="headerlink" href="ray-cluster-configuration.html#cluster-name" title="Permalink to this headline">#</a></h3>
<p>The name of the cluster. This is the namespace of the cluster.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> “default”</p></li>
<li><p><strong>Pattern:</strong> <code class="docutils literal notranslate"><span class="pre">[a-zA-Z0-9_]+</span></code></p></li>
</ul>
</section>
<section id="max-workers">
<span id="cluster-configuration-max-workers"></span><h3><code class="docutils literal notranslate"><span class="pre">max_workers</span></code><a class="headerlink" href="ray-cluster-configuration.html#max-workers" title="Permalink to this headline">#</a></h3>
<p>The maximum number of workers the cluster will have at any given time.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">2</span></code></p></li>
<li><p><strong>Minimum:</strong> <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>Maximum:</strong> Unbounded</p></li>
</ul>
</section>
<section id="upscaling-speed">
<span id="cluster-configuration-upscaling-speed"></span><h3><code class="docutils literal notranslate"><span class="pre">upscaling_speed</span></code><a class="headerlink" href="ray-cluster-configuration.html#upscaling-speed" title="Permalink to this headline">#</a></h3>
<p>The number of nodes allowed to be pending as a multiple of the current number of nodes. For example, if set to 1.0, the cluster can grow in size by at most 100% at any time, so if the cluster currently has 20 nodes, at most 20 pending launches are allowed. Note that although the autoscaler will scale down to <code class="xref py py-obj docutils literal notranslate"><span class="pre">min_workers</span></code> (which could be 0), it will always scale up to 5 nodes at a minimum when scaling up.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Medium</p></li>
<li><p><strong>Type:</strong> Float</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">1.0</span></code></p></li>
<li><p><strong>Minimum:</strong> <code class="docutils literal notranslate"><span class="pre">0.0</span></code></p></li>
<li><p><strong>Maximum:</strong> Unbounded</p></li>
</ul>
</section>
<section id="cluster-configuration-idle-timeout-minutes">
<span id="idle-timeout-minutes"></span><h3><code class="docutils literal notranslate"><span class="pre">idle_timeout_minutes</span></code><a class="headerlink" href="ray-cluster-configuration.html#cluster-configuration-idle-timeout-minutes" title="Permalink to this headline">#</a></h3>
<p>The number of minutes that need to pass before an idle worker node is removed by the Autoscaler.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Medium</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">5</span></code></p></li>
<li><p><strong>Minimum:</strong> <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>Maximum:</strong> Unbounded</p></li>
</ul>
</section>
<section id="cluster-configuration-docker">
<span id="id1"></span><h3><code class="docutils literal notranslate"><span class="pre">docker</span></code><a class="headerlink" href="ray-cluster-configuration.html#cluster-configuration-docker" title="Permalink to this headline">#</a></h3>
<p>Configure Ray to run in Docker containers.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-docker-type"><span class="std std-ref">Docker</span></a></p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">{}</span></code></p></li>
</ul>
<p>In rare cases when Docker is not available on the system by default (e.g., bad AMI), add the following commands to <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-initialization-commands"><span class="std std-ref">initialization_commands</span></a> to install it.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">initialization_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">curl -fsSL https://get.docker.com -o get-docker.sh</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo sh get-docker.sh</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo usermod -aG docker $USER</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo systemctl restart docker -f</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="cluster-configuration-provider">
<span id="id2"></span><h3><code class="docutils literal notranslate"><span class="pre">provider</span></code><a class="headerlink" href="ray-cluster-configuration.html#cluster-configuration-provider" title="Permalink to this headline">#</a></h3>
<p>The cloud provider-specific configuration properties.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-provider-type"><span class="std std-ref">Provider</span></a></p></li>
</ul>
</section>
<section id="cluster-configuration-auth">
<span id="id3"></span><h3><code class="docutils literal notranslate"><span class="pre">auth</span></code><a class="headerlink" href="ray-cluster-configuration.html#cluster-configuration-auth" title="Permalink to this headline">#</a></h3>
<p>Authentication credentials that Ray will use to launch nodes.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-auth-type"><span class="std std-ref">Auth</span></a></p></li>
</ul>
</section>
<section id="available-node-types">
<span id="cluster-configuration-available-node-types"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types" title="Permalink to this headline">#</a></h3>
<p>Tells the autoscaler the allowed node types and the resources they provide.
Each node type is identified by a user-specified key.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-types-type"><span class="std std-ref">Node types</span></a></p></li>
<li><p><strong>Default:</strong></p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-10" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-10">
AWS</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">available_node_types</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">ray.head.default</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">node_config</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">InstanceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">m5.large</span><span class="w"></span>
<span class="w">        </span><span class="nt">BlockDeviceMappings</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">DeviceName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/dev/sda1</span><span class="w"></span>
<span class="w">              </span><span class="nt">Ebs</span><span class="p">:</span><span class="w"></span>
<span class="w">                  </span><span class="nt">VolumeSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">140</span><span class="w"></span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;CPU&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="nt">ray.worker.default</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">node_config</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">InstanceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">m5.large</span><span class="w"></span>
<span class="w">        </span><span class="nt">InstanceMarketOptions</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">MarketType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spot</span><span class="w"></span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;CPU&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">      </span><span class="nt">min_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="head-node-type">
<span id="cluster-configuration-head-node-type"></span><h3><code class="docutils literal notranslate"><span class="pre">head_node_type</span></code><a class="headerlink" href="ray-cluster-configuration.html#head-node-type" title="Permalink to this headline">#</a></h3>
<p>The key for one of the node types in <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-available-node-types"><span class="std std-ref">available_node_types</span></a>. This node type will be used to launch the head node.</p>
<p>If the field <code class="docutils literal notranslate"><span class="pre">head_node_type</span></code> is changed and an update is executed with <a class="reference internal" href="../../cli.html#ray-up-doc"><span class="std std-ref">ray up</span></a>, the currently running head node will
be considered outdated. The user will receive a prompt asking to confirm scale-down of the outdated head node, and the cluster will restart with a new
head node. Changing the <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-config"><span class="std std-ref">node_config</span></a> of the <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-types-type"><span class="std std-ref">node_type</span></a> with key <code class="docutils literal notranslate"><span class="pre">head_node_type</span></code> will also result in cluster restart after a user prompt.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Pattern:</strong> <code class="docutils literal notranslate"><span class="pre">[a-zA-Z0-9_]+</span></code></p></li>
</ul>
</section>
<section id="cluster-configuration-file-mounts">
<span id="id4"></span><h3><code class="docutils literal notranslate"><span class="pre">file_mounts</span></code><a class="headerlink" href="ray-cluster-configuration.html#cluster-configuration-file-mounts" title="Permalink to this headline">#</a></h3>
<p>The files or directories to copy to the head and worker nodes.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-file-mounts-type"><span class="std std-ref">File mounts</span></a></p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="cluster-synced-files">
<span id="cluster-configuration-cluster-synced-files"></span><h3><code class="docutils literal notranslate"><span class="pre">cluster_synced_files</span></code><a class="headerlink" href="ray-cluster-configuration.html#cluster-synced-files" title="Permalink to this headline">#</a></h3>
<p>A list of paths to the files or directories to copy from the head node to the worker nodes. The same path on the head node will be copied to the worker node. This behavior is a subset of the file_mounts behavior, so in the vast majority of cases one should just use <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-file-mounts"><span class="std std-ref">file_mounts</span></a>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="rsync-exclude">
<span id="cluster-configuration-rsync-exclude"></span><h3><code class="docutils literal notranslate"><span class="pre">rsync_exclude</span></code><a class="headerlink" href="ray-cluster-configuration.html#rsync-exclude" title="Permalink to this headline">#</a></h3>
<p>A list of patterns for files to exclude when running <code class="docutils literal notranslate"><span class="pre">rsync</span> <span class="pre">up</span></code> or <code class="docutils literal notranslate"><span class="pre">rsync</span> <span class="pre">down</span></code>. The filter is applied on the source directory only.</p>
<p>Example for a pattern in the list: <code class="docutils literal notranslate"><span class="pre">**/.git/**</span></code>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="rsync-filter">
<span id="cluster-configuration-rsync-filter"></span><h3><code class="docutils literal notranslate"><span class="pre">rsync_filter</span></code><a class="headerlink" href="ray-cluster-configuration.html#rsync-filter" title="Permalink to this headline">#</a></h3>
<p>A list of patterns for files to exclude when running <code class="docutils literal notranslate"><span class="pre">rsync</span> <span class="pre">up</span></code> or <code class="docutils literal notranslate"><span class="pre">rsync</span> <span class="pre">down</span></code>. The filter is applied on the source directory and recursively through all subdirectories.</p>
<p>Example for a pattern in the list: <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="initialization-commands">
<span id="cluster-configuration-initialization-commands"></span><h3><code class="docutils literal notranslate"><span class="pre">initialization_commands</span></code><a class="headerlink" href="ray-cluster-configuration.html#initialization-commands" title="Permalink to this headline">#</a></h3>
<p>A list of commands that will be run before the <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-setup-commands"><span class="std std-ref">setup commands</span></a>. If Docker is enabled, these commands will run outside the container and before Docker is setup.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Medium</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="setup-commands">
<span id="cluster-configuration-setup-commands"></span><h3><code class="docutils literal notranslate"><span class="pre">setup_commands</span></code><a class="headerlink" href="ray-cluster-configuration.html#setup-commands" title="Permalink to this headline">#</a></h3>
<p>A list of commands to run to set up nodes. These commands will always run on the head and worker nodes and will be merged with <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-head-setup-commands"><span class="std std-ref">head setup commands</span></a> for head and with <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-worker-setup-commands"><span class="std std-ref">worker setup commands</span></a> for workers.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Medium</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong></p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-11" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-11">
AWS</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default setup_commands:</span><span class="w"></span>
<span class="nt">setup_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &#39;export PATH=&quot;$HOME/anaconda3/envs/tensorflow_p36/bin:$PATH&quot;&#39; &gt;&gt; ~/.bashrc</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip install -U https://s3-us-west-2.amazonaws.com/ray-wheels/latest/ray-3.0.0.dev0-cp37-cp37m-manylinux2014_x86_64.whl</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<ul>
<li><p>Setup commands should ideally be <em>idempotent</em> (i.e., can be run multiple times without changing the result); this allows Ray to safely update nodes after they have been created. You can usually make commands idempotent with small modifications, e.g. <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">foo</span></code> can be rewritten as <code class="docutils literal notranslate"><span class="pre">test</span> <span class="pre">-e</span> <span class="pre">foo</span> <span class="pre">||</span> <span class="pre">git</span> <span class="pre">clone</span> <span class="pre">foo</span></code> which checks if the repo is already cloned first.</p></li>
<li><p>Setup commands are run sequentially but separately. For example, if you are using anaconda, you need to run <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">env</span> <span class="pre">&amp;&amp;</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-U</span> <span class="pre">ray</span></code> because splitting the command into two setup commands will not work.</p></li>
<li><p>Ideally, you should avoid using setup_commands by creating a docker image with all the dependencies preinstalled to minimize startup time.</p></li>
<li><p><strong>Tip</strong>: if you also want to run apt-get commands during setup add the following list of commands:</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">setup_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo pkill -9 apt-get || true</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo pkill -9 dpkg || true</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo dpkg --configure -a</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="head-setup-commands">
<span id="cluster-configuration-head-setup-commands"></span><h3><code class="docutils literal notranslate"><span class="pre">head_setup_commands</span></code><a class="headerlink" href="ray-cluster-configuration.html#head-setup-commands" title="Permalink to this headline">#</a></h3>
<p>A list of commands to run to set up the head node. These commands will be merged with the general <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-setup-commands"><span class="std std-ref">setup commands</span></a>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="worker-setup-commands">
<span id="cluster-configuration-worker-setup-commands"></span><h3><code class="docutils literal notranslate"><span class="pre">worker_setup_commands</span></code><a class="headerlink" href="ray-cluster-configuration.html#worker-setup-commands" title="Permalink to this headline">#</a></h3>
<p>A list of commands to run to set up the worker nodes. These commands will be merged with the general <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-setup-commands"><span class="std std-ref">setup commands</span></a>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="head-start-ray-commands">
<span id="cluster-configuration-head-start-ray-commands"></span><h3><code class="docutils literal notranslate"><span class="pre">head_start_ray_commands</span></code><a class="headerlink" href="ray-cluster-configuration.html#head-start-ray-commands" title="Permalink to this headline">#</a></h3>
<p>Commands to start ray on the head node. You don’t need to change this.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong></p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-12" name="sd-tab-set-6" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-12">
AWS</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">head_start_ray_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray stop</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ulimit -n 65536; ray start --head --port=6379 --object-manager-port=8076 --autoscaling-config=~/ray_bootstrap_config.yaml</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="worker-start-ray-commands">
<span id="cluster-configuration-worker-start-ray-commands"></span><h3><code class="docutils literal notranslate"><span class="pre">worker_start_ray_commands</span></code><a class="headerlink" href="ray-cluster-configuration.html#worker-start-ray-commands" title="Permalink to this headline">#</a></h3>
<p>Command to start ray on worker nodes. You don’t need to change this.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong></p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-13" name="sd-tab-set-7" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-13">
AWS</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">worker_start_ray_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray stop</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ulimit -n 65536; ray start --address=$RAY_HEAD_IP:6379 --object-manager-port=8076</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="docker-image">
<span id="cluster-configuration-image"></span><h3><code class="docutils literal notranslate"><span class="pre">docker.image</span></code><a class="headerlink" href="ray-cluster-configuration.html#docker-image" title="Permalink to this headline">#</a></h3>
<p>The default Docker image to pull in the head and worker nodes. This can be overridden by the <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-head-image"><span class="std std-ref">head_image</span></a> and <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-worker-image"><span class="std std-ref">worker_image</span></a> fields. If neither <code class="xref py py-obj docutils literal notranslate"><span class="pre">image</span></code> nor (<a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-head-image"><span class="std std-ref">head_image</span></a> and <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-worker-image"><span class="std std-ref">worker_image</span></a>) are specified, Ray will not use Docker.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes (If Docker is in use.)</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
<p>The Ray project provides Docker images on <a class="reference external" href="https://hub.docker.com/u/rayproject">DockerHub</a>. The repository includes following images:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rayproject/ray-ml:latest-gpu</span></code>: CUDA support, includes ML dependencies.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rayproject/ray:latest-gpu</span></code>: CUDA support, no ML dependencies.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rayproject/ray-ml:latest</span></code>: No CUDA support, includes ML dependencies.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rayproject/ray:latest</span></code>: No CUDA support, no ML dependencies.</p></li>
</ul>
</section>
<section id="docker-head-image">
<span id="cluster-configuration-head-image"></span><h3><code class="docutils literal notranslate"><span class="pre">docker.head_image</span></code><a class="headerlink" href="ray-cluster-configuration.html#docker-head-image" title="Permalink to this headline">#</a></h3>
<p>Docker image for the head node to override the default <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-image"><span class="std std-ref">docker image</span></a>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
</section>
<section id="docker-worker-image">
<span id="cluster-configuration-worker-image"></span><h3><code class="docutils literal notranslate"><span class="pre">docker.worker_image</span></code><a class="headerlink" href="ray-cluster-configuration.html#docker-worker-image" title="Permalink to this headline">#</a></h3>
<p>Docker image for the worker nodes to override the default <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-image"><span class="std std-ref">docker image</span></a>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
</section>
<section id="docker-container-name">
<span id="cluster-configuration-container-name"></span><h3><code class="docutils literal notranslate"><span class="pre">docker.container_name</span></code><a class="headerlink" href="ray-cluster-configuration.html#docker-container-name" title="Permalink to this headline">#</a></h3>
<p>The name to use when starting the Docker container.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes (If Docker is in use.)</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> ray_container</p></li>
</ul>
</section>
<section id="docker-pull-before-run">
<span id="cluster-configuration-pull-before-run"></span><h3><code class="docutils literal notranslate"><span class="pre">docker.pull_before_run</span></code><a class="headerlink" href="ray-cluster-configuration.html#docker-pull-before-run" title="Permalink to this headline">#</a></h3>
<p>If enabled, the latest version of image will be pulled when starting Docker. If disabled, <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> will only pull the image if no cached version is present.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Medium</p></li>
<li><p><strong>Type:</strong> Boolean</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">True</span></code></p></li>
</ul>
</section>
<section id="docker-run-options">
<span id="cluster-configuration-run-options"></span><h3><code class="docutils literal notranslate"><span class="pre">docker.run_options</span></code><a class="headerlink" href="ray-cluster-configuration.html#docker-run-options" title="Permalink to this headline">#</a></h3>
<p>The extra options to pass to <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Medium</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="docker-head-run-options">
<span id="cluster-configuration-head-run-options"></span><h3><code class="docutils literal notranslate"><span class="pre">docker.head_run_options</span></code><a class="headerlink" href="ray-cluster-configuration.html#docker-head-run-options" title="Permalink to this headline">#</a></h3>
<p>The extra options to pass to <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> for head node only.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="docker-worker-run-options">
<span id="cluster-configuration-worker-run-options"></span><h3><code class="docutils literal notranslate"><span class="pre">docker.worker_run_options</span></code><a class="headerlink" href="ray-cluster-configuration.html#docker-worker-run-options" title="Permalink to this headline">#</a></h3>
<p>The extra options to pass to <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> for worker nodes only.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="docker-disable-automatic-runtime-detection">
<span id="cluster-configuration-disable-automatic-runtime-detection"></span><h3><code class="docutils literal notranslate"><span class="pre">docker.disable_automatic_runtime_detection</span></code><a class="headerlink" href="ray-cluster-configuration.html#docker-disable-automatic-runtime-detection" title="Permalink to this headline">#</a></h3>
<p>If enabled, Ray will not try to use the NVIDIA Container Runtime if GPUs are present.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> Boolean</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
</ul>
</section>
<section id="docker-disable-shm-size-detection">
<span id="cluster-configuration-disable-shm-size-detection"></span><h3><code class="docutils literal notranslate"><span class="pre">docker.disable_shm_size_detection</span></code><a class="headerlink" href="ray-cluster-configuration.html#docker-disable-shm-size-detection" title="Permalink to this headline">#</a></h3>
<p>If enabled, Ray will not automatically specify the size <code class="docutils literal notranslate"><span class="pre">/dev/shm</span></code> for the started container and the runtime’s default value (64MiB for Docker) will be used.
If <code class="docutils literal notranslate"><span class="pre">--shm-size=&lt;&gt;</span></code> is manually added to <code class="docutils literal notranslate"><span class="pre">run_options</span></code>, this is <em>automatically</em> set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, meaning that Ray will defer to the user-provided value.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> Boolean</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
</ul>
</section>
<section id="auth-ssh-user">
<span id="cluster-configuration-ssh-user"></span><h3><code class="docutils literal notranslate"><span class="pre">auth.ssh_user</span></code><a class="headerlink" href="ray-cluster-configuration.html#auth-ssh-user" title="Permalink to this headline">#</a></h3>
<p>The user that Ray will authenticate with when launching new nodes.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
</section>
<section id="auth-ssh-private-key">
<span id="cluster-configuration-ssh-private-key"></span><h3><code class="docutils literal notranslate"><span class="pre">auth.ssh_private_key</span></code><a class="headerlink" href="ray-cluster-configuration.html#auth-ssh-private-key" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-14" name="sd-tab-set-8" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-14">
AWS</label><div class="sd-tab-content docutils">
<p>The path to an existing private key for Ray to use. If not configured, Ray will create a new private keypair (default behavior). If configured, the key must be added to the project-wide metadata and <code class="docutils literal notranslate"><span class="pre">KeyName</span></code> has to be defined in the <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-config"><span class="std std-ref">node configuration</span></a>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
</div>
<input id="sd-tab-item-15" name="sd-tab-set-8" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-15">
Azure</label><div class="sd-tab-content docutils">
<p>The path to an existing private key for Ray to use.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
<p>You may use <code class="docutils literal notranslate"><span class="pre">ssh-keygen</span> <span class="pre">-t</span> <span class="pre">rsa</span> <span class="pre">-b</span> <span class="pre">4096</span></code> to generate a new ssh keypair.</p>
</div>
<input id="sd-tab-item-16" name="sd-tab-set-8" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-16">
GCP</label><div class="sd-tab-content docutils">
<p>The path to an existing private key for Ray to use. If not configured, Ray will create a new private keypair (default behavior). If configured, the key must be added to the project-wide metadata and <code class="docutils literal notranslate"><span class="pre">KeyName</span></code> has to be defined in the <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-config"><span class="std std-ref">node configuration</span></a>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
</div>
</div>
</section>
<section id="auth-ssh-public-key">
<span id="cluster-configuration-ssh-public-key"></span><h3><code class="docutils literal notranslate"><span class="pre">auth.ssh_public_key</span></code><a class="headerlink" href="ray-cluster-configuration.html#auth-ssh-public-key" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-17" name="sd-tab-set-9" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-17">
AWS</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
<input id="sd-tab-item-18" name="sd-tab-set-9" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-18">
Azure</label><div class="sd-tab-content docutils">
<p>The path to an existing public key for Ray to use.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
</div>
<input id="sd-tab-item-19" name="sd-tab-set-9" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-19">
GCP</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
</div>
</section>
<section id="provider-type">
<span id="cluster-configuration-type"></span><h3><code class="docutils literal notranslate"><span class="pre">provider.type</span></code><a class="headerlink" href="ray-cluster-configuration.html#provider-type" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-20" name="sd-tab-set-10" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-20">
AWS</label><div class="sd-tab-content docutils">
<p>The cloud service provider. For AWS, this must be set to <code class="docutils literal notranslate"><span class="pre">aws</span></code>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
</div>
<input id="sd-tab-item-21" name="sd-tab-set-10" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-21">
Azure</label><div class="sd-tab-content docutils">
<p>The cloud service provider. For Azure, this must be set to <code class="docutils literal notranslate"><span class="pre">azure</span></code>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
</div>
<input id="sd-tab-item-22" name="sd-tab-set-10" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-22">
GCP</label><div class="sd-tab-content docutils">
<p>The cloud service provider. For GCP, this must be set to <code class="docutils literal notranslate"><span class="pre">gcp</span></code>.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
</ul>
</div>
</div>
</section>
<section id="provider-region">
<span id="cluster-configuration-region"></span><h3><code class="docutils literal notranslate"><span class="pre">provider.region</span></code><a class="headerlink" href="ray-cluster-configuration.html#provider-region" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-23" name="sd-tab-set-11" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-23">
AWS</label><div class="sd-tab-content docutils">
<p>The region to use for deployment of the Ray cluster.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> us-west-2</p></li>
</ul>
</div>
<input id="sd-tab-item-24" name="sd-tab-set-11" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-24">
Azure</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
<input id="sd-tab-item-25" name="sd-tab-set-11" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-25">
GCP</label><div class="sd-tab-content docutils">
<p>The region to use for deployment of the Ray cluster.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> us-west1</p></li>
</ul>
</div>
</div>
</section>
<section id="provider-availability-zone">
<span id="cluster-configuration-availability-zone"></span><h3><code class="docutils literal notranslate"><span class="pre">provider.availability_zone</span></code><a class="headerlink" href="ray-cluster-configuration.html#provider-availability-zone" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-26" name="sd-tab-set-12" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-26">
AWS</label><div class="sd-tab-content docutils">
<p>A string specifying a comma-separated list of availability zone(s) that nodes may be launched in.
Nodes will be launched in the first listed availability zone and will be tried in the following availability
zones if launching fails.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> us-west-2a,us-west-2b</p></li>
</ul>
</div>
<input id="sd-tab-item-27" name="sd-tab-set-12" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-27">
Azure</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
<input id="sd-tab-item-28" name="sd-tab-set-12" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-28">
GCP</label><div class="sd-tab-content docutils">
<p>A string specifying a comma-separated list of availability zone(s) that nodes may be launched in.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> us-west1-a</p></li>
</ul>
</div>
</div>
</section>
<section id="provider-location">
<span id="cluster-configuration-location"></span><h3><code class="docutils literal notranslate"><span class="pre">provider.location</span></code><a class="headerlink" href="ray-cluster-configuration.html#provider-location" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-29" name="sd-tab-set-13" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-29">
AWS</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
<input id="sd-tab-item-30" name="sd-tab-set-13" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-30">
Azure</label><div class="sd-tab-content docutils">
<p>The location to use for deployment of the Ray cluster.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> westus2</p></li>
</ul>
</div>
<input id="sd-tab-item-31" name="sd-tab-set-13" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-31">
GCP</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
</div>
</section>
<section id="provider-resource-group">
<span id="cluster-configuration-resource-group"></span><h3><code class="docutils literal notranslate"><span class="pre">provider.resource_group</span></code><a class="headerlink" href="ray-cluster-configuration.html#provider-resource-group" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-32" name="sd-tab-set-14" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-32">
AWS</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
<input id="sd-tab-item-33" name="sd-tab-set-14" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-33">
Azure</label><div class="sd-tab-content docutils">
<p>The resource group to use for deployment of the Ray cluster.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> ray-cluster</p></li>
</ul>
</div>
<input id="sd-tab-item-34" name="sd-tab-set-14" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-34">
GCP</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
</div>
</section>
<section id="provider-subscription-id">
<span id="cluster-configuration-subscription-id"></span><h3><code class="docutils literal notranslate"><span class="pre">provider.subscription_id</span></code><a class="headerlink" href="ray-cluster-configuration.html#provider-subscription-id" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-35" name="sd-tab-set-15" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-35">
AWS</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
<input id="sd-tab-item-36" name="sd-tab-set-15" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-36">
Azure</label><div class="sd-tab-content docutils">
<p>The subscription ID to use for deployment of the Ray cluster. If not specified, Ray will use the default from the Azure CLI.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></p></li>
</ul>
</div>
<input id="sd-tab-item-37" name="sd-tab-set-15" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-37">
GCP</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
</div>
</section>
<section id="provider-project-id">
<span id="cluster-configuration-project-id"></span><h3><code class="docutils literal notranslate"><span class="pre">provider.project_id</span></code><a class="headerlink" href="ray-cluster-configuration.html#provider-project-id" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-38" name="sd-tab-set-16" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-38">
AWS</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
<input id="sd-tab-item-39" name="sd-tab-set-16" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-39">
Azure</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
<input id="sd-tab-item-40" name="sd-tab-set-16" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-40">
GCP</label><div class="sd-tab-content docutils">
<p>The globally unique project ID to use for deployment of the Ray cluster.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">null</span></code></p></li>
</ul>
</div>
</div>
</section>
<section id="provider-cache-stopped-nodes">
<span id="cluster-configuration-cache-stopped-nodes"></span><h3><code class="docutils literal notranslate"><span class="pre">provider.cache_stopped_nodes</span></code><a class="headerlink" href="ray-cluster-configuration.html#provider-cache-stopped-nodes" title="Permalink to this headline">#</a></h3>
<p>If enabled, nodes will be <em>stopped</em> when the cluster scales down. If disabled, nodes will be <em>terminated</em> instead. Stopped nodes launch faster than terminated nodes.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> Boolean</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">True</span></code></p></li>
</ul>
</section>
<section id="provider-use-internal-ips">
<span id="cluster-configuration-use-internal-ips"></span><h3><code class="docutils literal notranslate"><span class="pre">provider.use_internal_ips</span></code><a class="headerlink" href="ray-cluster-configuration.html#provider-use-internal-ips" title="Permalink to this headline">#</a></h3>
<p>If enabled, Ray will use private IP addresses for communication between nodes.
This should be omitted if your network interfaces use public IP addresses.</p>
<p>If enabled, Ray CLI commands (e.g. <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">up</span></code>) will have to be run from a machine
that is part of the same VPC as the cluster.</p>
<p>This option does not affect the existence of public IP addresses for the nodes, it only
affects which IP addresses are used by Ray. The existence of public IP addresses is
controlled by your cloud provider’s configuration.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> Boolean</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
</ul>
</section>
<section id="provider-security-group">
<span id="cluster-configuration-security-group"></span><h3><code class="docutils literal notranslate"><span class="pre">provider.security_group</span></code><a class="headerlink" href="ray-cluster-configuration.html#provider-security-group" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-41" name="sd-tab-set-17" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-41">
AWS</label><div class="sd-tab-content docutils">
<p>A security group that can be used to specify custom inbound rules.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Medium</p></li>
<li><p><strong>Type:</strong> <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-security-group-type"><span class="std std-ref">Security Group</span></a></p></li>
</ul>
</div>
<input id="sd-tab-item-42" name="sd-tab-set-17" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-42">
Azure</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
<input id="sd-tab-item-43" name="sd-tab-set-17" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-43">
GCP</label><div class="sd-tab-content docutils">
<p>Not available.</p>
</div>
</div>
</section>
<section id="security-group-groupname">
<span id="cluster-configuration-group-name"></span><h3><code class="docutils literal notranslate"><span class="pre">security_group.GroupName</span></code><a class="headerlink" href="ray-cluster-configuration.html#security-group-groupname" title="Permalink to this headline">#</a></h3>
<p>The name of the security group. This name must be unique within the VPC.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">&quot;ray-autoscaler-{cluster-name}&quot;</span></code></p></li>
</ul>
</section>
<section id="security-group-ippermissions">
<span id="cluster-configuration-ip-permissions"></span><h3><code class="docutils literal notranslate"><span class="pre">security_group.IpPermissions</span></code><a class="headerlink" href="ray-cluster-configuration.html#security-group-ippermissions" title="Permalink to this headline">#</a></h3>
<p>The inbound rules associated with the security group.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Medium</p></li>
<li><p><strong>Type:</strong> <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_IpPermission.html">IpPermission</a></p></li>
</ul>
</section>
<section id="available-node-types-node-type-name-node-type-node-config">
<span id="cluster-configuration-node-config"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types.&lt;node_type_name&gt;.node_type.node_config</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-node-config" title="Permalink to this headline">#</a></h3>
<p>The configuration to be used to launch the nodes on the cloud service provider. Among other things, this will specify the instance type to be launched.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-config-type"><span class="std std-ref">Node config</span></a></p></li>
</ul>
</section>
<section id="available-node-types-node-type-name-node-type-resources">
<span id="cluster-configuration-resources"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types.&lt;node_type_name&gt;.node_type.resources</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources" title="Permalink to this headline">#</a></h3>
<p>The resources that a node type provides, which enables the autoscaler to automatically select the right type of nodes to launch given the resource demands of the application. The resources specified will be automatically passed to the <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span></code> command for the node via an environment variable. If not provided, Autoscaler can automatically detect them only for AWS/Kubernetes cloud providers. For more information, see also the <a class="reference external" href="https://github.com/ray-project/ray/blob/master/python/ray/autoscaler/_private/resource_demand_scheduler.py">resource demand scheduler</a></p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes (except for AWS/K8s)</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-resources-type"><span class="std std-ref">Resources</span></a></p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">{}</span></code></p></li>
</ul>
<p>In some cases, adding special nodes without any resources may be desirable. Such nodes can be used as a driver which connects to the cluster to launch jobs. In order to manually add a node to an autoscaled cluster, the <em>ray-cluster-name</em> tag should be set and <em>ray-node-type</em> tag should be set to unmanaged. Unmanaged nodes can be created by setting the resources to <code class="docutils literal notranslate"><span class="pre">{}</span></code> and the <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-min-workers"><span class="std std-ref">maximum workers</span></a> to 0. The Autoscaler will not attempt to start, stop, or update unmanaged nodes. The user is responsible for properly setting up and cleaning up unmanaged nodes.</p>
</section>
<section id="available-node-types-node-type-name-node-type-min-workers">
<span id="cluster-configuration-node-min-workers"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types.&lt;node_type_name&gt;.node_type.min_workers</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-min-workers" title="Permalink to this headline">#</a></h3>
<p>The minimum number of workers to maintain for this node type regardless of utilization.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>Minimum:</strong> <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>Maximum:</strong> Unbounded</p></li>
</ul>
</section>
<section id="available-node-types-node-type-name-node-type-max-workers">
<span id="cluster-configuration-node-max-workers"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types.&lt;node_type_name&gt;.node_type.max_workers</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-max-workers" title="Permalink to this headline">#</a></h3>
<p>The maximum number of workers to have in the cluster for this node type regardless of utilization. This takes precedence over <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-min-workers"><span class="std std-ref">minimum workers</span></a>. By default, the number of workers of a node type is unbounded, constrained only by the cluster-wide <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-max-workers"><span class="std std-ref">max_workers</span></a>. (Prior to Ray 1.3.0, the default value for this field was 0.)</p>
<p>Note, for the nodes of type <code class="docutils literal notranslate"><span class="pre">head_node_type</span></code> the default number of max workers is 0.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
<li><p><strong>Default:</strong> cluster-wide <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-max-workers"><span class="std std-ref">max_workers</span></a></p></li>
<li><p><strong>Minimum:</strong> <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>Maximum:</strong> cluster-wide <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-max-workers"><span class="std std-ref">max_workers</span></a></p></li>
</ul>
</section>
<section id="available-node-types-node-type-name-node-type-worker-setup-commands">
<span id="cluster-configuration-node-type-worker-setup-commands"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types.&lt;node_type_name&gt;.node_type.worker_setup_commands</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-worker-setup-commands" title="Permalink to this headline">#</a></h3>
<p>A list of commands to run to set up worker nodes of this type. These commands will replace the general <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-worker-setup-commands"><span class="std std-ref">worker setup commands</span></a> for the node.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> low</p></li>
<li><p><strong>Type:</strong> List of String</p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">[]</span></code></p></li>
</ul>
</section>
<section id="available-node-types-node-type-name-node-type-resources-cpu">
<span id="cluster-configuration-cpu"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types.&lt;node_type_name&gt;.node_type.resources.CPU</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-cpu" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-44" name="sd-tab-set-18" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-44">
AWS</label><div class="sd-tab-content docutils">
<p>The number of CPUs made available by this node. If not configured, Autoscaler can automatically detect them only for AWS/Kubernetes cloud providers.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes (except for AWS/K8s)</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
<input id="sd-tab-item-45" name="sd-tab-set-18" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-45">
Azure</label><div class="sd-tab-content docutils">
<p>The number of CPUs made available by this node.</p>
<ul class="simple">
<li><p><strong>Required:</strong> Yes</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
<input id="sd-tab-item-46" name="sd-tab-set-18" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-46">
GCP</label><div class="sd-tab-content docutils">
<p>The number of CPUs made available by this node.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
</div>
</section>
<section id="available-node-types-node-type-name-node-type-resources-gpu">
<span id="cluster-configuration-gpu"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types.&lt;node_type_name&gt;.node_type.resources.GPU</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-gpu" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-47" name="sd-tab-set-19" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-47">
AWS</label><div class="sd-tab-content docutils">
<p>The number of GPUs made available by this node. If not configured, Autoscaler can automatically detect them only for AWS/Kubernetes cloud providers.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
<input id="sd-tab-item-48" name="sd-tab-set-19" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-48">
Azure</label><div class="sd-tab-content docutils">
<p>The number of GPUs made available by this node.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
<input id="sd-tab-item-49" name="sd-tab-set-19" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-49">
GCP</label><div class="sd-tab-content docutils">
<p>The number of GPUs made available by this node.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
</div>
</section>
<section id="available-node-types-node-type-name-node-type-resources-memory">
<span id="cluster-configuration-memory"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types.&lt;node_type_name&gt;.node_type.resources.memory</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-memory" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-50" name="sd-tab-set-20" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-50">
AWS</label><div class="sd-tab-content docutils">
<p>The memory in bytes allocated for python worker heap memory on the node.
If not configured, Autoscaler will automatically detect the amount of RAM on
the node for AWS/Kubernetes and allocate 70% of it for the heap.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
<input id="sd-tab-item-51" name="sd-tab-set-20" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-51">
Azure</label><div class="sd-tab-content docutils">
<p>The memory in bytes allocated for python worker heap memory on the node.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
<input id="sd-tab-item-52" name="sd-tab-set-20" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-52">
GCP</label><div class="sd-tab-content docutils">
<p>The memory in bytes allocated for python worker heap memory on the node.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
</div>
</section>
<section id="available-node-types-node-type-name-node-type-resources-object-store-memory">
<span id="cluster-configuration-object-store-memory"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types.&lt;node_type_name&gt;.node_type.resources.object-store-memory</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types-node-type-name-node-type-resources-object-store-memory" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-53" name="sd-tab-set-21" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-53">
AWS</label><div class="sd-tab-content docutils">
<p>The memory in bytes allocated for the object store on the node. If not configured, Autoscaler will automatically detect the amount of RAM on the node for AWS/Kubernetes and allocate 30% of it for the object store.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
<input id="sd-tab-item-54" name="sd-tab-set-21" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-54">
Azure</label><div class="sd-tab-content docutils">
<p>The memory in bytes allocated for the object store on the node.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
<input id="sd-tab-item-55" name="sd-tab-set-21" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-55">
GCP</label><div class="sd-tab-content docutils">
<p>The memory in bytes allocated for the object store on the node.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> High</p></li>
<li><p><strong>Type:</strong> Integer</p></li>
</ul>
</div>
</div>
</section>
<section id="available-node-types-node-type-name-docker">
<span id="cluster-configuration-node-docker"></span><h3><code class="docutils literal notranslate"><span class="pre">available_node_types.&lt;node_type_name&gt;.docker</span></code><a class="headerlink" href="ray-cluster-configuration.html#available-node-types-node-type-name-docker" title="Permalink to this headline">#</a></h3>
<p>A set of overrides to the top-level <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-docker"><span class="std std-ref">Docker</span></a> configuration.</p>
<ul class="simple">
<li><p><strong>Required:</strong> No</p></li>
<li><p><strong>Importance:</strong> Low</p></li>
<li><p><strong>Type:</strong> <a class="reference internal" href="ray-cluster-configuration.html#cluster-configuration-node-docker-type"><span class="std std-ref">docker</span></a></p></li>
<li><p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">{}</span></code></p></li>
</ul>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="ray-cluster-configuration.html#examples" title="Permalink to this headline">#</a></h2>
<section id="minimal-configuration">
<h3>Minimal configuration<a class="headerlink" href="ray-cluster-configuration.html#minimal-configuration" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-56" name="sd-tab-set-22" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-56">
AWS</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># An unique identifier for the head node and workers of this cluster.</span><span class="w"></span>
<span class="nt">cluster_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-example-minimal</span><span class="w"></span>

<span class="c1"># Cloud-provider specific configuration.</span><span class="w"></span>
<span class="nt">provider</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws</span><span class="w"></span>
<span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-west-2</span><span class="w"></span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-57" name="sd-tab-set-22" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-57">
Azure</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># An unique identifier for the head node and workers of this cluster.</span><span class="w"></span>
<span class="nt">cluster_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">minimal</span><span class="w"></span>

<span class="c1"># The maximum number of workers nodes to launch in addition to the head</span><span class="w"></span>
<span class="c1"># node. min_workers default to 0.</span><span class="w"></span>
<span class="nt">max_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>

<span class="c1"># Cloud-provider specific configuration.</span><span class="w"></span>
<span class="nt">provider</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure</span><span class="w"></span>
<span class="w">    </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">westus2</span><span class="w"></span>
<span class="w">    </span><span class="nt">resource_group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray-cluster</span><span class="w"></span>

<span class="c1"># How Ray will authenticate with newly launched nodes.</span><span class="w"></span>
<span class="nt">auth</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ssh_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span><span class="w"></span>
<span class="w">    </span><span class="c1"># you must specify paths to matching private and public key pair files</span><span class="w"></span>
<span class="w">    </span><span class="c1"># use `ssh-keygen -t rsa -b 4096` to generate a new ssh key pair</span><span class="w"></span>
<span class="w">    </span><span class="nt">ssh_private_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~/.ssh/id_rsa</span><span class="w"></span>
<span class="w">    </span><span class="c1"># changes to this should match what is specified in file_mounts</span><span class="w"></span>
<span class="w">    </span><span class="nt">ssh_public_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~/.ssh/id_rsa.pub</span><span class="w"></span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-58" name="sd-tab-set-22" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-58">
GCP</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">auth</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">ssh_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span><span class="w"></span>
<span class="nt">cluster_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">minimal</span><span class="w"></span>
<span class="nt">provider</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">availability_zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-west1-a</span><span class="w"></span>
<span class="w">  </span><span class="nt">project_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class="w"> </span><span class="c1"># TODO: set your GCP project ID here</span><span class="w"></span>
<span class="w">  </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-west1</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcp</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="full-configuration">
<h3>Full configuration<a class="headerlink" href="ray-cluster-configuration.html#full-configuration" title="Permalink to this headline">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-59" name="sd-tab-set-23" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-59">
AWS</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># An unique identifier for the head node and workers of this cluster.</span><span class="w"></span>
<span class="nt">cluster_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>

<span class="c1"># The maximum number of workers nodes to launch in addition to the head</span><span class="w"></span>
<span class="c1"># node.</span><span class="w"></span>
<span class="nt">max_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>

<span class="c1"># The autoscaler will scale up the cluster faster with higher upscaling speed.</span><span class="w"></span>
<span class="c1"># E.g., if the task requires adding more nodes then autoscaler will gradually</span><span class="w"></span>
<span class="c1"># scale up the cluster in chunks of upscaling_speed*currently_running_nodes.</span><span class="w"></span>
<span class="c1"># This number should be &gt; 0.</span><span class="w"></span>
<span class="nt">upscaling_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span><span class="w"></span>

<span class="c1"># This executes all commands on all nodes in the docker container,</span><span class="w"></span>
<span class="c1"># and opens all the necessary ports to support the Ray cluster.</span><span class="w"></span>
<span class="c1"># Empty string means disabled.</span><span class="w"></span>
<span class="nt">docker</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rayproject/ray-ml:latest-gpu&quot;</span><span class="w"> </span><span class="c1"># You can change this to latest-cpu if you don&#39;t need GPU support and want a faster startup</span><span class="w"></span>
<span class="w">    </span><span class="c1"># image: rayproject/ray:latest-cpu   # use this one if you don&#39;t need ML dependencies, it&#39;s faster to pull</span><span class="w"></span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ray_container&quot;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># If true, pulls latest version of image. Otherwise, `docker run` will only pull the image</span><span class="w"></span>
<span class="w">    </span><span class="c1"># if no cached version is present.</span><span class="w"></span>
<span class="w">    </span><span class="nt">pull_before_run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span><span class="w"></span>
<span class="w">    </span><span class="nt">run_options</span><span class="p">:</span><span class="w">   </span><span class="c1"># Extra options to pass into &quot;docker run&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--ulimit nofile=65536:65536</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Example of running a GPU head with CPU workers</span><span class="w"></span>
<span class="w">    </span><span class="c1"># head_image: &quot;rayproject/ray-ml:latest-gpu&quot;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Allow Ray to automatically detect GPUs</span><span class="w"></span>

<span class="w">    </span><span class="c1"># worker_image: &quot;rayproject/ray-ml:latest-cpu&quot;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># worker_run_options: []</span><span class="w"></span>

<span class="c1"># If a node is idle for this many minutes, it will be removed.</span><span class="w"></span>
<span class="nt">idle_timeout_minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w"></span>

<span class="c1"># Cloud-provider specific configuration.</span><span class="w"></span>
<span class="nt">provider</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws</span><span class="w"></span>
<span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-west-2</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Availability zone(s), comma-separated, that nodes may be launched in.</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Nodes will be launched in the first listed availability zone and will</span><span class="w"></span>
<span class="w">    </span><span class="c1"># be tried in the subsequent availability zones if launching fails.</span><span class="w"></span>
<span class="w">    </span><span class="nt">availability_zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-west-2a,us-west-2b</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Whether to allow node reuse. If set to False, nodes will be terminated</span><span class="w"></span>
<span class="w">    </span><span class="c1"># instead of stopped.</span><span class="w"></span>
<span class="w">    </span><span class="nt">cache_stopped_nodes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span><span class="w"> </span><span class="c1"># If not present, the default is True.</span><span class="w"></span>

<span class="c1"># How Ray will authenticate with newly launched nodes.</span><span class="w"></span>
<span class="nt">auth</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ssh_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span><span class="w"></span>
<span class="c1"># By default Ray creates a new private keypair, but you can also use your own.</span><span class="w"></span>
<span class="c1"># If you do so, make sure to also set &quot;KeyName&quot; in the head and worker node</span><span class="w"></span>
<span class="c1"># configurations below.</span><span class="w"></span>
<span class="c1">#    ssh_private_key: /path/to/your/key.pem</span><span class="w"></span>

<span class="c1"># Tell the autoscaler the allowed node types and the resources they provide.</span><span class="w"></span>
<span class="c1"># The key is the name of the node type, which is just for debugging purposes.</span><span class="w"></span>
<span class="c1"># The node config specifies the launch config and physical instance type.</span><span class="w"></span>
<span class="nt">available_node_types</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ray.head.default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The node type&#39;s CPU and GPU resources are auto-detected based on AWS instance type.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># If desired, you can override the autodetected CPU and GPU resources advertised to the autoscaler.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># You can also set custom resources.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># For example, to mark a node type as having 1 CPU, 1 GPU, and 5 units of a resource called &quot;custom&quot;, set</span><span class="w"></span>
<span class="w">        </span><span class="c1"># resources: {&quot;CPU&quot;: 1, &quot;GPU&quot;: 1, &quot;custom&quot;: 5}</span><span class="w"></span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Provider-specific config for this node type, e.g. instance type. By default</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Ray will auto-configure unspecified fields such as SubnetId and KeyName.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># For more documentation on available fields, see:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># http://boto3.readthedocs.io/en/latest/reference/services/ec2.html#EC2.ServiceResource.create_instances</span><span class="w"></span>
<span class="w">        </span><span class="nt">node_config</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">InstanceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">m5.large</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Default AMI for us-west-2.</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Check https://github.com/ray-project/ray/blob/master/python/ray/autoscaler/_private/aws/config.py</span><span class="w"></span>
<span class="w">            </span><span class="c1"># for default images for other zones.</span><span class="w"></span>
<span class="w">            </span><span class="nt">ImageId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ami-0387d929287ab193e</span><span class="w"></span>
<span class="w">            </span><span class="c1"># You can provision additional disk space with a conf as follows</span><span class="w"></span>
<span class="w">            </span><span class="nt">BlockDeviceMappings</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">DeviceName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/dev/sda1</span><span class="w"></span>
<span class="w">                  </span><span class="nt">Ebs</span><span class="p">:</span><span class="w"></span>
<span class="w">                      </span><span class="nt">VolumeSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">140</span><span class="w"></span>
<span class="w">                      </span><span class="nt">VolumeType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gp3</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Additional options in the boto docs.</span><span class="w"></span>
<span class="w">    </span><span class="nt">ray.worker.default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The minimum number of worker nodes of this type to launch.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># This number should be &gt;= 0.</span><span class="w"></span>
<span class="w">        </span><span class="nt">min_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The maximum number of worker nodes of this type to launch.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># This takes precedence over min_workers.</span><span class="w"></span>
<span class="w">        </span><span class="nt">max_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The node type&#39;s CPU and GPU resources are auto-detected based on AWS instance type.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># If desired, you can override the autodetected CPU and GPU resources advertised to the autoscaler.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># You can also set custom resources.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># For example, to mark a node type as having 1 CPU, 1 GPU, and 5 units of a resource called &quot;custom&quot;, set</span><span class="w"></span>
<span class="w">        </span><span class="c1"># resources: {&quot;CPU&quot;: 1, &quot;GPU&quot;: 1, &quot;custom&quot;: 5}</span><span class="w"></span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Provider-specific config for this node type, e.g. instance type. By default</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Ray will auto-configure unspecified fields such as SubnetId and KeyName.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># For more documentation on available fields, see:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># http://boto3.readthedocs.io/en/latest/reference/services/ec2.html#EC2.ServiceResource.create_instances</span><span class="w"></span>
<span class="w">        </span><span class="nt">node_config</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">InstanceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">m5.large</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Default AMI for us-west-2.</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Check https://github.com/ray-project/ray/blob/master/python/ray/autoscaler/_private/aws/config.py</span><span class="w"></span>
<span class="w">            </span><span class="c1"># for default images for other zones.</span><span class="w"></span>
<span class="w">            </span><span class="nt">ImageId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ami-0387d929287ab193e</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Run workers on spot by default. Comment this out to use on-demand.</span><span class="w"></span>
<span class="w">            </span><span class="c1"># NOTE: If relying on spot instances, it is best to specify multiple different instance</span><span class="w"></span>
<span class="w">            </span><span class="c1"># types to avoid interruption when one instance type is experiencing heightened demand.</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Demand information can be found at https://aws.amazon.com/ec2/spot/instance-advisor/</span><span class="w"></span>
<span class="w">            </span><span class="nt">InstanceMarketOptions</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="nt">MarketType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spot</span><span class="w"></span>
<span class="w">                </span><span class="c1"># Additional options can be found in the boto docs, e.g.</span><span class="w"></span>
<span class="w">                </span><span class="c1">#   SpotOptions:</span><span class="w"></span>
<span class="w">                </span><span class="c1">#       MaxPrice: MAX_HOURLY_PRICE</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Additional options in the boto docs.</span><span class="w"></span>

<span class="c1"># Specify the node type of the head node (as configured above).</span><span class="w"></span>
<span class="nt">head_node_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray.head.default</span><span class="w"></span>

<span class="c1"># Files or directories to copy to the head and worker nodes. The format is a</span><span class="w"></span>
<span class="c1"># dictionary from REMOTE_PATH: LOCAL_PATH, e.g.</span><span class="w"></span>
<span class="nt">file_mounts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="c1">#    &quot;/path1/on/remote/machine&quot;: &quot;/path1/on/local/machine&quot;,</span><span class="w"></span>
<span class="c1">#    &quot;/path2/on/remote/machine&quot;: &quot;/path2/on/local/machine&quot;,</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>

<span class="c1"># Files or directories to copy from the head node to the worker nodes. The format is a</span><span class="w"></span>
<span class="c1"># list of paths. The same path on the head node will be copied to the worker node.</span><span class="w"></span>
<span class="c1"># This behavior is a subset of the file_mounts behavior. In the vast majority of cases</span><span class="w"></span>
<span class="c1"># you should just use file_mounts. Only use this if you know what you&#39;re doing!</span><span class="w"></span>
<span class="nt">cluster_synced_files</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>

<span class="c1"># Whether changes to directories in file_mounts or cluster_synced_files in the head node</span><span class="w"></span>
<span class="c1"># should sync to the worker node continuously</span><span class="w"></span>
<span class="nt">file_mounts_sync_continuously</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span><span class="w"></span>

<span class="c1"># Patterns for files to exclude when running rsync up or rsync down</span><span class="w"></span>
<span class="nt">rsync_exclude</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;**/.git&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;**/.git/**&quot;</span><span class="w"></span>

<span class="c1"># Pattern files to use for filtering out files when running rsync up or rsync down. The file is searched for</span><span class="w"></span>
<span class="c1"># in the source directory and recursively through all subdirectories. For example, if .gitignore is provided</span><span class="w"></span>
<span class="c1"># as a value, the behavior will match git&#39;s behavior for finding and using .gitignore files.</span><span class="w"></span>
<span class="nt">rsync_filter</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;.gitignore&quot;</span><span class="w"></span>

<span class="c1"># List of commands that will be run before `setup_commands`. If docker is</span><span class="w"></span>
<span class="c1"># enabled, these commands will run outside the container and before docker</span><span class="w"></span>
<span class="c1"># is setup.</span><span class="w"></span>
<span class="nt">initialization_commands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>

<span class="c1"># List of shell commands to run to set up nodes.</span><span class="w"></span>
<span class="nt">setup_commands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Note: if you&#39;re developing Ray, you probably want to create a Docker image that</span><span class="w"></span>
<span class="w">    </span><span class="c1"># has your Ray repo pre-cloned. Then, you can replace the pip installs</span><span class="w"></span>
<span class="w">    </span><span class="c1"># below with a git checkout &lt;your_sha&gt; (and possibly a recompile).</span><span class="w"></span>
<span class="w">    </span><span class="c1"># To run the nightly version of ray (as opposed to the latest), either use a rayproject docker image</span><span class="w"></span>
<span class="w">    </span><span class="c1"># that has the &quot;nightly&quot; (e.g. &quot;rayproject/ray-ml:nightly-gpu&quot;) or uncomment the following line:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># - pip install -U &quot;ray[default] @ https://s3-us-west-2.amazonaws.com/ray-wheels/latest/ray-3.0.0.dev0-cp37-cp37m-manylinux2014_x86_64.whl&quot;</span><span class="w"></span>

<span class="c1"># Custom commands that will be run on the head node after common setup.</span><span class="w"></span>
<span class="nt">head_setup_commands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>

<span class="c1"># Custom commands that will be run on worker nodes after common setup.</span><span class="w"></span>
<span class="nt">worker_setup_commands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>

<span class="c1"># Command to start ray on the head node. You don&#39;t need to change this.</span><span class="w"></span>
<span class="nt">head_start_ray_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray stop</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray start --head --port=6379 --object-manager-port=8076 --autoscaling-config=~/ray_bootstrap_config.yaml --dashboard-host=0.0.0.0</span><span class="w"></span>

<span class="c1"># Command to start ray on worker nodes. You don&#39;t need to change this.</span><span class="w"></span>
<span class="nt">worker_start_ray_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray stop</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray start --address=$RAY_HEAD_IP:6379 --object-manager-port=8076</span><span class="w"></span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-60" name="sd-tab-set-23" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-60">
Azure</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># An unique identifier for the head node and workers of this cluster.</span><span class="w"></span>
<span class="nt">cluster_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>

<span class="c1"># The maximum number of workers nodes to launch in addition to the head</span><span class="w"></span>
<span class="c1"># node.</span><span class="w"></span>
<span class="nt">max_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>

<span class="c1"># The autoscaler will scale up the cluster faster with higher upscaling speed.</span><span class="w"></span>
<span class="c1"># E.g., if the task requires adding more nodes then autoscaler will gradually</span><span class="w"></span>
<span class="c1"># scale up the cluster in chunks of upscaling_speed*currently_running_nodes.</span><span class="w"></span>
<span class="c1"># This number should be &gt; 0.</span><span class="w"></span>
<span class="nt">upscaling_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span><span class="w"></span>

<span class="c1"># This executes all commands on all nodes in the docker container,</span><span class="w"></span>
<span class="c1"># and opens all the necessary ports to support the Ray cluster.</span><span class="w"></span>
<span class="c1"># Empty object means disabled.</span><span class="w"></span>
<span class="nt">docker</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rayproject/ray-ml:latest-gpu&quot;</span><span class="w"> </span><span class="c1"># You can change this to latest-cpu if you don&#39;t need GPU support and want a faster startup</span><span class="w"></span>
<span class="w">    </span><span class="c1"># image: rayproject/ray:latest-gpu   # use this one if you don&#39;t need ML dependencies, it&#39;s faster to pull</span><span class="w"></span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ray_container&quot;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># If true, pulls latest version of image. Otherwise, `docker run` will only pull the image</span><span class="w"></span>
<span class="w">    </span><span class="c1"># if no cached version is present.</span><span class="w"></span>
<span class="w">    </span><span class="nt">pull_before_run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span><span class="w"></span>
<span class="w">    </span><span class="nt">run_options</span><span class="p">:</span><span class="w">   </span><span class="c1"># Extra options to pass into &quot;docker run&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--ulimit nofile=65536:65536</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Example of running a GPU head with CPU workers</span><span class="w"></span>
<span class="w">    </span><span class="c1"># head_image: &quot;rayproject/ray-ml:latest-gpu&quot;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Allow Ray to automatically detect GPUs</span><span class="w"></span>

<span class="w">    </span><span class="c1"># worker_image: &quot;rayproject/ray-ml:latest-cpu&quot;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># worker_run_options: []</span><span class="w"></span>

<span class="c1"># If a node is idle for this many minutes, it will be removed.</span><span class="w"></span>
<span class="nt">idle_timeout_minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w"></span>

<span class="c1"># Cloud-provider specific configuration.</span><span class="w"></span>
<span class="nt">provider</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure</span><span class="w"></span>
<span class="w">    </span><span class="c1"># https://azure.microsoft.com/en-us/global-infrastructure/locations</span><span class="w"></span>
<span class="w">    </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">westus2</span><span class="w"></span>
<span class="w">    </span><span class="nt">resource_group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray-cluster</span><span class="w"></span>
<span class="w">    </span><span class="c1"># set subscription id otherwise the default from az cli will be used</span><span class="w"></span>
<span class="w">    </span><span class="c1"># subscription_id: 00000000-0000-0000-0000-000000000000</span><span class="w"></span>
<span class="w">    </span><span class="c1"># set unique subnet mask or a random mask will be used</span><span class="w"></span>
<span class="w">    </span><span class="c1"># subnet_mask: 10.0.0.0/16</span><span class="w"></span>
<span class="w">    </span><span class="c1"># set unique id for resources in this cluster</span><span class="w"></span>
<span class="w">    </span><span class="c1"># if not set a default id will be generated based on the resource group and cluster name</span><span class="w"></span>
<span class="w">    </span><span class="c1"># unique_id: RAY1</span><span class="w"></span>

<span class="c1"># How Ray will authenticate with newly launched nodes.</span><span class="w"></span>
<span class="nt">auth</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ssh_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span><span class="w"></span>
<span class="w">    </span><span class="c1"># you must specify paths to matching private and public key pair files</span><span class="w"></span>
<span class="w">    </span><span class="c1"># use `ssh-keygen -t rsa -b 4096` to generate a new ssh key pair</span><span class="w"></span>
<span class="w">    </span><span class="nt">ssh_private_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~/.ssh/id_rsa</span><span class="w"></span>
<span class="w">    </span><span class="c1"># changes to this should match what is specified in file_mounts</span><span class="w"></span>
<span class="w">    </span><span class="nt">ssh_public_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~/.ssh/id_rsa.pub</span><span class="w"></span>

<span class="c1"># More specific customization to node configurations can be made using the ARM template azure-vm-template.json file</span><span class="w"></span>
<span class="c1"># See documentation here: https://docs.microsoft.com/en-us/azure/templates/microsoft.compute/2019-03-01/virtualmachines</span><span class="w"></span>
<span class="c1"># Changes to the local file will be used during deployment of the head node, however worker nodes deployment occurs</span><span class="w"></span>
<span class="c1"># on the head node, so changes to the template must be included in the wheel file used in setup_commands section below</span><span class="w"></span>

<span class="c1"># Tell the autoscaler the allowed node types and the resources they provide.</span><span class="w"></span>
<span class="c1"># The key is the name of the node type, which is just for debugging purposes.</span><span class="w"></span>
<span class="c1"># The node config specifies the launch config and physical instance type.</span><span class="w"></span>
<span class="nt">available_node_types</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ray.head.default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The resources provided by this node type.</span><span class="w"></span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;CPU&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Provider-specific config, e.g. instance type.</span><span class="w"></span>
<span class="w">        </span><span class="nt">node_config</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">azure_arm_parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="nt">vmSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard_D2s_v3</span><span class="w"></span>
<span class="w">                </span><span class="c1"># List images https://docs.microsoft.com/en-us/azure/virtual-machines/linux/cli-ps-findimage</span><span class="w"></span>
<span class="w">                </span><span class="nt">imagePublisher</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">microsoft-dsvm</span><span class="w"></span>
<span class="w">                </span><span class="nt">imageOffer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-1804</span><span class="w"></span>
<span class="w">                </span><span class="nt">imageSku</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1804-gen2</span><span class="w"></span>
<span class="w">                </span><span class="nt">imageVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">latest</span><span class="w"></span>

<span class="w">    </span><span class="nt">ray.worker.default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The minimum number of worker nodes of this type to launch.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># This number should be &gt;= 0.</span><span class="w"></span>
<span class="w">        </span><span class="nt">min_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The maximum number of worker nodes of this type to launch.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># This takes precedence over min_workers.</span><span class="w"></span>
<span class="w">        </span><span class="nt">max_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The resources provided by this node type.</span><span class="w"></span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;CPU&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Provider-specific config, e.g. instance type.</span><span class="w"></span>
<span class="w">        </span><span class="nt">node_config</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">azure_arm_parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="nt">vmSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard_D2s_v3</span><span class="w"></span>
<span class="w">                </span><span class="c1"># List images https://docs.microsoft.com/en-us/azure/virtual-machines/linux/cli-ps-findimage</span><span class="w"></span>
<span class="w">                </span><span class="nt">imagePublisher</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">microsoft-dsvm</span><span class="w"></span>
<span class="w">                </span><span class="nt">imageOffer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-1804</span><span class="w"></span>
<span class="w">                </span><span class="nt">imageSku</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1804-gen2</span><span class="w"></span>
<span class="w">                </span><span class="nt">imageVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">latest</span><span class="w"></span>
<span class="w">                </span><span class="c1"># optionally set priority to use Spot instances</span><span class="w"></span>
<span class="w">                </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Spot</span><span class="w"></span>
<span class="w">                </span><span class="c1"># set a maximum price for spot instances if desired</span><span class="w"></span>
<span class="w">                </span><span class="c1"># billingProfile:</span><span class="w"></span>
<span class="w">                </span><span class="c1">#     maxPrice: -1</span><span class="w"></span>

<span class="c1"># Specify the node type of the head node (as configured above).</span><span class="w"></span>
<span class="nt">head_node_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray.head.default</span><span class="w"></span>

<span class="c1"># Files or directories to copy to the head and worker nodes. The format is a</span><span class="w"></span>
<span class="c1"># dictionary from REMOTE_PATH: LOCAL_PATH, e.g.</span><span class="w"></span>
<span class="nt">file_mounts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="c1">#    &quot;/path1/on/remote/machine&quot;: &quot;/path1/on/local/machine&quot;,</span><span class="w"></span>
<span class="c1">#    &quot;/path2/on/remote/machine&quot;: &quot;/path2/on/local/machine&quot;,</span><span class="w"></span>
<span class="w">     </span><span class="s">&quot;~/.ssh/id_rsa.pub&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;~/.ssh/id_rsa.pub&quot;</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>

<span class="c1"># Files or directories to copy from the head node to the worker nodes. The format is a</span><span class="w"></span>
<span class="c1"># list of paths. The same path on the head node will be copied to the worker node.</span><span class="w"></span>
<span class="c1"># This behavior is a subset of the file_mounts behavior. In the vast majority of cases</span><span class="w"></span>
<span class="c1"># you should just use file_mounts. Only use this if you know what you&#39;re doing!</span><span class="w"></span>
<span class="nt">cluster_synced_files</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>

<span class="c1"># Whether changes to directories in file_mounts or cluster_synced_files in the head node</span><span class="w"></span>
<span class="c1"># should sync to the worker node continuously</span><span class="w"></span>
<span class="nt">file_mounts_sync_continuously</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span><span class="w"></span>

<span class="c1"># Patterns for files to exclude when running rsync up or rsync down</span><span class="w"></span>
<span class="nt">rsync_exclude</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;**/.git&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;**/.git/**&quot;</span><span class="w"></span>

<span class="c1"># Pattern files to use for filtering out files when running rsync up or rsync down. The file is searched for</span><span class="w"></span>
<span class="c1"># in the source directory and recursively through all subdirectories. For example, if .gitignore is provided</span><span class="w"></span>
<span class="c1"># as a value, the behavior will match git&#39;s behavior for finding and using .gitignore files.</span><span class="w"></span>
<span class="nt">rsync_filter</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;.gitignore&quot;</span><span class="w"></span>

<span class="c1"># List of commands that will be run before `setup_commands`. If docker is</span><span class="w"></span>
<span class="c1"># enabled, these commands will run outside the container and before docker</span><span class="w"></span>
<span class="c1"># is setup.</span><span class="w"></span>
<span class="nt">initialization_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># enable docker setup</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo usermod -aG docker $USER || true</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sleep 10</span><span class="w">  </span><span class="c1"># delay to avoid docker permission denied errors</span><span class="w"></span>
<span class="w">    </span><span class="c1"># get rid of annoying Ubuntu message</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">touch ~/.sudo_as_admin_successful</span><span class="w"></span>

<span class="c1"># List of shell commands to run to set up nodes.</span><span class="w"></span>
<span class="c1"># NOTE: rayproject/ray-ml:latest has ray latest bundled</span><span class="w"></span>
<span class="nt">setup_commands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Note: if you&#39;re developing Ray, you probably want to create a Docker image that</span><span class="w"></span>
<span class="w">    </span><span class="c1"># has your Ray repo pre-cloned. Then, you can replace the pip installs</span><span class="w"></span>
<span class="w">    </span><span class="c1"># below with a git checkout &lt;your_sha&gt; (and possibly a recompile).</span><span class="w"></span>
<span class="w">    </span><span class="c1"># To run the nightly version of ray (as opposed to the latest), either use a rayproject docker image</span><span class="w"></span>
<span class="w">    </span><span class="c1"># that has the &quot;nightly&quot; (e.g. &quot;rayproject/ray-ml:nightly-gpu&quot;) or uncomment the following line:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># - pip install -U &quot;ray[default] @ https://s3-us-west-2.amazonaws.com/ray-wheels/latest/ray-3.0.0.dev0-cp38-cp38-manylinux2014_x86_64.whl&quot;</span><span class="w"></span>

<span class="c1"># Custom commands that will be run on the head node after common setup.</span><span class="w"></span>
<span class="c1"># NOTE: rayproject/ray-ml:latest has azure packages bundled</span><span class="w"></span>
<span class="nt">head_setup_commands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>
<span class="w">    </span><span class="c1"># - pip install -U azure-cli-core==2.22.0 azure-mgmt-compute==14.0.0 azure-mgmt-msi==1.0.0 azure-mgmt-network==10.2.0 azure-mgmt-resource==13.0.0</span><span class="w"></span>

<span class="c1"># Custom commands that will be run on worker nodes after common setup.</span><span class="w"></span>
<span class="nt">worker_setup_commands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>

<span class="c1"># Command to start ray on the head node. You don&#39;t need to change this.</span><span class="w"></span>
<span class="nt">head_start_ray_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray stop</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray start --head --port=6379 --object-manager-port=8076 --autoscaling-config=~/ray_bootstrap_config.yaml</span><span class="w"></span>

<span class="c1"># Command to start ray on worker nodes. You don&#39;t need to change this.</span><span class="w"></span>
<span class="nt">worker_start_ray_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray stop</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray start --address=$RAY_HEAD_IP:6379 --object-manager-port=8076</span><span class="w"></span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-61" name="sd-tab-set-23" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-61">
GCP</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># An unique identifier for the head node and workers of this cluster.</span><span class="w"></span>
<span class="nt">cluster_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>

<span class="c1"># The maximum number of workers nodes to launch in addition to the head</span><span class="w"></span>
<span class="c1"># node.</span><span class="w"></span>
<span class="nt">max_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>

<span class="c1"># The autoscaler will scale up the cluster faster with higher upscaling speed.</span><span class="w"></span>
<span class="c1"># E.g., if the task requires adding more nodes then autoscaler will gradually</span><span class="w"></span>
<span class="c1"># scale up the cluster in chunks of upscaling_speed*currently_running_nodes.</span><span class="w"></span>
<span class="c1"># This number should be &gt; 0.</span><span class="w"></span>
<span class="nt">upscaling_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span><span class="w"></span>

<span class="c1"># This executes all commands on all nodes in the docker container,</span><span class="w"></span>
<span class="c1"># and opens all the necessary ports to support the Ray cluster.</span><span class="w"></span>
<span class="c1"># Empty string means disabled.</span><span class="w"></span>
<span class="nt">docker</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;rayproject/ray-ml:latest-gpu&quot;</span><span class="w"> </span><span class="c1"># You can change this to latest-cpu if you don&#39;t need GPU support and want a faster startup</span><span class="w"></span>
<span class="w">    </span><span class="c1"># image: rayproject/ray:latest-gpu   # use this one if you don&#39;t need ML dependencies, it&#39;s faster to pull</span><span class="w"></span>
<span class="w">  </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ray_container&quot;</span><span class="w"></span>
<span class="w">  </span><span class="c1"># If true, pulls latest version of image. Otherwise, `docker run` will only pull the image</span><span class="w"></span>
<span class="w">  </span><span class="c1"># if no cached version is present.</span><span class="w"></span>
<span class="w">  </span><span class="nt">pull_before_run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span><span class="w"></span>
<span class="w">  </span><span class="nt">run_options</span><span class="p">:</span><span class="w">  </span><span class="c1"># Extra options to pass into &quot;docker run&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--ulimit nofile=65536:65536</span><span class="w"></span>

<span class="w">  </span><span class="c1"># Example of running a GPU head with CPU workers</span><span class="w"></span>
<span class="w">  </span><span class="c1"># head_image: &quot;rayproject/ray-ml:latest-gpu&quot;</span><span class="w"></span>
<span class="w">  </span><span class="c1"># Allow Ray to automatically detect GPUs</span><span class="w"></span>

<span class="w">  </span><span class="c1"># worker_image: &quot;rayproject/ray-ml:latest-cpu&quot;</span><span class="w"></span>
<span class="w">  </span><span class="c1"># worker_run_options: []</span><span class="w"></span>

<span class="c1"># If a node is idle for this many minutes, it will be removed.</span><span class="w"></span>
<span class="nt">idle_timeout_minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w"></span>

<span class="c1"># Cloud-provider specific configuration.</span><span class="w"></span>
<span class="nt">provider</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcp</span><span class="w"></span>
<span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-west1</span><span class="w"></span>
<span class="w">    </span><span class="nt">availability_zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-west1-a</span><span class="w"></span>
<span class="w">    </span><span class="nt">project_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class="w"> </span><span class="c1"># Globally unique project id</span><span class="w"></span>

<span class="c1"># How Ray will authenticate with newly launched nodes.</span><span class="w"></span>
<span class="nt">auth</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ssh_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span><span class="w"></span>
<span class="c1"># By default Ray creates a new private keypair, but you can also use your own.</span><span class="w"></span>
<span class="c1"># If you do so, make sure to also set &quot;KeyName&quot; in the head and worker node</span><span class="w"></span>
<span class="c1"># configurations below. This requires that you have added the key into the</span><span class="w"></span>
<span class="c1"># project wide meta-data.</span><span class="w"></span>
<span class="c1">#    ssh_private_key: /path/to/your/key.pem</span><span class="w"></span>

<span class="c1"># Tell the autoscaler the allowed node types and the resources they provide.</span><span class="w"></span>
<span class="c1"># The key is the name of the node type, which is just for debugging purposes.</span><span class="w"></span>
<span class="c1"># The node config specifies the launch config and physical instance type.</span><span class="w"></span>
<span class="nt">available_node_types</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ray_head_default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The resources provided by this node type.</span><span class="w"></span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;CPU&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Provider-specific config for the head node, e.g. instance type. By default</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Ray will auto-configure unspecified fields such as subnets and ssh-keys.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># For more documentation on available fields, see:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># https://cloud.google.com/compute/docs/reference/rest/v1/instances/insert</span><span class="w"></span>
<span class="w">        </span><span class="nt">node_config</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">machineType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">n1-standard-2</span><span class="w"></span>
<span class="w">            </span><span class="nt">disks</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">boot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">                </span><span class="nt">autoDelete</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PERSISTENT</span><span class="w"></span>
<span class="w">                </span><span class="nt">initializeParams</span><span class="p">:</span><span class="w"></span>
<span class="w">                  </span><span class="nt">diskSizeGb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span><span class="w"></span>
<span class="w">                  </span><span class="c1"># See https://cloud.google.com/compute/docs/images for more images</span><span class="w"></span>
<span class="w">                  </span><span class="nt">sourceImage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">projects/deeplearning-platform-release/global/images/family/common-cpu</span><span class="w"></span>

<span class="w">            </span><span class="c1"># Additional options can be found in in the compute docs at</span><span class="w"></span>
<span class="w">            </span><span class="c1"># https://cloud.google.com/compute/docs/reference/rest/v1/instances/insert</span><span class="w"></span>

<span class="w">            </span><span class="c1"># If the network interface is specified as below in both head and worker</span><span class="w"></span>
<span class="w">            </span><span class="c1"># nodes, the manual network config is used.  Otherwise an existing subnet is</span><span class="w"></span>
<span class="w">            </span><span class="c1"># used.  To use a shared subnet, ask the subnet owner to grant permission</span><span class="w"></span>
<span class="w">            </span><span class="c1"># for &#39;compute.subnetworks.use&#39; to the ray autoscaler account...</span><span class="w"></span>
<span class="w">            </span><span class="c1"># networkInterfaces:</span><span class="w"></span>
<span class="w">            </span><span class="c1">#   - kind: compute#networkInterface</span><span class="w"></span>
<span class="w">            </span><span class="c1">#     subnetwork: path/to/subnet</span><span class="w"></span>
<span class="w">            </span><span class="c1">#     aliasIpRanges: []</span><span class="w"></span>
<span class="w">    </span><span class="nt">ray_worker_small</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The minimum number of worker nodes of this type to launch.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># This number should be &gt;= 0.</span><span class="w"></span>
<span class="w">        </span><span class="nt">min_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The maximum number of worker nodes of this type to launch.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># This takes precedence over min_workers.</span><span class="w"></span>
<span class="w">        </span><span class="nt">max_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="w">        </span><span class="c1"># The resources provided by this node type.</span><span class="w"></span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;CPU&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Provider-specific config for the head node, e.g. instance type. By default</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Ray will auto-configure unspecified fields such as subnets and ssh-keys.</span><span class="w"></span>
<span class="w">        </span><span class="c1"># For more documentation on available fields, see:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># https://cloud.google.com/compute/docs/reference/rest/v1/instances/insert</span><span class="w"></span>
<span class="w">        </span><span class="nt">node_config</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">machineType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">n1-standard-2</span><span class="w"></span>
<span class="w">            </span><span class="nt">disks</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">boot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">                </span><span class="nt">autoDelete</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PERSISTENT</span><span class="w"></span>
<span class="w">                </span><span class="nt">initializeParams</span><span class="p">:</span><span class="w"></span>
<span class="w">                  </span><span class="nt">diskSizeGb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span><span class="w"></span>
<span class="w">                  </span><span class="c1"># See https://cloud.google.com/compute/docs/images for more images</span><span class="w"></span>
<span class="w">                  </span><span class="nt">sourceImage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">projects/deeplearning-platform-release/global/images/family/common-cpu</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Run workers on preemtible instance by default.</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Comment this out to use on-demand.</span><span class="w"></span>
<span class="w">            </span><span class="nt">scheduling</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">preemptible</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Un-Comment this to launch workers with the Service Account of the Head Node</span><span class="w"></span>
<span class="w">            </span><span class="c1"># serviceAccounts:</span><span class="w"></span>
<span class="w">            </span><span class="c1"># - email: ray-autoscaler-sa-v1@&lt;project_id&gt;.iam.gserviceaccount.com</span><span class="w"></span>
<span class="w">            </span><span class="c1">#   scopes:</span><span class="w"></span>
<span class="w">            </span><span class="c1">#   - https://www.googleapis.com/auth/cloud-platform</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Additional options can be found in in the compute docs at</span><span class="w"></span>
<span class="w">    </span><span class="c1"># https://cloud.google.com/compute/docs/reference/rest/v1/instances/insert</span><span class="w"></span>

<span class="c1"># Specify the node type of the head node (as configured above).</span><span class="w"></span>
<span class="nt">head_node_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray_head_default</span><span class="w"></span>

<span class="c1"># Files or directories to copy to the head and worker nodes. The format is a</span><span class="w"></span>
<span class="c1"># dictionary from REMOTE_PATH: LOCAL_PATH, e.g.</span><span class="w"></span>
<span class="nt">file_mounts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="c1">#    &quot;/path1/on/remote/machine&quot;: &quot;/path1/on/local/machine&quot;,</span><span class="w"></span>
<span class="c1">#    &quot;/path2/on/remote/machine&quot;: &quot;/path2/on/local/machine&quot;,</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>

<span class="c1"># Files or directories to copy from the head node to the worker nodes. The format is a</span><span class="w"></span>
<span class="c1"># list of paths. The same path on the head node will be copied to the worker node.</span><span class="w"></span>
<span class="c1"># This behavior is a subset of the file_mounts behavior. In the vast majority of cases</span><span class="w"></span>
<span class="c1"># you should just use file_mounts. Only use this if you know what you&#39;re doing!</span><span class="w"></span>
<span class="nt">cluster_synced_files</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>

<span class="c1"># Whether changes to directories in file_mounts or cluster_synced_files in the head node</span><span class="w"></span>
<span class="c1"># should sync to the worker node continuously</span><span class="w"></span>
<span class="nt">file_mounts_sync_continuously</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span><span class="w"></span>

<span class="c1"># Patterns for files to exclude when running rsync up or rsync down</span><span class="w"></span>
<span class="nt">rsync_exclude</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;**/.git&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;**/.git/**&quot;</span><span class="w"></span>

<span class="c1"># Pattern files to use for filtering out files when running rsync up or rsync down. The file is searched for</span><span class="w"></span>
<span class="c1"># in the source directory and recursively through all subdirectories. For example, if .gitignore is provided</span><span class="w"></span>
<span class="c1"># as a value, the behavior will match git&#39;s behavior for finding and using .gitignore files.</span><span class="w"></span>
<span class="nt">rsync_filter</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;.gitignore&quot;</span><span class="w"></span>

<span class="c1"># List of commands that will be run before `setup_commands`. If docker is</span><span class="w"></span>
<span class="c1"># enabled, these commands will run outside the container and before docker</span><span class="w"></span>
<span class="c1"># is setup.</span><span class="w"></span>
<span class="nt">initialization_commands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>

<span class="c1"># List of shell commands to run to set up nodes.</span><span class="w"></span>
<span class="nt">setup_commands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Note: if you&#39;re developing Ray, you probably want to create a Docker image that</span><span class="w"></span>
<span class="w">    </span><span class="c1"># has your Ray repo pre-cloned. Then, you can replace the pip installs</span><span class="w"></span>
<span class="w">    </span><span class="c1"># below with a git checkout &lt;your_sha&gt; (and possibly a recompile).</span><span class="w"></span>
<span class="w">    </span><span class="c1"># To run the nightly version of ray (as opposed to the latest), either use a rayproject docker image</span><span class="w"></span>
<span class="w">    </span><span class="c1"># that has the &quot;nightly&quot; (e.g. &quot;rayproject/ray-ml:nightly-gpu&quot;) or uncomment the following line:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># - pip install -U &quot;ray[default] @ https://s3-us-west-2.amazonaws.com/ray-wheels/latest/ray-3.0.0.dev0-cp37-cp37m-manylinux2014_x86_64.whl&quot;</span><span class="w"></span>


<span class="c1"># Custom commands that will be run on the head node after common setup.</span><span class="w"></span>
<span class="nt">head_setup_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip install google-api-python-client==1.7.8</span><span class="w"></span>

<span class="c1"># Custom commands that will be run on worker nodes after common setup.</span><span class="w"></span>
<span class="nt">worker_setup_commands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>

<span class="c1"># Command to start ray on the head node. You don&#39;t need to change this.</span><span class="w"></span>
<span class="nt">head_start_ray_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray stop</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span><span class="w"></span>
<span class="w">      </span><span class="no">ray start</span><span class="w"></span>
<span class="w">      </span><span class="no">--head</span><span class="w"></span>
<span class="w">      </span><span class="no">--port=6379</span><span class="w"></span>
<span class="w">      </span><span class="no">--object-manager-port=8076</span><span class="w"></span>
<span class="w">      </span><span class="no">--autoscaling-config=~/ray_bootstrap_config.yaml</span><span class="w"></span>

<span class="c1"># Command to start ray on worker nodes. You don&#39;t need to change this.</span><span class="w"></span>
<span class="nt">worker_start_ray_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray stop</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span><span class="w"></span>
<span class="w">      </span><span class="no">ray start</span><span class="w"></span>
<span class="w">      </span><span class="no">--address=$RAY_HEAD_IP:6379</span><span class="w"></span>
<span class="w">      </span><span class="no">--object-manager-port=8076</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="tpu-configuration">
<h3>TPU Configuration<a class="headerlink" href="ray-cluster-configuration.html#tpu-configuration" title="Permalink to this headline">#</a></h3>
<p>It is possible to use <a class="reference external" href="https://cloud.google.com/tpu/docs/users-guide-tpu-vm">TPU VMs</a> on GCP. Currently, <a class="reference external" href="https://cloud.google.com/tpu/docs/system-architecture-tpu-vm#pods">TPU pods</a> (TPUs other than v2-8, v3-8 and v4-8) are not supported.</p>
<p>Before using a config with TPUs, ensure that the <a class="reference external" href="https://cloud.google.com/tpu/docs/users-guide-tpu-vm#enable_the_cloud_tpu_api">TPU API is enabled for your GCP project</a>.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-62" name="sd-tab-set-24" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-62">
GCP</label><div class="sd-tab-content docutils">
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># A unique identifier for the head node and workers of this cluster.</span><span class="w"></span>
<span class="nt">cluster_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tputest</span><span class="w"></span>

<span class="c1"># The maximum number of worker nodes to launch in addition to the head node.</span><span class="w"></span>
<span class="nt">max_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span><span class="w"></span>

<span class="nt">available_node_types</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ray_head_default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;TPU&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">}</span><span class="w">  </span><span class="c1"># use TPU custom resource in your code</span><span class="w"></span>
<span class="w">        </span><span class="nt">node_config</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Only v2-8, v3-8 and v4-8 accelerator types are currently supported.</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Support for TPU pods will be added in the future.</span><span class="w"></span>
<span class="w">            </span><span class="nt">acceleratorType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2-8</span><span class="w"></span>
<span class="w">            </span><span class="nt">runtimeVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2-alpha</span><span class="w"></span>
<span class="w">            </span><span class="nt">schedulingConfig</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="c1"># Set to false to use non-preemptible TPUs</span><span class="w"></span>
<span class="w">                </span><span class="nt">preemptible</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">    </span><span class="nt">ray_tpu</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">min_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;TPU&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">}</span><span class="w">  </span><span class="c1"># use TPU custom resource in your code</span><span class="w"></span>
<span class="w">        </span><span class="nt">node_config</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">acceleratorType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2-8</span><span class="w"></span>
<span class="w">            </span><span class="nt">runtimeVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2-alpha</span><span class="w"></span>
<span class="w">            </span><span class="nt">schedulingConfig</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="nt">preemptible</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>

<span class="nt">provider</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gcp</span><span class="w"></span>
<span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-central1</span><span class="w"></span>
<span class="w">    </span><span class="nt">availability_zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-central1-b</span><span class="w"></span>
<span class="w">    </span><span class="nt">project_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class="w"> </span><span class="c1"># Replace this with your GCP project ID.</span><span class="w"></span>

<span class="nt">setup_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo apt install python-is-python3 -y</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip3 install --upgrade pip</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip3 install -U &quot;ray[default]&quot;</span><span class="w"></span>

<span class="c1"># Specify the node type of the head node (as configured above).</span><span class="w"></span>
<span class="nt">head_node_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray_head_default</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="ray-cluster-cli.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Cluster Launcher Commands</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../../metrics.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Collecting and monitoring metrics</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Ray Team<br/>
  
      &copy; Copyright 2023, The Ray Team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf"></script>


  </body>
</html>