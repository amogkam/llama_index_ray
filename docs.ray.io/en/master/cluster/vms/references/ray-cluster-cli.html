
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Cluster Launcher Commands &#8212; Ray 3.0.0.dev0</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css@digest=5115cc725059bd94278eecd172e13a965bf8f5a9.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/termynal.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_/static/css/badge_only.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/js/versionwarning.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../../../_static/js/docsearch.js"></script>
    <script src="../../../_static/js/rate-the-docs.es.min.js"></script>
    <script defer="defer" src="../../../_static/js/termynal.js"></script>
    <script defer="defer" src="../../../_static/js/custom.js"></script>
    <script defer="defer" src="../../../_static/js/top-navigation.js"></script>
    <script src="../../../_static/js/tags.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js@digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script async="async" src="../../../../../_/static/javascript/readthedocs-doc-embed.js"></script>
    <link rel="canonical" href="https://docs.ray.io/en/latest/cluster/vms/references/ray-cluster-cli.html" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Cluster YAML Configuration Options" href="ray-cluster-configuration.html" />
    <link rel="prev" title="API References" href="index.html" />

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://deer.ray.io/script.js" data-site="WYYANYOS" defer></script>
<!-- / Fathom -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110413294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110413294-1');
</script>

<script
  src="https://widget.kapa.ai/kapa-widget.bundle.js"
  data-website-id="18a8c339-4ec5-43c8-8182-db3f2bc8c6b6"
  data-project-name="Ray"
  data-project-color="#2C2C2C"
  data-project-logo="https://global.discourse-cdn.com/business7/uploads/ray/original/1X/8f4dcb72f7cd34e2a332d548bd65860994bc8ff1.png"
></script>

<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id: 'VISITOR-UNIQUE-ID'
            },
            account: {
                id: 'ACCOUNT-UNIQUE-ID'
            }
        });
})('f89fa48a-6dd7-4d7c-67cf-a8051ed891f2');
</script>



  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="../../../../../_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": true, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/doc/source/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "cluster/vms/references/ray-cluster-cli", "programming_language": "py", "project": "ray", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_book_theme", "user_analytics_code": "", "version": "master"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="../../../../../_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"><div class='topnav'></div></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ray 3.0.0.dev0</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main Navigation">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    Welcome to Ray!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ray
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/index.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/getting-started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-more-libs/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/use-cases.html">
   Use Cases
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/examples.html">
   Example Gallery
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/ray-libraries.html">
   Ecosystem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-core/walkthrough.html">
   Ray Core
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-air/getting-started.html">
   Ray AI Runtime (AIR)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../data/data.html">
   Ray Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../train/train.html">
   Ray Train
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../tune.html">
   Ray Tune
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../serve/index.html">
   Ray Serve
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../rllib/index.html">
   Ray RLlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-more-libs/index.html">
   More Libraries
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../../ray-core/cluster/index.html">
   Ray Clusters
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../../key-concepts.html">
     Key Concepts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../kubernetes/index.html">
     Deploying on Kubernetes
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="../index.html">
     Deploying on VMs
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="../getting-started.html">
       Getting Started
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../user-guides/index.html">
       User Guides
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../examples/index.html">
       Examples
      </a>
     </li>
     <li class="toctree-l3 current active has-children">
      <a class="reference internal" href="index.html">
       API References
      </a>
      <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
      <label for="toctree-checkbox-3">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul class="current">
       <li class="toctree-l4 current active">
        <a class="current reference internal" href="ray-cluster-cli.html#">
         Cluster Launcher Commands
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="ray-cluster-configuration.html">
         Cluster YAML Configuration Options
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../metrics.html">
     Collecting and monitoring metrics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../configure-manage-dashboard.html">
     Configuring and Managing Ray Dashboard
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../running-applications/index.html">
     Applications Guide
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../faq.html">
     FAQ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../package-overview.html">
     Ray Cluster Management API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-observability/index.html">
   Monitoring and Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-references/api.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-contribute/stability.html">
   Developer Guides
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ray-project/ray"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/issues/new?title=Issue%20on%20page%20%2Fcluster/vms/references/ray-cluster-cli.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/edit/master/doc/source/cluster/vms/references/ray-cluster-cli.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/cluster/vms/references/ray-cluster-cli.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#launching-a-cluster-ray-up">
   Launching a cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     up
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#updating-an-existing-cluster-ray-up">
   Updating an existing cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     up
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#running-shell-commands-on-the-cluster-ray-exec">
   Running shell commands on the cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     exec
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#running-ray-scripts-on-the-cluster-ray-submit">
   Running Ray scripts on the cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     submit
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#attaching-to-a-running-cluster-ray-attach">
   Attaching to a running cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     attach
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#synchronizing-files-from-the-cluster-ray-rsync-up-down">
   Synchronizing files from the cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     rsync-up/down
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#monitoring-cluster-status-ray-dashboard-status">
   Monitoring cluster status (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     dashboard/status
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#common-workflow-syncing-git-branches">
   Common Workflow: Syncing git branches
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Cluster Launcher Commands</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#launching-a-cluster-ray-up">
   Launching a cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     up
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#updating-an-existing-cluster-ray-up">
   Updating an existing cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     up
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#running-shell-commands-on-the-cluster-ray-exec">
   Running shell commands on the cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     exec
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#running-ray-scripts-on-the-cluster-ray-submit">
   Running Ray scripts on the cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     submit
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#attaching-to-a-running-cluster-ray-attach">
   Attaching to a running cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     attach
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#synchronizing-files-from-the-cluster-ray-rsync-up-down">
   Synchronizing files from the cluster (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     rsync-up/down
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#monitoring-cluster-status-ray-dashboard-status">
   Monitoring cluster status (
   <code class="docutils literal notranslate">
    <span class="pre">
     ray
    </span>
    <span class="pre">
     dashboard/status
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-cluster-cli.html#common-workflow-syncing-git-branches">
   Common Workflow: Syncing git branches
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="cluster-launcher-commands">
<span id="cluster-commands"></span><h1>Cluster Launcher Commands<a class="headerlink" href="ray-cluster-cli.html#cluster-launcher-commands" title="Permalink to this headline">#</a></h1>
<p>This document overviews common commands for using the Ray cluster launcher.
See the <a class="reference internal" href="ray-cluster-configuration.html#cluster-config"><span class="std std-ref">Cluster Configuration</span></a> docs on how to customize the configuration file.</p>
<section id="launching-a-cluster-ray-up">
<h2>Launching a cluster (<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">up</span></code>)<a class="headerlink" href="ray-cluster-cli.html#launching-a-cluster-ray-up" title="Permalink to this headline">#</a></h2>
<p>This will start up the machines in the cloud, install your dependencies and run
any setup commands that you have, configure the Ray cluster automatically, and
prepare you to scale your distributed system. See <a class="reference internal" href="../../cli.html#ray-up-doc"><span class="std std-ref">the documentation</span></a> for <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">up</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The worker nodes will start only after the head node has finished
starting. To monitor the progress of the cluster setup, you can run
<code class="xref py py-obj docutils literal notranslate"><span class="pre">ray</span> <span class="pre">monitor</span></code>.</p>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Replace &#39;&lt;your_backend&gt;&#39; with one of: &#39;aws&#39;, &#39;gcp&#39;, &#39;kubernetes&#39;, or &#39;local&#39;.</span>
$ <span class="nv">BACKEND</span><span class="o">=</span>&lt;your_backend&gt;

<span class="c1"># Create or update the cluster.</span>
$ ray up ray/python/ray/autoscaler/<span class="nv">$BACKEND</span>/example-full.yaml

<span class="c1"># Tear down the cluster.</span>
$ ray down ray/python/ray/autoscaler/<span class="nv">$BACKEND</span>/example-full.yaml
</pre></div>
</div>
</section>
<section id="updating-an-existing-cluster-ray-up">
<h2>Updating an existing cluster (<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">up</span></code>)<a class="headerlink" href="ray-cluster-cli.html#updating-an-existing-cluster-ray-up" title="Permalink to this headline">#</a></h2>
<p>If you want to update your cluster configuration (add more files, change dependencies), run <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">up</span></code> again on the existing cluster.</p>
<p>This command checks if the local configuration differs from the applied
configuration of the cluster. This includes any changes to synced files
specified in the <code class="docutils literal notranslate"><span class="pre">file_mounts</span></code> section of the config. If so, the new files
and config will be uploaded to the cluster. Following that, Ray
services/processes will be restarted.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Don’t do this for the cloud provider specifications (e.g., change from
AWS to GCP on a running cluster) or change the cluster name (as this
will just start a new cluster and orphan the original one).</p>
</div>
<p>You can also run <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">up</span></code> to restart a cluster if it seems to be in a bad
state (this will restart all Ray services even if there are no config changes).</p>
<p>Running <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">up</span></code> on an existing cluster will do all the following:</p>
<ul class="simple">
<li><p>If the head node matches the cluster specification, the filemounts will be
reapplied and the <code class="docutils literal notranslate"><span class="pre">setup_commands</span></code> and <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span></code> commands will be run.
There may be some caching behavior here to skip setup/file mounts.</p></li>
<li><p>If the head node is out of date from the specified YAML (e.g.,
<code class="docutils literal notranslate"><span class="pre">head_node_type</span></code> has changed on the YAML), then the out of date node will
be terminated and a new node will be provisioned to replace it. Setup/file
mounts/<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span></code> will be applied.</p></li>
<li><p>After the head node reaches a consistent state (after <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span></code> commands
are finished), the same above procedure will be applied to all the worker
nodes. The <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span></code> commands tend to run a <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">stop</span></code> + <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span></code>,
so this will kill currently working jobs.</p></li>
</ul>
<p>If you don’t want the update to restart services (e.g., because the changes
don’t require a restart), pass <code class="docutils literal notranslate"><span class="pre">--no-restart</span></code> to the update call.</p>
<p>If you want to force re-generation of the config to pick up possible changes in
the cloud environment, pass <code class="docutils literal notranslate"><span class="pre">--no-config-cache</span></code> to the update call.</p>
<p>If you want to skip the setup commands and only run <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">stop</span></code>/<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span></code>
on all nodes, pass <code class="docutils literal notranslate"><span class="pre">--restart-only</span></code> to the update call.</p>
<p>See <a class="reference internal" href="../../cli.html#ray-up-doc"><span class="std std-ref">the documentation</span></a> for <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">up</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reconfigure autoscaling behavior without interrupting running jobs.</span>
$ ray up ray/python/ray/autoscaler/<span class="nv">$BACKEND</span>/example-full.yaml <span class="se">\</span>
    --max-workers<span class="o">=</span>N --no-restart
</pre></div>
</div>
</section>
<section id="running-shell-commands-on-the-cluster-ray-exec">
<h2>Running shell commands on the cluster (<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">exec</span></code>)<a class="headerlink" href="ray-cluster-cli.html#running-shell-commands-on-the-cluster-ray-exec" title="Permalink to this headline">#</a></h2>
<p>You can use <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">exec</span></code> to conveniently run commands on clusters. See <a class="reference internal" href="../../cli.html#ray-exec-doc"><span class="std std-ref">the documentation</span></a> for <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">exec</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run a command on the cluster</span>
$ ray <span class="nb">exec</span> cluster.yaml <span class="s1">&#39;echo &quot;hello world&quot;&#39;</span>

<span class="c1"># Run a command on the cluster, starting it if needed</span>
$ ray <span class="nb">exec</span> cluster.yaml <span class="s1">&#39;echo &quot;hello world&quot;&#39;</span> --start

<span class="c1"># Run a command on the cluster, stopping the cluster after it finishes</span>
$ ray <span class="nb">exec</span> cluster.yaml <span class="s1">&#39;echo &quot;hello world&quot;&#39;</span> --stop

<span class="c1"># Run a command on a new cluster called &#39;experiment-1&#39;, stopping it after</span>
$ ray <span class="nb">exec</span> cluster.yaml <span class="s1">&#39;echo &quot;hello world&quot;&#39;</span> <span class="se">\</span>
    --start --stop --cluster-name experiment-1

<span class="c1"># Run a command in a detached tmux session</span>
$ ray <span class="nb">exec</span> cluster.yaml <span class="s1">&#39;echo &quot;hello world&quot;&#39;</span> --tmux

<span class="c1"># Run a command in a screen (experimental)</span>
$ ray <span class="nb">exec</span> cluster.yaml <span class="s1">&#39;echo &quot;hello world&quot;&#39;</span> --screen
</pre></div>
</div>
<p>If you want to run applications on the cluster that are accessible from a web
browser (e.g., Jupyter notebook), you can use the <code class="docutils literal notranslate"><span class="pre">--port-forward</span></code>. The local
port opened is the same as the remote port.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ ray <span class="nb">exec</span> cluster.yaml --port-forward<span class="o">=</span><span class="m">8899</span> <span class="s1">&#39;source ~/anaconda3/bin/activate tensorflow_p36 &amp;&amp; jupyter notebook --port=8899&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For Kubernetes clusters, the <code class="docutils literal notranslate"><span class="pre">port-forward</span></code> option cannot be used
while executing a command. To port forward and run a command you need
to call <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">exec</span></code> twice separately.</p>
</div>
</section>
<section id="running-ray-scripts-on-the-cluster-ray-submit">
<h2>Running Ray scripts on the cluster (<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">submit</span></code>)<a class="headerlink" href="ray-cluster-cli.html#running-ray-scripts-on-the-cluster-ray-submit" title="Permalink to this headline">#</a></h2>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">submit</span></code> to execute Python scripts on clusters. This
will <code class="docutils literal notranslate"><span class="pre">rsync</span></code> the designated file onto the head node cluster and execute it
with the given arguments. See <a class="reference internal" href="../../cli.html#ray-submit-doc"><span class="std std-ref">the documentation</span></a> for
<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">submit</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run a Python script in a detached tmux session</span>
$ ray submit cluster.yaml --tmux --start --stop tune_experiment.py

<span class="c1"># Run a Python script with arguments.</span>
<span class="c1"># This executes script.py on the head node of the cluster, using</span>
<span class="c1"># the command: python ~/script.py --arg1 --arg2 --arg3</span>
$ ray submit cluster.yaml script.py -- --arg1 --arg2 --arg3
</pre></div>
</div>
</section>
<section id="attaching-to-a-running-cluster-ray-attach">
<h2>Attaching to a running cluster (<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">attach</span></code>)<a class="headerlink" href="ray-cluster-cli.html#attaching-to-a-running-cluster-ray-attach" title="Permalink to this headline">#</a></h2>
<p>You can use <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">attach</span></code> to attach to an interactive screen session on the
cluster. See <a class="reference internal" href="../../cli.html#ray-attach-doc"><span class="std std-ref">the documentation</span></a> for <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">attach</span></code> or
run <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">attach</span> <span class="pre">--help</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Open a screen on the cluster</span>
$ ray attach cluster.yaml

<span class="c1"># Open a screen on a new cluster called &#39;session-1&#39;</span>
$ ray attach cluster.yaml --start --cluster-name<span class="o">=</span>session-1

<span class="c1"># Attach to tmux session on cluster (creates a new one if none available)</span>
$ ray attach cluster.yaml --tmux
</pre></div>
</div>
</section>
<section id="synchronizing-files-from-the-cluster-ray-rsync-up-down">
<span id="ray-rsync"></span><h2>Synchronizing files from the cluster (<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">rsync-up/down</span></code>)<a class="headerlink" href="ray-cluster-cli.html#synchronizing-files-from-the-cluster-ray-rsync-up-down" title="Permalink to this headline">#</a></h2>
<p>To download or upload files to the cluster head node, use <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">rsync_down</span></code> or
<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">rsync_up</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ ray rsync_down cluster.yaml <span class="s1">&#39;/path/on/cluster&#39;</span> <span class="s1">&#39;/local/path&#39;</span>
$ ray rsync_up cluster.yaml <span class="s1">&#39;/local/path&#39;</span> <span class="s1">&#39;/path/on/cluster&#39;</span>
</pre></div>
</div>
</section>
<section id="monitoring-cluster-status-ray-dashboard-status">
<span id="monitor-cluster"></span><h2>Monitoring cluster status (<code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">dashboard/status</span></code>)<a class="headerlink" href="ray-cluster-cli.html#monitoring-cluster-status-ray-dashboard-status" title="Permalink to this headline">#</a></h2>
<p>The Ray also comes with an online dashboard. The dashboard is accessible via
HTTP on the head node (by default it listens on <code class="docutils literal notranslate"><span class="pre">localhost:8265</span></code>). You can
also use the built-in <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">dashboard</span></code> to set up port forwarding
automatically, making the remote dashboard viewable in your local browser at
<code class="docutils literal notranslate"><span class="pre">localhost:8265</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ ray dashboard cluster.yaml
</pre></div>
</div>
<p>You can monitor cluster usage and auto-scaling status by running (on the head node):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ ray status
</pre></div>
</div>
<p>To see live updates to the status:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ watch -n <span class="m">1</span> ray status
</pre></div>
</div>
<p>The Ray autoscaler also reports per-node status in the form of instance tags.
In your cloud provider console, you can click on a Node, go to the “Tags” pane,
and add the <code class="docutils literal notranslate"><span class="pre">ray-node-status</span></code> tag as a column. This lets you see per-node
statuses at a glance:</p>
<img alt="../../../_images/autoscaler-status.png" src="../../../_images/autoscaler-status.png" />
</section>
<section id="common-workflow-syncing-git-branches">
<h2>Common Workflow: Syncing git branches<a class="headerlink" href="ray-cluster-cli.html#common-workflow-syncing-git-branches" title="Permalink to this headline">#</a></h2>
<p>A common use case is syncing a particular local git branch to all workers of
the cluster. However, if you just put a <code class="xref py py-obj docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> in the setup
commands, the autoscaler won’t know when to rerun the command to pull in
updates. There is a nice workaround for this by including the git SHA in the
input (the hash of the file will change if the branch is updated):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">file_mounts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;/tmp/current_branch_sha&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;/path/to/local/repo/.git/refs/heads/&lt;YOUR_BRANCH_NAME&gt;&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>

<span class="nt">setup_commands</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test -e &lt;REPO_NAME&gt; || git clone https://github.com/&lt;REPO_ORG&gt;/&lt;REPO_NAME&gt;.git</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cd &lt;REPO_NAME&gt; &amp;&amp; git fetch &amp;&amp; git checkout `cat /tmp/current_branch_sha`</span><span class="w"></span>
</pre></div>
</div>
<p>This tells <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">up</span></code> to sync the current git branch SHA from your personal
computer to a temporary file on the cluster (assuming you’ve pushed the branch
head already). Then, the setup commands read that file to figure out which SHA
they should checkout on the nodes. Note that each command runs in its own
session. The final workflow to update the cluster then becomes just this:</p>
<ol class="arabic simple">
<li><p>Make local changes to a git branch</p></li>
<li><p>Commit the changes with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code></p></li>
<li><p>Update files on your Ray cluster with <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">up</span></code></p></li>
</ol>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">API References</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="ray-cluster-configuration.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Cluster YAML Configuration Options</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Ray Team<br/>
  
      &copy; Copyright 2023, The Ray Team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf"></script>


  </body>
</html>