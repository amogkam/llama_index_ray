
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Ray Client: Interactive Development &#8212; Ray 3.0.0.dev0</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css@digest=5115cc725059bd94278eecd172e13a965bf8f5a9.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/termynal.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_/static/css/badge_only.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/js/versionwarning.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../../../_static/js/docsearch.js"></script>
    <script src="../../../_static/js/rate-the-docs.es.min.js"></script>
    <script defer="defer" src="../../../_static/js/termynal.js"></script>
    <script defer="defer" src="../../../_static/js/custom.js"></script>
    <script defer="defer" src="../../../_static/js/top-navigation.js"></script>
    <script src="../../../_static/js/tags.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js@digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script async="async" src="../../../../../_/static/javascript/readthedocs-doc-embed.js"></script>
    <link rel="canonical" href="https://docs.ray.io/en/latest/cluster/running-applications/job-submission/ray-client.html" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Programmatic Cluster Scaling" href="../autoscaling/reference.html" />
    <link rel="prev" title="Ray Jobs REST API" href="rest.html" />

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://deer.ray.io/script.js" data-site="WYYANYOS" defer></script>
<!-- / Fathom -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110413294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110413294-1');
</script>

<script
  src="https://widget.kapa.ai/kapa-widget.bundle.js"
  data-website-id="18a8c339-4ec5-43c8-8182-db3f2bc8c6b6"
  data-project-name="Ray"
  data-project-color="#2C2C2C"
  data-project-logo="https://global.discourse-cdn.com/business7/uploads/ray/original/1X/8f4dcb72f7cd34e2a332d548bd65860994bc8ff1.png"
></script>

<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id: 'VISITOR-UNIQUE-ID'
            },
            account: {
                id: 'ACCOUNT-UNIQUE-ID'
            }
        });
})('f89fa48a-6dd7-4d7c-67cf-a8051ed891f2');
</script>



  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="../../../../../_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": true, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/doc/source/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "cluster/running-applications/job-submission/ray-client", "programming_language": "py", "project": "ray", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_book_theme", "user_analytics_code": "", "version": "master"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="../../../../../_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"><div class='topnav'></div></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ray 3.0.0.dev0</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main Navigation">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    Welcome to Ray!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ray
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/index.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/getting-started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-more-libs/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/use-cases.html">
   Use Cases
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/examples.html">
   Example Gallery
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-overview/ray-libraries.html">
   Ecosystem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-core/walkthrough.html">
   Ray Core
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-air/getting-started.html">
   Ray AI Runtime (AIR)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../data/data.html">
   Ray Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../train/train.html">
   Ray Train
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../tune.html">
   Ray Tune
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../serve/index.html">
   Ray Serve
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../rllib/index.html">
   Ray RLlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-more-libs/index.html">
   More Libraries
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../../ray-core/cluster/index.html">
   Ray Clusters
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../../key-concepts.html">
     Key Concepts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../kubernetes/index.html">
     Deploying on Kubernetes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../vms/index.html">
     Deploying on VMs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../metrics.html">
     Collecting and monitoring metrics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../configure-manage-dashboard.html">
     Configuring and Managing Ray Dashboard
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="../index.html">
     Applications Guide
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3 current active has-children">
      <a class="reference internal" href="index.html">
       Ray Jobs Overview
      </a>
      <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
      <label for="toctree-checkbox-3">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul class="current">
       <li class="toctree-l4">
        <a class="reference internal" href="quickstart.html">
         Quickstart Using the Ray Jobs CLI
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="sdk.html">
         Python SDK Overview
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="jobs-package-ref.html">
         Python SDK API Reference
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="cli.html">
         Ray Jobs CLI API Reference
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="rest.html">
         Ray Jobs REST API
        </a>
       </li>
       <li class="toctree-l4 current active">
        <a class="current reference internal" href="ray-client.html#">
         Ray Client: Interactive Development
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../autoscaling/reference.html">
       Programmatic Cluster Scaling
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../faq.html">
     FAQ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../package-overview.html">
     Ray Cluster Management API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-observability/index.html">
   Monitoring and Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-references/api.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../ray-contribute/stability.html">
   Developer Guides
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ray-project/ray"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/issues/new?title=Issue%20on%20page%20%2Fcluster/running-applications/job-submission/ray-client.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/edit/master/doc/source/cluster/running-applications/job-submission/ray-client.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/cluster/running-applications/job-submission/ray-client.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-client.html#when-to-use-ray-client">
   When to use Ray Client
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-client.html#client-arguments">
   Client arguments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-client.html#how-do-you-use-the-ray-client">
   How do you use the Ray Client?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#step-1-set-up-your-ray-cluster">
     Step 1: Set up your Ray cluster
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#step-2-check-ports">
     Step 2: Check ports
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#step-3-run-ray-code">
     Step 3: Run Ray code
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#alternative-approach-ssh-port-forwarding">
     Alternative Approach: SSH Port Forwarding
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-client.html#connect-to-multiple-ray-clusters-experimental">
   Connect to multiple Ray clusters (Experimental)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-client.html#things-to-know">
   Things to know
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#client-disconnections">
     Client disconnections
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#versioning-requirements">
     Versioning requirements
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#starting-a-connection-on-older-ray-versions">
     Starting a connection on older Ray versions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#connection-through-the-ingress">
     Connection through the Ingress
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#ray-client-logs">
     Ray client logs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#uploads">
     Uploads
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Ray Client: Interactive Development</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-client.html#when-to-use-ray-client">
   When to use Ray Client
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-client.html#client-arguments">
   Client arguments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-client.html#how-do-you-use-the-ray-client">
   How do you use the Ray Client?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#step-1-set-up-your-ray-cluster">
     Step 1: Set up your Ray cluster
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#step-2-check-ports">
     Step 2: Check ports
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#step-3-run-ray-code">
     Step 3: Run Ray code
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#alternative-approach-ssh-port-forwarding">
     Alternative Approach: SSH Port Forwarding
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-client.html#connect-to-multiple-ray-clusters-experimental">
   Connect to multiple Ray clusters (Experimental)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="ray-client.html#things-to-know">
   Things to know
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#client-disconnections">
     Client disconnections
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#versioning-requirements">
     Versioning requirements
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#starting-a-connection-on-older-ray-versions">
     Starting a connection on older Ray versions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#connection-through-the-ingress">
     Connection through the Ingress
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#ray-client-logs">
     Ray client logs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="ray-client.html#uploads">
     Uploads
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="ray-client-interactive-development">
<span id="ray-client-ref"></span><h1>Ray Client: Interactive Development<a class="headerlink" href="ray-client.html#ray-client-interactive-development" title="Permalink to this headline">#</a></h1>
<p><strong>What is the Ray Client?</strong></p>
<p>The Ray Client is an API that connects a Python script to a <strong>remote</strong> Ray cluster. Effectively, it allows you to leverage a remote Ray cluster just like you would with Ray running on your local machine.</p>
<p>By changing <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> to <code class="docutils literal notranslate"><span class="pre">ray.init(&quot;ray://&lt;head_node_host&gt;:&lt;port&gt;&quot;)</span></code>, you can connect from your laptop (or anywhere) directly to a remote cluster and scale-out your Ray code, while maintaining the ability to develop interactively in a Python shell. <strong>This will only work with Ray 1.5+.</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># You can run this code outside of the Ray cluster!</span>
<span class="kn">import</span> <span class="nn">ray</span>

<span class="c1"># Starting the Ray client. This connects to a remote Ray cluster.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s2">&quot;ray://&lt;head_node_host&gt;:10001&quot;</span><span class="p">)</span>

<span class="c1"># Normal Ray code follows</span>
<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">do_work</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="n">x</span>

<span class="n">do_work</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="c1">#....</span>
</pre></div>
</div>
<section id="when-to-use-ray-client">
<h2>When to use Ray Client<a class="headerlink" href="ray-client.html#when-to-use-ray-client" title="Permalink to this headline">#</a></h2>
<p>Ray Client can be used when you want to connect an interactive Python shell to a <strong>remote</strong> cluster.</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">ray.init(&quot;ray://&lt;head_node_host&gt;:10001&quot;)</span></code> (Ray Client) if you’ve set up a remote cluster at <code class="docutils literal notranslate"><span class="pre">&lt;head_node_host&gt;</span></code> and you want to do interactive work. This will connect your shell to the cluster. See the section on <a class="reference internal" href="ray-client.html#how-do-you-use-the-ray-client"><span class="std std-ref">using Ray Client</span></a> for more details on setting up your cluster.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> (non-client connection, no address specified) if you’re developing locally and want to connect to an existing cluster (i.e. <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span> <span class="pre">--head</span></code> has already been run), or automatically create a local cluster and attach directly to it. This can also be used for <a class="reference internal" href="index.html#jobs-overview"><span class="std std-ref">Ray Job</span></a> submission.</p></li>
</ul>
<p>Ray Client is useful for developing interactively in a local Python shell. However, it requires a stable connection to the remote cluster and will terminate the workload if the connection is lost for <a class="reference internal" href="ray-client.html#client-disconnections"><span class="std std-ref">more than 30 seconds</span></a>. If you have a long running workload that you want to run on your cluster, we recommend using <a class="reference internal" href="index.html#jobs-overview"><span class="std std-ref">Ray Jobs</span></a> instead.</p>
</section>
<section id="client-arguments">
<h2>Client arguments<a class="headerlink" href="ray-client.html#client-arguments" title="Permalink to this headline">#</a></h2>
<p>Ray Client is used when the address passed into <code class="docutils literal notranslate"><span class="pre">ray.init</span></code> is prefixed with <code class="docutils literal notranslate"><span class="pre">ray://</span></code>. Besides the address, Client mode currently accepts two other arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">namespace</span></code> (optional): Sets the namespace for the session.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> (optional): Sets the <a class="reference internal" href="../../../ray-core/handling-dependencies.html#runtime-environments"><span class="std std-ref">runtime environment</span></a> for the session, allowing you to dynamically specify environment variables, packages, local files, and more.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Connects to an existing cluster at 1.2.3.4 listening on port 10001, using</span>
<span class="c1"># the namespace &quot;my_namespace&quot;. The Ray workers will run inside a cluster-side</span>
<span class="c1"># copy of the local directory &quot;files/my_project&quot;, in a Python environment with</span>
<span class="c1"># `toolz` and `requests` installed.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span>
    <span class="s2">&quot;ray://1.2.3.4:10001&quot;</span><span class="p">,</span>
    <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;my_namespace&quot;</span><span class="p">,</span>
    <span class="n">runtime_env</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;working_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;files/my_project&quot;</span><span class="p">,</span> <span class="s2">&quot;pip&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;toolz&quot;</span><span class="p">,</span> <span class="s2">&quot;requests&quot;</span><span class="p">]},</span>
<span class="p">)</span>
<span class="c1">#....</span>
</pre></div>
</div>
</section>
<section id="how-do-you-use-the-ray-client">
<span id="id1"></span><h2>How do you use the Ray Client?<a class="headerlink" href="ray-client.html#how-do-you-use-the-ray-client" title="Permalink to this headline">#</a></h2>
<section id="step-1-set-up-your-ray-cluster">
<h3>Step 1: Set up your Ray cluster<a class="headerlink" href="ray-client.html#step-1-set-up-your-ray-cluster" title="Permalink to this headline">#</a></h3>
<p>If you have a running Ray cluster (version &gt;= 1.5), Ray Client server is likely already running on port <code class="docutils literal notranslate"><span class="pre">10001</span></code> of the head node by default. Otherwise, you’ll want to create a Ray cluster. To start a Ray cluster locally, you can run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ray start --head
</pre></div>
</div>
<p>To start a Ray cluster remotely, you can follow the directions in <a class="reference internal" href="../../vms/getting-started.html#vm-cluster-quick-start"><span class="std std-ref">Getting Started</span></a>.</p>
<p>If necessary, you can modify the Ray Client server port to be other than <code class="docutils literal notranslate"><span class="pre">10001</span></code>, by specifying <code class="docutils literal notranslate"><span class="pre">--ray-client-server-port=...</span></code> to the <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span></code> <a class="reference internal" href="../../cli.html#ray-start-doc"><span class="std std-ref">command</span></a>.</p>
</section>
<section id="step-2-check-ports">
<h3>Step 2: Check ports<a class="headerlink" href="ray-client.html#step-2-check-ports" title="Permalink to this headline">#</a></h3>
<p>Ensure that the Ray Client port on the head node is reachable from your local machine.
This means opening that port up by configuring security groups or other access controls (on  <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/authorizing-access-to-an-instance.html">EC2</a>)
or proxying from your local machine to the cluster (on <a class="reference external" href="https://kubernetes.io/docs/tasks/access-application-cluster/port-forward-access-application-cluster/#forward-a-local-port-to-a-port-on-the-pod">K8s</a>).</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
AWS</label><div class="sd-tab-content docutils">
<p>With the Ray cluster launcher, you can configure the security group
to allow inbound access by defining <a class="reference internal" href="../../vms/references/ray-cluster-configuration.html#cluster-configuration-security-group"><span class="std std-ref">provider.security_group</span></a>
in your <code class="xref py py-obj docutils literal notranslate"><span class="pre">cluster.yaml</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># An unique identifier for the head node and workers of this cluster.</span><span class="w"></span>
<span class="nt">cluster_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">minimal_security_group</span><span class="w"></span>

<span class="c1"># Cloud-provider specific configuration.</span><span class="w"></span>
<span class="nt">provider</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws</span><span class="w"></span>
<span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-west-2</span><span class="w"></span>
<span class="w">    </span><span class="nt">security_group</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">GroupName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray_client_security_group</span><span class="w"></span>
<span class="w">        </span><span class="nt">IpPermissions</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">FromPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10001</span><span class="w"></span>
<span class="w">                </span><span class="nt">ToPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10001</span><span class="w"></span>
<span class="w">                </span><span class="nt">IpProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span><span class="w"></span>
<span class="w">                </span><span class="nt">IpRanges</span><span class="p">:</span><span class="w"></span>
<span class="w">                    </span><span class="c1"># This will enable inbound access from ALL IPv4 addresses.</span><span class="w"></span>
<span class="w">                    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">CidrIp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="step-3-run-ray-code">
<h3>Step 3: Run Ray code<a class="headerlink" href="ray-client.html#step-3-run-ray-code" title="Permalink to this headline">#</a></h3>
<p>Now, connect to the Ray Cluster with the following and then use Ray like you normally would:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>

<span class="c1"># replace with the appropriate host and port</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s2">&quot;ray://&lt;head_node_host&gt;:10001&quot;</span><span class="p">)</span>

<span class="c1"># Normal Ray code follows</span>
<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">do_work</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="n">x</span>

<span class="n">do_work</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">#....</span>
</pre></div>
</div>
</section>
<section id="alternative-approach-ssh-port-forwarding">
<h3>Alternative Approach: SSH Port Forwarding<a class="headerlink" href="ray-client.html#alternative-approach-ssh-port-forwarding" title="Permalink to this headline">#</a></h3>
<p>As an alternative to configuring inbound traffic rules, you can also set up
Ray Client via port forwarding. While this approach does require an open SSH
connection, it can be useful in a test environment where the
<code class="docutils literal notranslate"><span class="pre">head_node_host</span></code> often changes.</p>
<p>First, open up an SSH connection with your Ray cluster and forward the
listening port (<code class="docutils literal notranslate"><span class="pre">10001</span></code>).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ray up cluster.yaml
$ ray attach cluster.yaml -p <span class="m">10001</span>
</pre></div>
</div>
<p>Then, you can connect to the Ray cluster <strong>from another terminal</strong> using  <code class="docutils literal notranslate"><span class="pre">localhost</span></code> as the
<code class="docutils literal notranslate"><span class="pre">head_node_host</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>

<span class="c1"># This will connect to the cluster via the open SSH session.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s2">&quot;ray://localhost:10001&quot;</span><span class="p">)</span>

<span class="c1"># Normal Ray code follows</span>
<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">do_work</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="n">x</span>

<span class="n">do_work</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">#....</span>
</pre></div>
</div>
</section>
</section>
<section id="connect-to-multiple-ray-clusters-experimental">
<h2>Connect to multiple Ray clusters (Experimental)<a class="headerlink" href="ray-client.html#connect-to-multiple-ray-clusters-experimental" title="Permalink to this headline">#</a></h2>
<p>Ray Client allows connecting to multiple Ray clusters in one Python process. To do this, just pass <code class="docutils literal notranslate"><span class="pre">allow_multiple=True</span></code> to <code class="docutils literal notranslate"><span class="pre">ray.init</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="c1"># Create a default client.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s2">&quot;ray://&lt;head_node_host_cluster&gt;:10001&quot;</span><span class="p">)</span>

<span class="c1"># Connect to other clusters.</span>
<span class="n">cli1</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s2">&quot;ray://&lt;head_node_host_cluster_1&gt;:10001&quot;</span><span class="p">,</span> <span class="n">allow_multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">cli2</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s2">&quot;ray://&lt;head_node_host_cluster_2&gt;:10001&quot;</span><span class="p">,</span> <span class="n">allow_multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Data is put into the default cluster.</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;obj&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">cli1</span><span class="p">:</span>
    <span class="n">obj1</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;obj1&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">cli2</span><span class="p">:</span>
    <span class="n">obj2</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;obj2&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">cli1</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;obj1&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>  <span class="c1"># Cross-cluster ops not allowed.</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to get object which doesn&#39;t belong to this cluster&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">cli2</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;obj2&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span>  <span class="c1"># Cross-cluster ops not allowed.</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to get object which doesn&#39;t belong to this cluster&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="s2">&quot;obj&quot;</span> <span class="o">==</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="n">cli1</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
<span class="n">cli2</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
<p>When using Ray multi-client, there are some different behaviors to pay attention to:</p>
<ul class="simple">
<li><p>The client won’t be disconnected automatically. Call <code class="docutils literal notranslate"><span class="pre">disconnect</span></code> explicitly to close the connection.</p></li>
<li><p>Object references can only be used by the client from which it was obtained.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ray.init</span></code> without <code class="docutils literal notranslate"><span class="pre">allow_multiple</span></code> will create a default global Ray client.</p></li>
</ul>
</section>
<section id="things-to-know">
<h2>Things to know<a class="headerlink" href="ray-client.html#things-to-know" title="Permalink to this headline">#</a></h2>
<section id="client-disconnections">
<span id="id2"></span><h3>Client disconnections<a class="headerlink" href="ray-client.html#client-disconnections" title="Permalink to this headline">#</a></h3>
<p>When the client disconnects, any object or actor references held by the server on behalf of the client are dropped, as if directly disconnecting from the cluster.</p>
<p>If the client disconnects unexpectedly, i.e. due to a network failure, the client will attempt to reconnect to the server for 30 seconds before all of the references are dropped. You can increase this time by setting the environment variable <code class="docutils literal notranslate"><span class="pre">RAY_CLIENT_RECONNECT_GRACE_PERIOD=N</span></code>, where <code class="docutils literal notranslate"><span class="pre">N</span></code> is the number of seconds that the client should spend trying to reconnect before giving up.</p>
</section>
<section id="versioning-requirements">
<h3>Versioning requirements<a class="headerlink" href="ray-client.html#versioning-requirements" title="Permalink to this headline">#</a></h3>
<p>Generally, the client Ray version must match the server Ray version. An error will be raised if an incompatible version is used.</p>
<p>Similarly, the minor Python (e.g., 3.6 vs 3.7) must match between the client and server. An error will be raised if this is not the case.</p>
</section>
<section id="starting-a-connection-on-older-ray-versions">
<h3>Starting a connection on older Ray versions<a class="headerlink" href="ray-client.html#starting-a-connection-on-older-ray-versions" title="Permalink to this headline">#</a></h3>
<p>If you encounter <code class="docutils literal notranslate"><span class="pre">socket.gaierror:</span> <span class="pre">[Errno</span> <span class="pre">-2]</span> <span class="pre">Name</span> <span class="pre">or</span> <span class="pre">service</span> <span class="pre">not</span> <span class="pre">known</span></code> when using <code class="docutils literal notranslate"><span class="pre">ray.init(&quot;ray://...&quot;)</span></code> then you may be on a version of Ray prior to 1.5 that does not support starting client connections through <code class="docutils literal notranslate"><span class="pre">ray.init</span></code>.</p>
</section>
<section id="connection-through-the-ingress">
<h3>Connection through the Ingress<a class="headerlink" href="ray-client.html#connection-through-the-ingress" title="Permalink to this headline">#</a></h3>
<p>If you encounter the following error message when connecting to the <code class="docutils literal notranslate"><span class="pre">Ray</span> <span class="pre">Cluster</span></code> using an <code class="docutils literal notranslate"><span class="pre">Ingress</span></code>,  it may be caused by the Ingress’s configuration.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grpc</span><span class="o">.</span><span class="n">_channel</span><span class="o">.</span><span class="n">_MultiThreadedRendezvous</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">_MultiThreadedRendezvous</span> <span class="n">of</span> <span class="n">RPC</span> <span class="n">that</span> <span class="n">terminated</span> <span class="k">with</span><span class="p">:</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">StatusCode</span><span class="o">.</span><span class="n">INVALID_ARGUMENT</span>
    <span class="n">details</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">debug_error_string</span> <span class="o">=</span> <span class="s2">&quot;{&quot;</span><span class="n">created</span><span class="s2">&quot;:&quot;</span><span class="o">@</span><span class="mf">1628668820.164591000</span><span class="s2">&quot;,&quot;</span><span class="n">description</span><span class="s2">&quot;:&quot;</span><span class="n">Error</span> <span class="n">received</span> <span class="kn">from</span> <span class="nn">peer</span> <span class="n">ipv4</span><span class="p">:</span><span class="mf">10.233.120.107</span><span class="p">:</span><span class="mi">443</span><span class="s2">&quot;,&quot;</span><span class="n">file</span><span class="s2">&quot;:&quot;</span><span class="n">src</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">surface</span><span class="o">/</span><span class="n">call</span><span class="o">.</span><span class="n">cc</span><span class="s2">&quot;,&quot;</span><span class="n">file_line</span><span class="s2">&quot;:1062,&quot;</span><span class="n">grpc_message</span><span class="s2">&quot;:&quot;&quot;,&quot;</span><span class="n">grpc_status</span><span class="s2">&quot;:3}&quot;</span>
<span class="o">&gt;</span>
<span class="n">Got</span> <span class="n">Error</span> <span class="kn">from</span> <span class="nn">logger</span> <span class="n">channel</span> <span class="o">--</span> <span class="n">shutting</span> <span class="n">down</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">_MultiThreadedRendezvous</span> <span class="n">of</span> <span class="n">RPC</span> <span class="n">that</span> <span class="n">terminated</span> <span class="k">with</span><span class="p">:</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">StatusCode</span><span class="o">.</span><span class="n">INVALID_ARGUMENT</span>
    <span class="n">details</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">debug_error_string</span> <span class="o">=</span> <span class="s2">&quot;{&quot;</span><span class="n">created</span><span class="s2">&quot;:&quot;</span><span class="o">@</span><span class="mf">1628668820.164713000</span><span class="s2">&quot;,&quot;</span><span class="n">description</span><span class="s2">&quot;:&quot;</span><span class="n">Error</span> <span class="n">received</span> <span class="kn">from</span> <span class="nn">peer</span> <span class="n">ipv4</span><span class="p">:</span><span class="mf">10.233.120.107</span><span class="p">:</span><span class="mi">443</span><span class="s2">&quot;,&quot;</span><span class="n">file</span><span class="s2">&quot;:&quot;</span><span class="n">src</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">surface</span><span class="o">/</span><span class="n">call</span><span class="o">.</span><span class="n">cc</span><span class="s2">&quot;,&quot;</span><span class="n">file_line</span><span class="s2">&quot;:1062,&quot;</span><span class="n">grpc_message</span><span class="s2">&quot;:&quot;&quot;,&quot;</span><span class="n">grpc_status</span><span class="s2">&quot;:3}&quot;</span>
<span class="o">&gt;</span>
</pre></div>
</div>
<p>If you are using the <code class="docutils literal notranslate"><span class="pre">nginx-ingress-controller</span></code>, you may be able to resolve the issue by adding the following Ingress configuration.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span><span class="w"></span>
<span class="w">     </span><span class="nt">nginx.ingress.kubernetes.io/server-snippet</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">       </span><span class="no">underscores_in_headers on;</span><span class="w"></span>
<span class="w">       </span><span class="no">ignore_invalid_headers on;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="ray-client-logs">
<h3>Ray client logs<a class="headerlink" href="ray-client.html#ray-client-logs" title="Permalink to this headline">#</a></h3>
<p>Ray client logs can be found at <code class="docutils literal notranslate"><span class="pre">/tmp/ray/session_latest/logs</span></code> on the head node.</p>
</section>
<section id="uploads">
<h3>Uploads<a class="headerlink" href="ray-client.html#uploads" title="Permalink to this headline">#</a></h3>
<p>If a <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> is specified in the runtime env, when running <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> the Ray client will upload the <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> on the laptop to <code class="docutils literal notranslate"><span class="pre">/tmp/ray/session_latest/runtime_resources/_ray_pkg_&lt;hash</span> <span class="pre">of</span> <span class="pre">directory</span> <span class="pre">contents&gt;</span></code>.</p>
<p>Ray workers are started in the <code class="docutils literal notranslate"><span class="pre">/tmp/ray/session_latest/runtime_resources/_ray_pkg_&lt;hash</span> <span class="pre">of</span> <span class="pre">directory</span> <span class="pre">contents&gt;</span></code> directory on the cluster. This means that relative paths in the remote tasks and actors in the code will work on the laptop and on the cluster without any code changes. For example, if the <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> on the laptop contains <code class="docutils literal notranslate"><span class="pre">data.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">run.py</span></code>, inside the remote task definitions in <code class="docutils literal notranslate"><span class="pre">run.py</span></code> one can just use the relative path <code class="docutils literal notranslate"><span class="pre">&quot;data.txt&quot;</span></code>. Then <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">run.py</span></code> will work on my laptop, and also on the cluster. As a side note, since relative paths can be used in the code, the absolute path is only useful for debugging purposes.</p>
</section>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="rest.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Ray Jobs REST API</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../autoscaling/reference.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Programmatic Cluster Scaling</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Ray Team<br/>
  
      &copy; Copyright 2023, The Ray Team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf"></script>


  </body>
</html>