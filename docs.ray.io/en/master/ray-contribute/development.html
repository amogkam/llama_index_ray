
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Building Ray from Source &#8212; Ray 3.0.0.dev0</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css@digest=5115cc725059bd94278eecd172e13a965bf8f5a9.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/termynal.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_/static/css/badge_only.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/versionwarning.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../_static/js/docsearch.js"></script>
    <script src="../_static/js/rate-the-docs.es.min.js"></script>
    <script defer="defer" src="../_static/js/termynal.js"></script>
    <script defer="defer" src="../_static/js/custom.js"></script>
    <script defer="defer" src="../_static/js/top-navigation.js"></script>
    <script src="../_static/js/tags.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js@digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script async="async" src="../../../_/static/javascript/readthedocs-doc-embed.js"></script>
    <link rel="canonical" href="https://docs.ray.io/en/latest/ray-contribute/development.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing to the Ray Documentation" href="docs.html" />
    <link rel="prev" title="Getting Involved / Contributing" href="getting-involved.html" />

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://deer.ray.io/script.js" data-site="WYYANYOS" defer></script>
<!-- / Fathom -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110413294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110413294-1');
</script>

<script
  src="https://widget.kapa.ai/kapa-widget.bundle.js"
  data-website-id="18a8c339-4ec5-43c8-8182-db3f2bc8c6b6"
  data-project-name="Ray"
  data-project-color="#2C2C2C"
  data-project-logo="https://global.discourse-cdn.com/business7/uploads/ray/original/1X/8f4dcb72f7cd34e2a332d548bd65860994bc8ff1.png"
></script>

<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id: 'VISITOR-UNIQUE-ID'
            },
            account: {
                id: 'ACCOUNT-UNIQUE-ID'
            }
        });
})('f89fa48a-6dd7-4d7c-67cf-a8051ed891f2');
</script>



  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="../../../_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": true, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/doc/source/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "ray-contribute/development", "programming_language": "py", "project": "ray", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_book_theme", "user_analytics_code": "", "version": "master"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="../../../_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"><div class='topnav'></div></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ray 3.0.0.dev0</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main Navigation">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome to Ray!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ray
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/index.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/getting-started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-more-libs/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/use-cases.html">
   Use Cases
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/examples.html">
   Example Gallery
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/ray-libraries.html">
   Ecosystem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-core/walkthrough.html">
   Ray Core
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-air/getting-started.html">
   Ray AI Runtime (AIR)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data/data.html">
   Ray Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../train/train.html">
   Ray Train
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tune.html">
   Ray Tune
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../serve/index.html">
   Ray Serve
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../rllib/index.html">
   Ray RLlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-more-libs/index.html">
   More Libraries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-core/cluster/index.html">
   Ray Clusters
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-observability/index.html">
   Monitoring and Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-references/api.html">
   References
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="stability.html">
   Developer Guides
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="getting-involved.html">
     Getting Involved / Contributing
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="development.html#">
       Building Ray from Source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="docs.html">
       Contributing to the Ray Documentation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="writing-code-snippets.html">
       How to write code snippets
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="fake-autoscaler.html">
       Testing Autoscaling Locally
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../ray-core/examples/testing-tips.html">
       Tips for testing Ray programs
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="debugging.html">
       Debugging for Ray Developers
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="profiling.html">
       Profiling for Ray Developers
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ray-core/configure.html">
     Configuring Ray
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="whitepaper.html">
     Architecture Whitepapers
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ray-project/ray"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/issues/new?title=Issue%20on%20page%20%2Fray-contribute/development.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/edit/master/doc/source/ray-contribute/development.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/ray-contribute/development.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#clone-the-repository">
   Clone the repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#prepare-the-python-environment">
   Prepare the Python environment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#building-ray-python-only">
   Building Ray (Python Only)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#preparing-to-build-ray-on-linux">
   Preparing to build Ray on Linux
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#preparing-to-build-ray-on-macos">
   Preparing to build Ray on MacOS
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#building-ray-on-linux-macos-full">
   Building Ray on Linux &amp; MacOS (full)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#building-ray-on-windows-full">
   Building Ray on Windows (full)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#environment-variables-that-influence-builds">
   Environment variables that influence builds
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#installing-additional-dependencies-for-development">
   Installing additional dependencies for development
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#fast-debug-and-optimized-builds">
   Fast, Debug, and Optimized Builds
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#building-the-docs">
   Building the Docs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#using-a-local-repository-for-dependencies">
   Using a local repository for dependencies
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#troubleshooting">
   Troubleshooting
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Building Ray from Source</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#clone-the-repository">
   Clone the repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#prepare-the-python-environment">
   Prepare the Python environment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#building-ray-python-only">
   Building Ray (Python Only)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#preparing-to-build-ray-on-linux">
   Preparing to build Ray on Linux
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#preparing-to-build-ray-on-macos">
   Preparing to build Ray on MacOS
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#building-ray-on-linux-macos-full">
   Building Ray on Linux &amp; MacOS (full)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#building-ray-on-windows-full">
   Building Ray on Windows (full)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#environment-variables-that-influence-builds">
   Environment variables that influence builds
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#installing-additional-dependencies-for-development">
   Installing additional dependencies for development
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#fast-debug-and-optimized-builds">
   Fast, Debug, and Optimized Builds
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#building-the-docs">
   Building the Docs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#using-a-local-repository-for-dependencies">
   Using a local repository for dependencies
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="development.html#troubleshooting">
   Troubleshooting
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="building-ray-from-source">
<span id="building-ray"></span><h1>Building Ray from Source<a class="headerlink" href="development.html#building-ray-from-source" title="Permalink to this headline">#</a></h1>
<p>For a majority of Ray users, installing Ray via the latest wheels or pip package is usually enough. However, you may want to build the latest master branch.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are only editing Python files, follow instructions for <a class="reference internal" href="development.html#python-develop"><span class="std std-ref">Building Ray (Python Only)</span></a> to avoid long build times.</p>
<p>If you already followed the instructions in <a class="reference internal" href="development.html#python-develop"><span class="std std-ref">Building Ray (Python Only)</span></a> and want to switch to the Full build in this section, you will need to first uninstall.</p>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="development.html#clone-the-repository" id="id1">Clone the repository</a></p></li>
<li><p><a class="reference internal" href="development.html#prepare-the-python-environment" id="id2">Prepare the Python environment</a></p></li>
<li><p><a class="reference internal" href="development.html#building-ray-python-only" id="id3">Building Ray (Python Only)</a></p></li>
<li><p><a class="reference internal" href="development.html#preparing-to-build-ray-on-linux" id="id4">Preparing to build Ray on Linux</a></p></li>
<li><p><a class="reference internal" href="development.html#preparing-to-build-ray-on-macos" id="id5">Preparing to build Ray on MacOS</a></p></li>
<li><p><a class="reference internal" href="development.html#building-ray-on-linux-macos-full" id="id6">Building Ray on Linux &amp; MacOS (full)</a></p></li>
<li><p><a class="reference internal" href="development.html#building-ray-on-windows-full" id="id7">Building Ray on Windows (full)</a></p></li>
<li><p><a class="reference internal" href="development.html#environment-variables-that-influence-builds" id="id8">Environment variables that influence builds</a></p></li>
<li><p><a class="reference internal" href="development.html#installing-additional-dependencies-for-development" id="id9">Installing additional dependencies for development</a></p></li>
<li><p><a class="reference internal" href="development.html#fast-debug-and-optimized-builds" id="id10">Fast, Debug, and Optimized Builds</a></p></li>
<li><p><a class="reference internal" href="development.html#building-the-docs" id="id11">Building the Docs</a></p></li>
<li><p><a class="reference internal" href="development.html#using-a-local-repository-for-dependencies" id="id12">Using a local repository for dependencies</a></p></li>
<li><p><a class="reference internal" href="development.html#troubleshooting" id="id13">Troubleshooting</a></p></li>
</ul>
</div>
<section id="clone-the-repository">
<h2><a class="toc-backref" href="development.html#id1">Clone the repository</a><a class="headerlink" href="development.html#clone-the-repository" title="Permalink to this headline">#</a></h2>
<p>To build Ray locally you will need to have the Git repository, so first, fork it on GitHub. Then you can clone it to your machine:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Git SSH</label><div class="sd-tab-content docutils">
<p>To clone the repository using Git with SSH (the default) run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:<span class="o">[</span>your username<span class="o">]</span>/ray.git
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Git HTTPS</label><div class="sd-tab-content docutils">
<p>To clone the repository using Git with HTTPS run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/<span class="o">[</span>your username<span class="o">]</span>/ray.git
</pre></div>
</div>
</div>
</div>
<p>Then you can enter into the Ray git repository directory:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ray
</pre></div>
</div>
<p>Next make sure you connect your repository to the upstream (main project) Ray repository. This will allow you to push your code to your repository when proposing changes (in pull requests) while also pulling updates from the main project.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-2">
Git SSH</label><div class="sd-tab-content docutils">
<p>To connect your repository using SSH (the default) run the command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git remote add upstream git@github.com:ray-project/ray.git
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-3">
Git HTTPS</label><div class="sd-tab-content docutils">
<p>To connect your repository using HTTPS run the command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git remote add upstream https://github.com/ray-project/ray.git
</pre></div>
</div>
</div>
</div>
<p>Every time you want to update your local version you can pull the changes from the main repository:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Checkout the local master branch</span>
git checkout master
<span class="c1"># Pull the latest changes from the main repository</span>
git pull upstream master
</pre></div>
</div>
</section>
<section id="prepare-the-python-environment">
<h2><a class="toc-backref" href="development.html#id2">Prepare the Python environment</a><a class="headerlink" href="development.html#prepare-the-python-environment" title="Permalink to this headline">#</a></h2>
<p>You probably want some type of Python virtual environment. For example, you can use Anaconda’s <code class="docutils literal notranslate"><span class="pre">conda</span></code>.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-4">
conda</label><div class="sd-tab-content docutils">
<p>Set up a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment named <code class="docutils literal notranslate"><span class="pre">ray</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda create -c conda-forge <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.9 -n ray
</pre></div>
</div>
<p>Activate your virtual environment to tell the shell/terminal to use this particular Python:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda activate ray
</pre></div>
</div>
<p>You need to activate the virtual environment every time you start a new shell/terminal to work on Ray.</p>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-5">
venv</label><div class="sd-tab-content docutils">
<p>Use Python’s integrated <code class="docutils literal notranslate"><span class="pre">venv</span></code> module to create a virtual environment called <code class="docutils literal notranslate"><span class="pre">venv</span></code> in the current directory:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python -m venv venv
</pre></div>
</div>
<p>This contains a directory with all the packages used by the local Python of your project. You only need to do this step once.</p>
<p>Activate your virtual environment to tell the  shell/terminal to use this particular Python:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> venv/bin/activate
</pre></div>
</div>
<p>You need to activate the virtual environment every time you start a new shell/terminal to work on Ray.</p>
<p>Creating a new virtual environment can come with older versions of <code class="docutils literal notranslate"><span class="pre">pip</span></code> and <code class="docutils literal notranslate"><span class="pre">wheel</span></code>. To avoid problems when you install packages, use the module <code class="docutils literal notranslate"><span class="pre">pip</span></code> to install the latest version of <code class="docutils literal notranslate"><span class="pre">pip</span></code> (itself) and <code class="docutils literal notranslate"><span class="pre">wheel</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python -m pip install --upgrade pip wheel
</pre></div>
</div>
</div>
</div>
</section>
<section id="building-ray-python-only">
<span id="python-develop"></span><h2><a class="toc-backref" href="development.html#id3">Building Ray (Python Only)</a><a class="headerlink" href="development.html#building-ray-python-only" title="Permalink to this headline">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unless otherwise stated, directory and file paths are relative to the project root directory.</p>
</div>
<p>RLlib, Tune, Autoscaler, and most Python files do not require you to build and compile Ray. Follow these instructions to develop Ray’s Python files locally without building Ray.</p>
<ol class="arabic simple">
<li><p>Make sure you have a clone of Ray’s git repository as explained above.</p></li>
<li><p>Make sure you activate the Python (virtual) environment as described above.</p></li>
<li><p>Pip install the <strong>latest Ray wheels.</strong> See <a class="reference internal" href="../ray-more-libs/installation.html#install-nightlies"><span class="std std-ref">Daily Releases (Nightlies)</span></a> for instructions.</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># For example, for Python 3.8:</span>
pip install -U https://s3-us-west-2.amazonaws.com/ray-wheels/latest/ray-3.0.0.dev0-cp38-cp38-manylinux2014_x86_64.whl
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Replace Python files in the installed package with your local editable copy. We provide a simple script to help you do this: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">python/ray/setup-dev.py</span></code>. Running the script will remove the  <code class="docutils literal notranslate"><span class="pre">ray/tune</span></code>, <code class="docutils literal notranslate"><span class="pre">ray/rllib</span></code>, <code class="docutils literal notranslate"><span class="pre">ray/autoscaler</span></code> dir (among other directories) bundled with the <code class="docutils literal notranslate"><span class="pre">ray</span></code> pip package, and replace them with links to your local code. This way, changing files in your git clone will directly affect the behavior of your installed Ray.</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># This replaces `&lt;package path&gt;/site-packages/ray/&lt;package&gt;`</span>
<span class="c1"># with your local `ray/python/ray/&lt;package&gt;`.</span>
python python/ray/setup-dev.py
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>[Advanced] You can also optionally skip creating symbolic link for directories of your choice.</p>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># This links all folders except &quot;_private&quot; and &quot;dashboard&quot; without user prompt.</span>
python setup-dev.py -y --skip _private dashboard
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span> <span class="pre">ray</span></code> or <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-U</span></code> (for Ray or Ray wheels) if setting up your environment this way. To uninstall or upgrade, you must first <code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-rf</span></code> the pip-installation site (usually a directory at the <code class="docutils literal notranslate"><span class="pre">site-packages/ray</span></code> location), then do a pip reinstall (see the command above), and finally run the above <code class="docutils literal notranslate"><span class="pre">setup-dev.py</span></code> script again.</p>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># To uninstall, delete the symlinks first.</span>
rm -rf &lt;package path&gt;/site-packages/ray <span class="c1"># Path will be in the output of `setup-dev.py`.</span>
pip uninstall ray <span class="c1"># or `pip install -U &lt;wheel&gt;`</span>
</pre></div>
</div>
</section>
<section id="preparing-to-build-ray-on-linux">
<h2><a class="toc-backref" href="development.html#id4">Preparing to build Ray on Linux</a><a class="headerlink" href="development.html#preparing-to-build-ray-on-linux" title="Permalink to this headline">#</a></h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are only editing Tune/RLlib/Autoscaler files, follow instructions for <a class="reference internal" href="development.html#python-develop"><span class="std std-ref">Building Ray (Python Only)</span></a> to avoid long build times.</p>
</div>
<p>To build Ray on Ubuntu, run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add a PPA containing gcc-9 for older versions of Ubuntu.</span>
sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
sudo apt-get update
sudo apt-get install -y build-essential curl gcc-9 g++-9 pkg-config psmisc unzip
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 <span class="m">90</span> <span class="se">\</span>
              --slave /usr/bin/g++ g++ /usr/bin/g++-9 <span class="se">\</span>
              --slave /usr/bin/gcov gcov /usr/bin/gcov-9

<span class="c1"># Install Bazel.</span>
ci/env/install-bazel.sh

<span class="c1"># Install node version manager and node 14</span>
<span class="k">$(</span>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh<span class="k">)</span>
nvm install <span class="m">14</span>
nvm use <span class="m">14</span>
</pre></div>
</div>
<p>For RHELv8 (Redhat EL 8.0-64 Minimal), run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo yum groupinstall <span class="s1">&#39;Development Tools&#39;</span>
sudo yum install psmisc
</pre></div>
</div>
<p>In RedHat, install Bazel manually from this link: <a class="reference external" href="https://docs.bazel.build/versions/main/install-redhat.html">https://docs.bazel.build/versions/main/install-redhat.html</a></p>
</section>
<section id="preparing-to-build-ray-on-macos">
<h2><a class="toc-backref" href="development.html#id5">Preparing to build Ray on MacOS</a><a class="headerlink" href="development.html#preparing-to-build-ray-on-macos" title="Permalink to this headline">#</a></h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Assuming you already have Brew and Bazel installed on your mac and you also have grpc and protobuf installed on your mac consider removing those (grpc and protobuf) for smooth build through the commands <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">uninstall</span> <span class="pre">grpc</span></code>, <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">uninstall</span> <span class="pre">protobuf</span></code>. If you have built the source code earlier and it still fails with errors like <code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory:</span></code>, try cleaning previous builds on your host by running the commands <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">uninstall</span> <span class="pre">binutils</span></code> and <code class="docutils literal notranslate"><span class="pre">bazel</span> <span class="pre">clean</span> <span class="pre">--expunge</span></code>.</p>
</div>
<p>To build Ray on MacOS, first install these dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew update
brew install wget

<span class="c1"># Install Bazel.</span>
ray/ci/env/install-bazel.sh
</pre></div>
</div>
</section>
<section id="building-ray-on-linux-macos-full">
<h2><a class="toc-backref" href="development.html#id6">Building Ray on Linux &amp; MacOS (full)</a><a class="headerlink" href="development.html#building-ray-on-linux-macos-full" title="Permalink to this headline">#</a></h2>
<p>Make sure you have a local clone of Ray’s git repository as explained above. You will also need to install <a class="reference external" href="https://nodejs.org">NodeJS</a> to build the dashboard.</p>
<p>Enter into the project directory, for example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ray
</pre></div>
</div>
<p>Now you can build the dashboard. From inside of your local Ray project directory enter into the dashboard client directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> dashboard/client
</pre></div>
</div>
<p>Then you can install the dependencies and build the dashboard:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm ci
npm run build
</pre></div>
</div>
<p>After that, you can now move back to the top level Ray directory:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ../..
</pre></div>
</div>
<p>Now let’s build Ray for Python. Make sure you activate any Python virtual (or conda) environment you could be using as described above.</p>
<p>Enter into the <code class="docutils literal notranslate"><span class="pre">python/</span></code> directory inside of the Ray project directory and install the project with <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install Ray.</span>
<span class="nb">cd</span> python/
<span class="c1"># You may need to set the following two env vars if your platform is MacOS ARM64(M1).</span>
<span class="c1"># See https://github.com/grpc/grpc/issues/25082 for more details.</span>
<span class="c1"># export GRPC_PYTHON_BUILD_SYSTEM_OPENSSL=1</span>
<span class="c1"># export GRPC_PYTHON_BUILD_SYSTEM_ZLIB=1</span>
pip install -e . --verbose  <span class="c1"># Add --user if you see a permission denied error.</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-e</span></code> means “editable”, so changes you make to files in the Ray
directory will take effect without reinstalling the package.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>if you run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code>, files will be copied from the Ray directory to a directory of Python packages (<code class="docutils literal notranslate"><span class="pre">/lib/python3.6/site-packages/ray</span></code>). This means that changes you make to files in the Ray directory will not have any effect.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If your machine is running out of memory during the build or the build is causing other programs to crash, try adding the following line to <code class="docutils literal notranslate"><span class="pre">~/.bazelrc</span></code>:</p>
<p><code class="docutils literal notranslate"><span class="pre">build</span> <span class="pre">--local_ram_resources=HOST_RAM*.5</span> <span class="pre">--local_cpu_resources=4</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">build</span> <span class="pre">--disk_cache=~/bazel-cache</span></code> option can be useful to speed up repeated builds too.</p>
</div>
</section>
<section id="building-ray-on-windows-full">
<h2><a class="toc-backref" href="development.html#id7">Building Ray on Windows (full)</a><a class="headerlink" href="development.html#building-ray-on-windows-full" title="Permalink to this headline">#</a></h2>
<p><strong>Requirements</strong></p>
<p>The following links were correct during the writing of this section. In case the URLs changed, search at the organizations’ sites.</p>
<ul class="simple">
<li><p>Bazel 4.2 (<a class="reference external" href="https://github.com/bazelbuild/bazel/releases/tag/4.2.1">https://github.com/bazelbuild/bazel/releases/tag/4.2.1</a>)</p></li>
<li><p>Microsoft Visual Studio 2019 (or Microsoft Build Tools 2019 - <a class="reference external" href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019">https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019</a>)</p></li>
<li><p>JDK 15 (<a class="reference external" href="https://www.oracle.com/java/technologies/javase-jdk15-downloads.html">https://www.oracle.com/java/technologies/javase-jdk15-downloads.html</a>)</p></li>
<li><p>Miniconda 3 (<a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">https://docs.conda.io/en/latest/miniconda.html</a>)</p></li>
<li><p>git for Windows, version 2.31.1 or later (<a class="reference external" href="https://git-scm.com/download/win">https://git-scm.com/download/win</a>)</p></li>
</ul>
<p>You can also use the included script to install Bazel:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install Bazel.</span>
ray/ci/env/install-bazel.sh
<span class="c1"># (Windows users: please manually place Bazel in your PATH, and point</span>
<span class="c1"># BAZEL_SH to MSYS2&#39;s Bash: ``set BAZEL_SH=C:\Program Files\Git\bin\bash.exe``)</span>
</pre></div>
</div>
<p><strong>Steps</strong></p>
<ol class="arabic simple">
<li><p>Enable Developer mode on Windows 10 systems. This is necessary so git can create symlinks.</p>
<ol class="arabic simple">
<li><p>Open Settings app;</p></li>
<li><p>Go to “Update &amp; Security”;</p></li>
<li><p>Go to “For Developers” on the left pane;</p></li>
<li><p>Turn on “Developer mode”.</p></li>
</ol>
</li>
<li><p>Add the following Miniconda subdirectories to PATH. If Miniconda was installed for all users, the following paths are correct. If Miniconda is installed for a single user, adjust the paths accordingly.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">C:\ProgramData\Miniconda3</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C:\ProgramData\Miniconda3\Scripts</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C:\ProgramData\Miniconda3\Library\bin</span></code></p></li>
</ul>
</li>
<li><p>Define an environment variable <code class="docutils literal notranslate"><span class="pre">BAZEL_SH</span></code> to point to <code class="docutils literal notranslate"><span class="pre">bash.exe</span></code>. If git for Windows was installed for all users, bash’s path should be <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Git\bin\bash.exe</span></code>. If git was installed for a single user, adjust the path accordingly.</p></li>
</ol>
<p>4. Bazel 4.2 installation. Go to Bazel 4.2 release web page and download
bazel-4.2.1-windows-x86_64.exe. Copy the exe into the directory of your choice.
Define an environment variable BAZEL_PATH to full exe path (example:
<code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">BAZEL_PATH=C:\bazel\bazel.exe</span></code>). Also add the Bazel directory to the
<code class="docutils literal notranslate"><span class="pre">PATH</span></code> (example: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">PATH=%PATH%;C:\bazel</span></code>)</p>
<ol class="arabic simple" start="5">
<li><p>Download ray source code and build it.</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd to the directory under which the ray source tree will be downloaded.</span>
git clone -c core.symlinks<span class="o">=</span><span class="nb">true</span> https://github.com/ray-project/ray.git
<span class="nb">cd</span> ray<span class="se">\p</span>ython
pip install -e . --verbose
</pre></div>
</div>
</section>
<section id="environment-variables-that-influence-builds">
<h2><a class="toc-backref" href="development.html#id8">Environment variables that influence builds</a><a class="headerlink" href="development.html#environment-variables-that-influence-builds" title="Permalink to this headline">#</a></h2>
<p>You can tweak the build with the following environment variables (when running <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code> or <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code>):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RAY_INSTALL_JAVA</span></code>: If set and equal to <code class="docutils literal notranslate"><span class="pre">1</span></code>, extra build steps will be executed
to build java portions of the codebase</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RAY_INSTALL_CPP</span></code>: If set and equal to <code class="docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">ray-cpp</span></code> will be installed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RAY_DISABLE_EXTRA_CPP</span></code>: If set and equal to <code class="docutils literal notranslate"><span class="pre">1</span></code>, a regular (non -
<code class="docutils literal notranslate"><span class="pre">cpp</span></code>) build will not provide some <code class="docutils literal notranslate"><span class="pre">cpp</span></code> interfaces</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SKIP_BAZEL_BUILD</span></code>: If set and equal to <code class="docutils literal notranslate"><span class="pre">1</span></code>, no Bazel build steps will be
executed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SKIP_THIRDPARTY_INSTALL</span></code>: If set will skip installation of third-party
python packages</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RAY_DEBUG_BUILD</span></code>: Can be set to <code class="docutils literal notranslate"><span class="pre">debug</span></code>, <code class="docutils literal notranslate"><span class="pre">asan</span></code>, or <code class="docutils literal notranslate"><span class="pre">tsan</span></code>. Any
other value will be ignored</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BAZEL_ARGS</span></code>: If set, pass a space-separated set of arguments to Bazel. This can be useful
for restricting resource usage during builds, for example. See <a class="reference external" href="https://bazel.build/docs/user-manual">https://bazel.build/docs/user-manual</a>
for more information about valid arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IS_AUTOMATED_BUILD</span></code>: Used in CI to tweak the build for the CI machines</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SRC_DIR</span></code>: Can be set to the root of the source checkout, defaults to
<code class="docutils literal notranslate"><span class="pre">None</span></code> which is <code class="docutils literal notranslate"><span class="pre">cwd()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BAZEL_SH</span></code>: used on Windows to find a <code class="docutils literal notranslate"><span class="pre">bash.exe</span></code>, see below</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BAZEL_PATH</span></code>: used on Windows to find <code class="docutils literal notranslate"><span class="pre">bazel.exe</span></code>, see below</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MINGW_DIR</span></code>: used on Windows to find <code class="docutils literal notranslate"><span class="pre">bazel.exe</span></code> if not found in <code class="docutils literal notranslate"><span class="pre">BAZEL_PATH</span></code></p></li>
</ul>
</section>
<section id="installing-additional-dependencies-for-development">
<h2><a class="toc-backref" href="development.html#id9">Installing additional dependencies for development</a><a class="headerlink" href="development.html#installing-additional-dependencies-for-development" title="Permalink to this headline">#</a></h2>
<p>Dependencies for the linter (<code class="docutils literal notranslate"><span class="pre">scripts/format.sh</span></code>) can be installed with:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip install -r python/requirements_linters.txt
</pre></div>
</div>
<p>Dependencies for running Ray unit tests under <code class="docutils literal notranslate"><span class="pre">python/ray/tests</span></code> can be installed with:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip install -c python/requirements.txt -r python/requirements_test.txt
</pre></div>
</div>
<p>Requirement files for running Ray Data / ML library tests are under <code class="docutils literal notranslate"><span class="pre">python/requirements/</span></code>.</p>
</section>
<section id="fast-debug-and-optimized-builds">
<h2><a class="toc-backref" href="development.html#id10">Fast, Debug, and Optimized Builds</a><a class="headerlink" href="development.html#fast-debug-and-optimized-builds" title="Permalink to this headline">#</a></h2>
<p>Currently, Ray is built with optimizations, which can take a long time and
interfere with debugging. To perform fast, debug, or optimized builds, you can
run the following (via <code class="docutils literal notranslate"><span class="pre">-c</span></code> <code class="docutils literal notranslate"><span class="pre">fastbuild</span></code>/<code class="docutils literal notranslate"><span class="pre">dbg</span></code>/<code class="docutils literal notranslate"><span class="pre">opt</span></code>, respectively):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>bazel build -c fastbuild //:ray_pkg
</pre></div>
</div>
<p>This will rebuild Ray with the appropriate options (which may take a while).
If you need to build all targets, you can use <code class="docutils literal notranslate"><span class="pre">&quot;//:all&quot;</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">//:ray_pkg</span></code>.</p>
<p>To make this change permanent, you can add an option such as the following
line to your user-level <code class="docutils literal notranslate"><span class="pre">~/.bazelrc</span></code> file (not to be confused with the
workspace-level <code class="docutils literal notranslate"><span class="pre">.bazelrc</span></code> file):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>build --compilation_mode<span class="o">=</span>fastbuild
</pre></div>
</div>
<p>If you do so, remember to revert this change, unless you want it to affect
all of your development in the future.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">dbg</span></code> instead of <code class="docutils literal notranslate"><span class="pre">fastbuild</span></code> generates more debug information,
which can make it easier to debug with a debugger like <code class="docutils literal notranslate"><span class="pre">gdb</span></code>.</p>
</section>
<section id="building-the-docs">
<h2><a class="toc-backref" href="development.html#id11">Building the Docs</a><a class="headerlink" href="development.html#building-the-docs" title="Permalink to this headline">#</a></h2>
<p>To learn more about building the docs refer to <a class="reference external" href="docs.html">Contributing to the Ray Documentation</a>.</p>
</section>
<section id="using-a-local-repository-for-dependencies">
<h2><a class="toc-backref" href="development.html#id12">Using a local repository for dependencies</a><a class="headerlink" href="development.html#using-a-local-repository-for-dependencies" title="Permalink to this headline">#</a></h2>
<p>If you’d like to build Ray with custom dependencies (for example, with a
different version of Cython), you can modify your <code class="docutils literal notranslate"><span class="pre">.bzl</span></code> file as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">http_archive</span><span class="p">(</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;cython&quot;</span><span class="p">,</span>
  <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="k">if</span> <span class="kc">False</span> <span class="k">else</span> <span class="n">native</span><span class="o">.</span><span class="n">new_local_repository</span><span class="p">(</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;cython&quot;</span><span class="p">,</span>
  <span class="n">build_file</span> <span class="o">=</span> <span class="s2">&quot;bazel/BUILD.cython&quot;</span><span class="p">,</span>
  <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;../cython&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This replaces the existing <code class="docutils literal notranslate"><span class="pre">http_archive</span></code> rule with one that references a
sibling of your Ray directory (named <code class="docutils literal notranslate"><span class="pre">cython</span></code>) using the build file
provided in the Ray repository (<code class="docutils literal notranslate"><span class="pre">bazel/BUILD.cython</span></code>).
If the dependency already has a Bazel build file in it, you can use
<code class="docutils literal notranslate"><span class="pre">native.local_repository</span></code> instead, and omit <code class="docutils literal notranslate"><span class="pre">build_file</span></code>.</p>
<p>To test switching back to the original rule, change <code class="docutils literal notranslate"><span class="pre">False</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</section>
<section id="troubleshooting">
<h2><a class="toc-backref" href="development.html#id13">Troubleshooting</a><a class="headerlink" href="development.html#troubleshooting" title="Permalink to this headline">#</a></h2>
<p>If importing Ray (<code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-c</span> <span class="pre">&quot;import</span> <span class="pre">ray&quot;</span></code>) in your development clone results
in this error:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s2">&quot;.../ray/python/ray/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">63</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="kn">import</span> <span class="nn">ray._raylet</span>  <span class="c1"># noqa: E402</span>
  <span class="n">File</span> <span class="s2">&quot;python/ray/_raylet.pyx&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">98</span><span class="p">,</span> <span class="ow">in</span> <span class="n">init</span> <span class="n">ray</span><span class="o">.</span><span class="n">_raylet</span>
    <span class="kn">import</span> <span class="nn">ray.memory_monitor</span> <span class="k">as</span> <span class="nn">memory_monitor</span>
  <span class="n">File</span> <span class="s2">&quot;.../ray/python/ray/memory_monitor.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">9</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="kn">import</span> <span class="nn">psutil</span>  <span class="c1"># noqa E402</span>
  <span class="n">File</span> <span class="s2">&quot;.../ray/python/ray/thirdparty_files/psutil/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">159</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">_psosx</span> <span class="k">as</span> <span class="n">_psplatform</span>
  <span class="n">File</span> <span class="s2">&quot;.../ray/python/ray/thirdparty_files/psutil/_psosx.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">15</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">_psutil_osx</span> <span class="k">as</span> <span class="n">cext</span>
<span class="ne">ImportError</span><span class="p">:</span> <span class="n">cannot</span> <span class="kn">import</span> <span class="nn">name</span> <span class="s1">&#39;_psutil_osx&#39;</span> <span class="kn">from</span> <span class="nn">partially</span> <span class="n">initialized</span> <span class="n">module</span> <span class="s1">&#39;psutil&#39;</span> <span class="p">(</span><span class="n">most</span> <span class="n">likely</span> <span class="n">due</span> <span class="n">to</span> <span class="n">a</span> <span class="n">circular</span> <span class="n">import</span><span class="p">)</span> <span class="p">(</span><span class="o">.../</span><span class="n">ray</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">ray</span><span class="o">/</span><span class="n">thirdparty_files</span><span class="o">/</span><span class="n">psutil</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span><span class="p">)</span>
</pre></div>
</div>
<p>Then you should run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm -rf python/ray/thirdparty_files/
python3 -m pip install setproctitle
</pre></div>
</div>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="getting-involved.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Getting Involved / Contributing</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="docs.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Contributing to the Ray Documentation</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Ray Team<br/>
  
      &copy; Copyright 2023, The Ray Team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf"></script>


  </body>
</html>