
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>How does Tune work? &#8212; Ray 3.0.0.dev0</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css@digest=5115cc725059bd94278eecd172e13a965bf8f5a9.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/termynal.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_/static/css/badge_only.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/versionwarning.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../../_static/js/docsearch.js"></script>
    <script src="../../_static/js/rate-the-docs.es.min.js"></script>
    <script defer="defer" src="../../_static/js/termynal.js"></script>
    <script defer="defer" src="../../_static/js/custom.js"></script>
    <script defer="defer" src="../../_static/js/top-navigation.js"></script>
    <script src="../../_static/js/tags.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js@digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script async="async" src="../../../../_/static/javascript/readthedocs-doc-embed.js"></script>
    <link rel="canonical" href="https://docs.ray.io/en/latest/tune/tutorials/tune-lifecycle.html" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Scalability and Overhead Benchmarks for Ray Tune" href="tune-scalability.html" />
    <link rel="prev" title="Running Distributed Experiments with Ray Tune" href="tune-distributed.html" />

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://deer.ray.io/script.js" data-site="WYYANYOS" defer></script>
<!-- / Fathom -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110413294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110413294-1');
</script>

<script
  src="https://widget.kapa.ai/kapa-widget.bundle.js"
  data-website-id="18a8c339-4ec5-43c8-8182-db3f2bc8c6b6"
  data-project-name="Ray"
  data-project-color="#2C2C2C"
  data-project-logo="https://global.discourse-cdn.com/business7/uploads/ray/original/1X/8f4dcb72f7cd34e2a332d548bd65860994bc8ff1.png"
></script>

<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id: 'VISITOR-UNIQUE-ID'
            },
            account: {
                id: 'ACCOUNT-UNIQUE-ID'
            }
        });
})('f89fa48a-6dd7-4d7c-67cf-a8051ed891f2');
</script>



  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="../../../../_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": true, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/doc/source/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "tune/tutorials/tune-lifecycle", "programming_language": "py", "project": "ray", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_book_theme", "user_analytics_code": "", "version": "master"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="../../../../_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"><div class='topnav'></div></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ray 3.0.0.dev0</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main Navigation">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../index.html">
                    Welcome to Ray!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ray
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/index.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/getting-started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-more-libs/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/use-cases.html">
   Use Cases
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/examples.html">
   Example Gallery
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/ray-libraries.html">
   Ecosystem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-core/walkthrough.html">
   Ray Core
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-air/getting-started.html">
   Ray AI Runtime (AIR)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../data/data.html">
   Ray Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../train/train.html">
   Ray Train
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../tune.html">
   Ray Tune
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../getting-started.html">
     Getting Started
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../key-concepts.html">
     Key Concepts
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="overview.html">
     User Guides
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="tune-run.html">
       Running Basic Experiments
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune-output.html">
       Logging and Outputs in Tune
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune-resources.html">
       Setting Trial Resources
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune-search-spaces.html">
       Using Search Spaces
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune-stopping.html">
       How to Define Stopping Criteria for a Ray Tune Experiment
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune-trial-checkpoints.html">
       How to Save and Load Trial Checkpoints
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune-storage.html">
       How to Configure Storage Options for a Distributed Tune Experiment
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune-fault-tolerance.html">
       How to Enable Fault Tolerance in Ray Tune
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune-metrics.html">
       Using Callbacks and Metrics
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune_get_data_in_and_out.html">
       Getting Data in and out of Tune
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../examples/tune_analyze_results.html">
       Analyzing Tune Experiment Results
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../examples/pbt_guide.html">
       A Guide to Population Based Training with Tune
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune-distributed.html">
       Deploying Tune in the Cloud
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="tune-lifecycle.html#">
       Tune Architecture
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="tune-scalability.html">
       Scalability Benchmarks
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../examples/index.html">
     Ray Tune Examples
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../faq.html">
     Ray Tune FAQ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/api.html">
     Ray Tune API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../serve/index.html">
   Ray Serve
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../rllib/index.html">
   Ray RLlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-more-libs/index.html">
   More Libraries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-core/cluster/index.html">
   Ray Clusters
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-observability/index.html">
   Monitoring and Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-references/api.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-contribute/stability.html">
   Developer Guides
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ray-project/ray"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/issues/new?title=Issue%20on%20page%20%2Ftune/tutorials/tune-lifecycle.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/edit/master/doc/source/tune/tutorials/tune-lifecycle.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/tune/tutorials/tune-lifecycle.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="tune-lifecycle.html#what-happens-in-tuner-fit">
   What happens in
   <code class="docutils literal notranslate">
    <span class="pre">
     Tuner.fit
    </span>
   </code>
   ?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#the-execution-of-a-trainable-in-tune">
     The execution of a trainable in Tune
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#resource-management-in-tune">
     Resource Management in Tune
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="tune-lifecycle.html#lifecycle-of-a-tune-trial">
   Lifecycle of a Tune Trial
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="tune-lifecycle.html#tune-s-architecture">
   Tune’s Architecture
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#trialrunner">
     TrialRunner
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#trial-objects">
     Trial objects
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#raytrialexecutor">
     RayTrialExecutor
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#searchalg">
     SearchAlg
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#trialscheduler">
     TrialScheduler
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#trainables">
     Trainables
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>How does Tune work?</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="tune-lifecycle.html#what-happens-in-tuner-fit">
   What happens in
   <code class="docutils literal notranslate">
    <span class="pre">
     Tuner.fit
    </span>
   </code>
   ?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#the-execution-of-a-trainable-in-tune">
     The execution of a trainable in Tune
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#resource-management-in-tune">
     Resource Management in Tune
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="tune-lifecycle.html#lifecycle-of-a-tune-trial">
   Lifecycle of a Tune Trial
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="tune-lifecycle.html#tune-s-architecture">
   Tune’s Architecture
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#trialrunner">
     TrialRunner
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#trial-objects">
     Trial objects
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#raytrialexecutor">
     RayTrialExecutor
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#searchalg">
     SearchAlg
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#trialscheduler">
     TrialScheduler
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="tune-lifecycle.html#trainables">
     Trainables
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="how-does-tune-work">
<h1>How does Tune work?<a class="headerlink" href="tune-lifecycle.html#how-does-tune-work" title="Permalink to this headline">#</a></h1>
<p>This page provides an overview of Tune’s inner workings.
We describe in detail what happens when you call <code class="docutils literal notranslate"><span class="pre">Tuner.fit()</span></code>, what the lifecycle of a Tune trial looks like
and what the architectural components of Tune are.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Before you continue, be sure to have read <a class="reference internal" href="../key-concepts.html#tune-60-seconds"><span class="std std-ref">the Tune Key Concepts page</span></a>.</p>
</div>
<section id="what-happens-in-tuner-fit">
<h2>What happens in <code class="docutils literal notranslate"><span class="pre">Tuner.fit</span></code>?<a class="headerlink" href="tune-lifecycle.html#what-happens-in-tuner-fit" title="Permalink to this headline">#</a></h2>
<p>When calling the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">space</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">tune</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)}</span>
<span class="n">tuner</span> <span class="o">=</span> <span class="n">tune</span><span class="o">.</span><span class="n">Tuner</span><span class="p">(</span>
    <span class="n">my_trainable</span><span class="p">,</span>
    <span class="n">param_space</span><span class="o">=</span><span class="n">space</span><span class="p">,</span>
    <span class="n">tune_config</span><span class="o">=</span><span class="n">tune</span><span class="o">.</span><span class="n">TuneConfig</span><span class="p">(</span><span class="n">num_samples</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">tuner</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</pre></div>
</div>
<p>The provided <code class="docutils literal notranslate"><span class="pre">my_trainable</span></code> is evaluated multiple times in parallel
with different hyperparameters (sampled from <code class="docutils literal notranslate"><span class="pre">uniform(0,</span> <span class="pre">1)</span></code>).</p>
<p>Every Tune run consists of “driver process” and many “worker processes”.
The driver process is the python process that calls <code class="docutils literal notranslate"><span class="pre">Tuner.fit()</span></code> (which calls <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> underneath the hood).
The Tune driver process runs on the node where you run your script (which calls <code class="docutils literal notranslate"><span class="pre">Tuner.fit()</span></code>),
while Ray Tune trainable “actors” run on any node (either on the same node or on worker nodes (distributed Ray only)).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="../../ray-more-libs/actors.html#actor-guide"><span class="std std-ref">Ray Actors</span></a> allow you to parallelize an instance of a class in Python.
When you instantiate a class that is a Ray actor, Ray will start a instance of that class on a separate process
either on the same machine (or another distributed machine, if running a Ray cluster).
This actor can then asynchronously execute method calls and maintain its own internal state.</p>
</div>
<p>The driver spawns parallel worker processes (<a class="reference internal" href="../../ray-more-libs/actors.html#actor-guide"><span class="std std-ref">Ray actors</span></a>)
that are responsible for evaluating each trial using its hyperparameter configuration and the provided trainable
(see the <a class="reference external" href="https://github.com/ray-project/ray/blob/master/python/ray/tune/ray_trial_executor.py">ray trial executor source code</a>).</p>
<p>While the Trainable is executing (<a class="reference internal" href="tune-lifecycle.html#trainable-execution"><span class="std std-ref">The execution of a trainable in Tune</span></a>), the Tune Driver communicates with each actor
via actor methods to receive intermediate training results and pause/stop actors (see <a class="reference internal" href="tune-lifecycle.html#trial-lifecycle"><span class="std std-ref">Lifecycle of a Tune Trial</span></a>).</p>
<p>When the Trainable terminates (or is stopped), the actor is also terminated.</p>
<section id="the-execution-of-a-trainable-in-tune">
<span id="trainable-execution"></span><h3>The execution of a trainable in Tune<a class="headerlink" href="tune-lifecycle.html#the-execution-of-a-trainable-in-tune" title="Permalink to this headline">#</a></h3>
<p>Tune uses <a class="reference internal" href="../../ray-more-libs/actors.html#actor-guide"><span class="std std-ref">Ray actors</span></a> to parallelize the evaluation of multiple hyperparameter configurations.
Each actor is a Python process that executes an instance of the user-provided Trainable.</p>
<p>The definition of the user-provided Trainable will be
<a class="reference internal" href="../../ray-core/objects/serialization.html#serialization-guide"><span class="std std-ref">serialized via cloudpickle</span></a>) and sent to each actor process.
Each Ray actor will start an instance of the Trainable to be executed.</p>
<p>If the Trainable is a class, it will be executed iteratively by calling <code class="docutils literal notranslate"><span class="pre">train/step</span></code>.
After each invocation, the driver is notified that a “result dict” is ready.
The driver will then pull the result via <code class="docutils literal notranslate"><span class="pre">ray.get</span></code>.</p>
<p>If the trainable is a callable or a function, it will be executed on the Ray actor process on a separate execution thread.
Whenever <code class="docutils literal notranslate"><span class="pre">session.report</span></code> is called, the execution thread is paused and waits for the driver to pull a
result (see <a class="reference external" href="https://github.com/ray-project/ray/blob/master/python/ray/tune/trainable/function_trainable.py">function_trainable.py</a>.
After pulling, the actor’s execution thread will automatically resume.</p>
</section>
<section id="resource-management-in-tune">
<h3>Resource Management in Tune<a class="headerlink" href="tune-lifecycle.html#resource-management-in-tune" title="Permalink to this headline">#</a></h3>
<p>Before running a trial, the Ray Tune driver will check whether there are available
resources on the cluster (see <a class="reference internal" href="../../ray-core/scheduling/resources.html#resource-requirements"><span class="std std-ref">Specifying Task or Actor Resource Requirements</span></a>).
It will compare the available resources with the resources required by the trial.</p>
<p>If there is space on the cluster, then the Tune Driver will start a Ray actor (worker).
This actor will be scheduled and executed on some node where the resources are available.
See <a class="reference internal" href="tune-resources.html"><span class="doc">A Guide To Parallelism and Resources for Ray Tune</span></a> for more information.</p>
</section>
</section>
<section id="lifecycle-of-a-tune-trial">
<span id="trial-lifecycle"></span><h2>Lifecycle of a Tune Trial<a class="headerlink" href="tune-lifecycle.html#lifecycle-of-a-tune-trial" title="Permalink to this headline">#</a></h2>
<p>A trial’s life cycle consists of 6 stages:</p>
<ul class="simple">
<li><p><strong>Initialization</strong> (generation): A trial is first generated as a hyperparameter sample,
and its parameters are configured according to what was provided in <code class="docutils literal notranslate"><span class="pre">Tuner</span></code>.
Trials are then placed into a queue to be executed (with status PENDING).</p></li>
<li><p><strong>PENDING</strong>: A pending trial is a trial to be executed on the machine.
Every trial is configured with resource values. Whenever the trial’s resource values are available,
Tune will run the trial (by starting a ray actor holding the config and the training function.</p></li>
<li><p><strong>RUNNING</strong>: A running trial is assigned a Ray Actor. There can be multiple running trials in parallel.
See the <a class="reference internal" href="tune-lifecycle.html#trainable-execution"><span class="std std-ref">trainable execution</span></a> section for more details.</p></li>
<li><p><strong>ERRORED</strong>: If a running trial throws an exception, Tune will catch that exception and mark the trial as errored.
Note that exceptions can be propagated from an actor to the main Tune driver process.
If max_retries is set, Tune will set the trial back into “PENDING” and later start it from the last checkpoint.</p></li>
<li><p><strong>TERMINATED</strong>: A trial is terminated if it is stopped by a Stopper/Scheduler.
If using the Function API, the trial is also terminated when the function stops.</p></li>
<li><p><strong>PAUSED</strong>: A trial can be paused by a Trial scheduler. This means that the trial’s actor will be stopped.
A paused trial can later be resumed from the most recent checkpoint.</p></li>
</ul>
</section>
<section id="tune-s-architecture">
<h2>Tune’s Architecture<a class="headerlink" href="tune-lifecycle.html#tune-s-architecture" title="Permalink to this headline">#</a></h2>
<img alt="../../_images/tune-arch.png" src="../../_images/tune-arch.png" />
<p>The blue boxes refer to internal components, while green boxes are public-facing.</p>
<p>Tune’s main components consist of <code class="docutils literal notranslate"><span class="pre">TrialRunner</span></code>, <code class="docutils literal notranslate"><span class="pre">Trial</span></code> objects, <code class="docutils literal notranslate"><span class="pre">TrialExecutor</span></code>, <code class="docutils literal notranslate"><span class="pre">SearchAlg</span></code>,
<code class="docutils literal notranslate"><span class="pre">TrialScheduler</span></code>, and <code class="docutils literal notranslate"><span class="pre">Trainable</span></code>.</p>
<p id="trial-runner-flow">This is an illustration of the high-level training flow and how some of the components interact:</p>
<p><em>Note: This figure is horizontally scrollable</em></p>
<figure class="align-default">
<img alt="../../_images/tune-trial-runner-flow-horizontal.png" class="horizontal-scroll" src="../../_images/tune-trial-runner-flow-horizontal.png" />
</figure>
<section id="trialrunner">
<h3>TrialRunner<a class="headerlink" href="tune-lifecycle.html#trialrunner" title="Permalink to this headline">#</a></h3>
<p>[<a class="reference external" href="https://github.com/ray-project/ray/blob/master/python/ray/tune/execution/trial_runner.py">source code</a>]
This is the main driver of the training loop. This component
uses the TrialScheduler to prioritize and execute trials,
queries the SearchAlgorithm for new
configurations to evaluate, and handles the fault tolerance logic.</p>
<p><strong>Fault Tolerance</strong>: The TrialRunner executes checkpointing if <code class="docutils literal notranslate"><span class="pre">checkpoint_freq</span></code>
is set, along with automatic trial restarting in case of trial failures (if <code class="docutils literal notranslate"><span class="pre">max_failures</span></code> is set).
For example, if a node is lost while a trial (specifically, the corresponding
Trainable of the trial) is still executing on that node and checkpointing
is enabled, the trial will then be reverted to a <code class="docutils literal notranslate"><span class="pre">&quot;PENDING&quot;</span></code> state and resumed
from the last available checkpoint when it is run.
The TrialRunner is also in charge of checkpointing the entire experiment execution state
upon each loop iteration. This allows users to restart their experiment
in case of machine failure.</p>
<p>See the docstring at <a class="reference internal" href="../api/internals.html#trialrunner-docstring"><span class="std std-ref">TrialRunner</span></a>.</p>
</section>
<section id="trial-objects">
<h3>Trial objects<a class="headerlink" href="tune-lifecycle.html#trial-objects" title="Permalink to this headline">#</a></h3>
<p>[<a class="reference external" href="https://github.com/ray-project/ray/blob/master/python/ray/tune/experiment/trial.py">source code</a>]
This is an internal data structure that contains metadata about each training run. Each Trial
object is mapped one-to-one with a Trainable object but are not themselves
distributed/remote. Trial objects transition among
the following states: <code class="docutils literal notranslate"><span class="pre">&quot;PENDING&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;RUNNING&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;PAUSED&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;ERRORED&quot;</span></code>, and
<code class="docutils literal notranslate"><span class="pre">&quot;TERMINATED&quot;</span></code>.</p>
<p>See the docstring at <a class="reference internal" href="../api/internals.html#trial-docstring"><span class="std std-ref">Trial</span></a>.</p>
</section>
<section id="raytrialexecutor">
<h3>RayTrialExecutor<a class="headerlink" href="tune-lifecycle.html#raytrialexecutor" title="Permalink to this headline">#</a></h3>
<p>[<a class="reference external" href="https://github.com/ray-project/ray/blob/master/python/ray/tune/execution/ray_trial_executor.py">source code</a>]
The RayTrialExecutor is a component that interacts with the underlying execution framework.
It also manages resources to ensure the cluster isn’t overloaded.</p>
<p>See the docstring at <a class="reference internal" href="../api/internals.html#raytrialexecutor-docstring"><span class="std std-ref">TunerInternal</span></a>.</p>
</section>
<section id="searchalg">
<h3>SearchAlg<a class="headerlink" href="tune-lifecycle.html#searchalg" title="Permalink to this headline">#</a></h3>
<p>[<a class="reference external" href="https://github.com/ray-project/ray/tree/master/python/ray/tune/search">source code</a>]
The SearchAlgorithm is a user-provided object
that is used for querying new hyperparameter configurations to evaluate.</p>
<p>SearchAlgorithms will be notified every time a trial finishes
executing one training step (of <code class="docutils literal notranslate"><span class="pre">train()</span></code>), every time a trial
errors, and every time a trial completes.</p>
</section>
<section id="trialscheduler">
<h3>TrialScheduler<a class="headerlink" href="tune-lifecycle.html#trialscheduler" title="Permalink to this headline">#</a></h3>
<p>[<a class="reference external" href="https://github.com/ray-project/ray/blob/master/python/ray/tune/schedulers">source code</a>]
TrialSchedulers operate over a set of possible trials to run,
prioritizing trial execution given available cluster resources.</p>
<p>TrialSchedulers are given the ability to kill or pause trials,
and also are given the ability to reorder/prioritize incoming trials.</p>
</section>
<section id="trainables">
<h3>Trainables<a class="headerlink" href="tune-lifecycle.html#trainables" title="Permalink to this headline">#</a></h3>
<p>[<a class="reference external" href="https://github.com/ray-project/ray/blob/master/python/ray/tune/trainable/trainable.py">source code</a>]
These are user-provided objects that are used for
the training process. If a class is provided, it is expected to conform to the
Trainable interface. If a function is provided. it is wrapped into a
Trainable class, and the function itself is executed on a separate thread.</p>
<p>Trainables will execute one step of <code class="docutils literal notranslate"><span class="pre">train()</span></code> before notifying the TrialRunner.</p>
</section>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="tune-distributed.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Running Distributed Experiments with Ray Tune</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="tune-scalability.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Scalability and Overhead Benchmarks for Ray Tune</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Ray Team<br/>
  
      &copy; Copyright 2023, The Ray Team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf"></script>


  </body>
</html>