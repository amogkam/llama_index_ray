
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Configuring Logging &#8212; Ray 3.0.0.dev0</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css@digest=1999514e3f237ded88cf.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css@digest=5115cc725059bd94278eecd172e13a965bf8f5a9.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/termynal.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_/static/css/badge_only.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/versionwarning.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../../_static/js/docsearch.js"></script>
    <script src="../../_static/js/rate-the-docs.es.min.js"></script>
    <script defer="defer" src="../../_static/js/termynal.js"></script>
    <script defer="defer" src="../../_static/js/custom.js"></script>
    <script defer="defer" src="../../_static/js/top-navigation.js"></script>
    <script src="../../_static/js/tags.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js@digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script async="async" src="../../../../_/static/javascript/readthedocs-doc-embed.js"></script>
    <link rel="canonical" href="https://docs.ray.io/en/latest/ray-observability/user-guides/configure-logging.html" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Adding Application-Level Metrics" href="add-app-metrics.html" />
    <link rel="prev" title="Monitoring with the CLI or SDK" href="cli-sdk.html" />

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://deer.ray.io/script.js" data-site="WYYANYOS" defer></script>
<!-- / Fathom -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110413294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110413294-1');
</script>

<script
  src="https://widget.kapa.ai/kapa-widget.bundle.js"
  data-website-id="18a8c339-4ec5-43c8-8182-db3f2bc8c6b6"
  data-project-name="Ray"
  data-project-color="#2C2C2C"
  data-project-logo="https://global.discourse-cdn.com/business7/uploads/ray/original/1X/8f4dcb72f7cd34e2a332d548bd65860994bc8ff1.png"
></script>

<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id: 'VISITOR-UNIQUE-ID'
            },
            account: {
                id: 'ACCOUNT-UNIQUE-ID'
            }
        });
})('f89fa48a-6dd7-4d7c-67cf-a8051ed891f2');
</script>



  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="../../../../_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": true, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/doc/source/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "ray-observability/user-guides/configure-logging", "programming_language": "py", "project": "ray", "proxied_api_host": "/_", "source_suffix": ".md", "subprojects": {}, "theme": "sphinx_book_theme", "user_analytics_code": "", "version": "master"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="../../../../_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"><div class='topnav'></div></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ray 3.0.0.dev0</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main Navigation">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../index.html">
                    Welcome to Ray!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ray
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/index.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/getting-started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-more-libs/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/use-cases.html">
   Use Cases
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/examples.html">
   Example Gallery
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-overview/ray-libraries.html">
   Ecosystem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-core/walkthrough.html">
   Ray Core
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-air/getting-started.html">
   Ray AI Runtime (AIR)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../data/data.html">
   Ray Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../train/train.html">
   Ray Train
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../tune.html">
   Ray Tune
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../serve/index.html">
   Ray Serve
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../rllib/index.html">
   Ray RLlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-more-libs/index.html">
   More Libraries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-core/cluster/index.html">
   Ray Clusters
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../index.html">
   Monitoring and Debugging
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../getting-started.html">
     Ray Dashboard
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../key-concepts.html">
     Key Concepts
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="index.html">
     User Guides
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="debug-apps/index.html">
       Debugging Applications
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="cli-sdk.html">
       Monitoring with the CLI or SDK
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="configure-logging.html#">
       Configuring Logging
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="add-app-metrics.html">
       Adding Application-Level Metrics
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="ray-tracing.html">
       Tracing
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../reference/index.html">
     Reference
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-references/api.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ray-contribute/stability.html">
   Developer Guides
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ray-project/ray"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/issues/new?title=Issue%20on%20page%20%2Fray-observability/user-guides/configure-logging.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/edit/master/doc/source/ray-observability/user-guides/configure-logging.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/ray-observability/user-guides/configure-logging.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#logging-directory">
   Logging directory
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#log-files-in-logging-directory">
   Log files in logging directory
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#application-logs">
     Application logs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#system-component-logs">
     System (component) logs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#redirecting-worker-logs-to-the-driver">
   Redirecting Worker logs to the Driver
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#customizing-prefixes-for-actor-logs">
     Customizing prefixes for Actor logs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#coloring-actor-log-prefixes">
     Coloring Actor log prefixes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#disable-logging-to-the-driver">
     Disable logging to the driver
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#log-deduplication">
   Log deduplication
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#distributed-progress-bars-tqdm">
   Distributed progress bars (tqdm)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#using-rays-logger">
   Using Ray’s logger
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#structured-logging">
   Structured logging
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#id3">
     Application logs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#system-logs">
     System logs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#add-metadata-to-structured-logs">
     Add metadata to structured logs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#customizing-worker-process-loggers">
   Customizing worker process loggers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#log-rotation">
   Log rotation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#log-persistence">
   Log persistence
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Configuring Logging</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#logging-directory">
   Logging directory
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#log-files-in-logging-directory">
   Log files in logging directory
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#application-logs">
     Application logs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#system-component-logs">
     System (component) logs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#redirecting-worker-logs-to-the-driver">
   Redirecting Worker logs to the Driver
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#customizing-prefixes-for-actor-logs">
     Customizing prefixes for Actor logs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#coloring-actor-log-prefixes">
     Coloring Actor log prefixes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#disable-logging-to-the-driver">
     Disable logging to the driver
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#log-deduplication">
   Log deduplication
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#distributed-progress-bars-tqdm">
   Distributed progress bars (tqdm)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#using-rays-logger">
   Using Ray’s logger
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#structured-logging">
   Structured logging
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#id3">
     Application logs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#system-logs">
     System logs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="configure-logging.html#add-metadata-to-structured-logs">
     Add metadata to structured logs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#customizing-worker-process-loggers">
   Customizing worker process loggers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#log-rotation">
   Log rotation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="configure-logging.html#log-persistence">
   Log persistence
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="configuring-logging">
<span id="configure-logging"></span><h1>Configuring Logging<a class="headerlink" href="configure-logging.html#configuring-logging" title="Permalink to this headline">#</a></h1>
<p>This guide helps you understand and modify the configuration of Ray’s logging system.</p>
<section id="logging-directory">
<span id="id1"></span><h2>Logging directory<a class="headerlink" href="configure-logging.html#logging-directory" title="Permalink to this headline">#</a></h2>
<p>By default, Ray log files are stored in a <code class="docutils literal notranslate"><span class="pre">/tmp/ray/session_*/logs</span></code> directory. View the <a class="reference internal" href="configure-logging.html#logging-directory-structure"><span class="std std-ref">log files in logging directory</span></a> below to understand how they are organized within the logs folder.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ray uses <code class="docutils literal notranslate"><span class="pre">/tmp/ray</span></code> (for Linux and macOS) as the default temp directory. To change the temp and the logging directory, specify it when you call <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span></code> or <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code>.</p>
</div>
<p>A new Ray session creates a new folder to the temp directory. The latest session folder is symlinked to <code class="docutils literal notranslate"><span class="pre">/tmp/ray/session_latest</span></code>. Here is an example temp directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── tmp/ray
│   ├── session_latest
│   │   ├── logs
│   │   ├── ...
│   ├── session_2023-05-14_21-19-58_128000_45083
│   │   ├── logs
│   │   ├── ...
│   ├── session_2023-05-15_21-54-19_361265_24281
│   ├── ...
</pre></div>
</div>
<p>Usually, temp directories are cleared up whenever the machines reboot. As a result, log files may get lost whenever your cluster or some of the nodes are stopped or terminated.</p>
<p>If you need to inspect logs after the clusters are stopped or terminated, you need to store and persist the logs. View the instructions for how to process and export logs for <a class="reference internal" href="../../cluster/vms/user-guides/logging.html#vm-logging"><span class="std std-ref">clusters on VMs</span></a> and <a class="reference internal" href="../../cluster/kubernetes/user-guides/logging.html#kuberay-logging"><span class="std std-ref">KubeRay Clusters</span></a>.</p>
</section>
<section id="log-files-in-logging-directory">
<span id="logging-directory-structure"></span><h2>Log files in logging directory<a class="headerlink" href="configure-logging.html#log-files-in-logging-directory" title="Permalink to this headline">#</a></h2>
<p>Below are the log files in the logging directory. Broadly speaking, two types of log files exist: system log files and application log files.
Note that <code class="docutils literal notranslate"><span class="pre">.out</span></code> logs are from stdout/stderr and <code class="docutils literal notranslate"><span class="pre">.err</span></code> logs are from stderr. The backward compatibility of log directories is not guaranteed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>System logs may include information about your applications. For example, <code class="docutils literal notranslate"><span class="pre">runtime_env_setup-[job_id].log</span></code> may include information about your application’s environment and dependency.</p>
</div>
<section id="application-logs">
<h3>Application logs<a class="headerlink" href="configure-logging.html#application-logs" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">job-driver-[submission_id].log</span></code>: The stdout of a job submitted with the :ref:<code class="docutils literal notranslate"><span class="pre">Ray</span> <span class="pre">Jobs</span> <span class="pre">API</span> <span class="pre">&lt;jobs-overview&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">worker-[worker_id]-[job_id]-[pid].[out|err]</span></code>: Python or Java part of Ray drivers and workers. All stdout and stderr from Tasks or Actors are streamed to these files. Note that job_id is the ID of the driver.</p></li>
</ul>
</section>
<section id="system-component-logs">
<h3>System (component) logs<a class="headerlink" href="configure-logging.html#system-component-logs" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dashboard.[log|err]</span></code>: A log file of a Ray Dashboard. <code class="docutils literal notranslate"><span class="pre">.log</span></code> files contain logs generated from the dashboard’s logger. <code class="docutils literal notranslate"><span class="pre">.err</span></code> files contain stdout and stderr printed from the dashboard. They are usually empty except when the dashboard crashes unexpectedly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dashboard_agent.log</span></code>: Every Ray node has one dashboard agent. This is a log file of the agent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gcs_server.[out|err]</span></code>: The GCS server is a stateless server that manages Ray cluster metadata. It exists only in the head node.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">io-worker-[worker_id]-[pid].[out|err]</span></code>: Ray creates IO workers to spill/restore objects to external storage by default from Ray 1.3+. This is a log file of IO workers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_monitor.[log|err]</span></code>: The log monitor is in charge of streaming logs to the driver. <code class="docutils literal notranslate"><span class="pre">.log</span></code> files contain logs generated from the log monitor’s logger. <code class="docutils literal notranslate"><span class="pre">.err</span></code> files contain the stdout and stderr printed from the log monitor. They are usually empty except when the log monitor crashes unexpectedly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor.[out|err]</span></code>: Stdout and stderr of a cluster launcher.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor.log</span></code>: Ray’s Cluster Launcher operates from a monitor process. It also manages the Autoscaler.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plasma_store.[out|err]</span></code>: Deprecated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python-core-driver-[worker_id]_[pid].log</span></code>: Ray drivers consist of CPP core and a Python or Java frontend. CPP code generates this log file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python-core-worker-[worker_id]_[pid].log</span></code>: Ray workers consist of CPP core and a Python or Java frontend. CPP code generates this log file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raylet.[out|err]</span></code>: A log file of raylets.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">redis-shard_[shard_index].[out|err]</span></code>: Redis shard log files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">redis.[out|err]</span></code>: Redis log files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runtime_env_agent.log</span></code>: Every Ray node has one agent that manages :ref:<code class="docutils literal notranslate"><span class="pre">Runtime</span> <span class="pre">Environment</span> <span class="pre">&lt;runtime-environments&gt;</span></code> creation, deletion, and caching.
This is the log file of the agent containing logs of create or delete requests and cache hits and misses.
For the logs of the actual installations (for example, <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> logs), see the <code class="docutils literal notranslate"><span class="pre">runtime_env_setup-[job_id].log</span></code> file (see below).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runtime_env_setup-ray_client_server_[port].log</span></code>: Logs from installing <a class="reference internal" href="../../ray-core/handling-dependencies.html#runtime-environments"><span class="std std-ref">Runtime Environments</span></a> for a job when connecting with <a class="reference internal" href="../../cluster/running-applications/job-submission/ray-client.html#ray-client-ref"><span class="std std-ref">Ray Client</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runtime_env_setup-[job_id].log</span></code>: Logs from installing <a class="reference internal" href="../../ray-core/handling-dependencies.html#runtime-environments"><span class="std std-ref">Runtime Environments</span></a> for a Task, Actor or Job.  This file is only present if a Runtime Environment is installed.</p></li>
</ul>
</section>
</section>
<section id="redirecting-worker-logs-to-the-driver">
<span id="log-redirection-to-driver"></span><h2>Redirecting Worker logs to the Driver<a class="headerlink" href="configure-logging.html#redirecting-worker-logs-to-the-driver" title="Permalink to this headline">#</a></h2>
<p>By default, Worker stdout and stderr for Tasks and Actors stream to the Ray Driver (the entrypoint script that calls <code class="docutils literal notranslate"><span class="pre">ray.init</span></code>). It helps users aggregate the logs for the distributed Ray application in a single place.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>

<span class="c1"># Initiate a driver.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>


<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">task</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;task&quot;</span><span class="p">)</span>


<span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">remote</span><span class="p">())</span>


<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">class</span> <span class="nc">Actor</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">ready</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;actor&quot;</span><span class="p">)</span>


<span class="n">actor</span> <span class="o">=</span> <span class="n">Actor</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>
<span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">ready</span><span class="o">.</span><span class="n">remote</span><span class="p">())</span>
</pre></div>
</div>
<p>All stdout emitted from the <code class="docutils literal notranslate"><span class="pre">print</span></code> method are printed to the driver with a <code class="docutils literal notranslate"><span class="pre">(Task</span> <span class="pre">or</span> <span class="pre">Actor</span> <span class="pre">repr,</span> <span class="pre">process</span> <span class="pre">ID,</span> <span class="pre">IP</span> <span class="pre">address)</span></code> prefix.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span><span class="nv">pid</span><span class="o">=</span><span class="m">45601</span><span class="o">)</span> task
<span class="o">(</span>Actor <span class="nv">pid</span><span class="o">=</span><span class="m">480956</span><span class="o">)</span> actor
</pre></div>
</div>
<section id="customizing-prefixes-for-actor-logs">
<h3>Customizing prefixes for Actor logs<a class="headerlink" href="configure-logging.html#customizing-prefixes-for-actor-logs" title="Permalink to this headline">#</a></h3>
<p>It is often useful to distinguish between log messages from different Actors. For example, if you have a large number of worker Actors, you may want to easily see the index of the Actor that logged a particular message. Define the <code class="docutils literal notranslate"><span class="pre">__repr__</span> <span class="pre">&lt;https://docs.python.org/3/library/functions.html#repr&gt;</span></code>__ method for the Actor class to replace the Actor name with the Actor repr. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>


<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">class</span> <span class="nc">MyActor</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">index</span>

    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello there&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;MyActor(index=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="si">}</span><span class="s2">)&quot;</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">MyActor</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">MyActor</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">remote</span><span class="p">())</span>
<span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">remote</span><span class="p">())</span>
</pre></div>
</div>
<p>The resulting output follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>MyActor<span class="o">(</span><span class="nv">index</span><span class="o">=</span><span class="m">2</span><span class="o">)</span> <span class="nv">pid</span><span class="o">=</span><span class="m">482120</span><span class="o">)</span> hello there
<span class="o">(</span>MyActor<span class="o">(</span><span class="nv">index</span><span class="o">=</span><span class="m">1</span><span class="o">)</span> <span class="nv">pid</span><span class="o">=</span><span class="m">482119</span><span class="o">)</span> hello there
</pre></div>
</div>
</section>
<section id="coloring-actor-log-prefixes">
<h3>Coloring Actor log prefixes<a class="headerlink" href="configure-logging.html#coloring-actor-log-prefixes" title="Permalink to this headline">#</a></h3>
<p>By default, Ray prints Actor log prefixes in light blue.
Activate multi-color prefixes by setting the environment variable <code class="docutils literal notranslate"><span class="pre">RAY_COLOR_PREFIX=1</span></code>.
This indexes into an array of colors modulo the PID of each process.</p>
<p><img alt="coloring-actor-log-prefixes" src="../../_images/coloring-actor-log-prefixes.png" /></p>
</section>
<section id="disable-logging-to-the-driver">
<h3>Disable logging to the driver<a class="headerlink" href="configure-logging.html#disable-logging-to-the-driver" title="Permalink to this headline">#</a></h3>
<p>In large scale runs, routing all worker logs to the driver may be unwanted. Disable this feature by setting <code class="docutils literal notranslate"><span class="pre">log_to_driver=False</span></code> in <code class="docutils literal notranslate"><span class="pre">ray.init</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>

<span class="c1"># Task and Actor logs are not copied to the driver stdout.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">log_to_driver</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="log-deduplication">
<h2>Log deduplication<a class="headerlink" href="configure-logging.html#log-deduplication" title="Permalink to this headline">#</a></h2>
<p>By default, Ray deduplicates logs that appear redundantly across multiple processes. The first instance of each log message is always immediately printed. However, subsequent log messages of the same pattern (ignoring words with numeric components) are buffered for up to five seconds and printed in batch. For example, for the following code snippet:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">task</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello there, I am a task&quot;</span><span class="p">,</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>

<span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="n">task</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)])</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">2023</span>-03-27 <span class="m">15</span>:08:34,195	INFO worker.py:1603 -- Started a <span class="nb">local</span> Ray instance. View the dashboard at http://127.0.0.1:8265 
<span class="o">(</span>task <span class="nv">pid</span><span class="o">=</span><span class="m">534172</span><span class="o">)</span> Hello there, I am a task <span class="m">0</span>.20583517821231412
<span class="o">(</span>task <span class="nv">pid</span><span class="o">=</span><span class="m">534174</span><span class="o">)</span> Hello there, I am a task <span class="m">0</span>.17536720316370757 <span class="o">[</span>repeated 99x across cluster<span class="o">]</span> <span class="o">(</span>Ray deduplicates logs by default. Set <span class="nv">RAY_DEDUP_LOGS</span><span class="o">=</span><span class="m">0</span> to disable log deduplication<span class="o">)</span>
</pre></div>
</div>
<p>This feature is especially useful when importing libraries such as <code class="docutils literal notranslate"><span class="pre">tensorflow</span></code> or <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, which may emit many verbose warning messages when imported. Configure this feature as follows:</p>
<ol class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">RAY_DEDUP_LOGS=0</span></code> to disable this feature entirely.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">RAY_DEDUP_LOGS_AGG_WINDOW_S=&lt;int&gt;</span></code> to change the agggregation window.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">RAY_DEDUP_LOGS_ALLOW_REGEX=&lt;string&gt;</span></code> to specify log messages to never deduplicate.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">RAY_DEDUP_LOGS_SKIP_REGEX=&lt;string&gt;</span></code> to specify log messages to skip printing.</p></li>
</ol>
</section>
<section id="distributed-progress-bars-tqdm">
<h2>Distributed progress bars (tqdm)<a class="headerlink" href="configure-logging.html#distributed-progress-bars-tqdm" title="Permalink to this headline">#</a></h2>
<p>When using <code class="docutils literal notranslate"><span class="pre">tqdm</span> <span class="pre">&lt;https://tqdm.github.io&gt;</span></code>__ in Ray remote Tasks or Actors, you may notice that the progress bar output is corrupted. To avoid this problem, use the Ray distributed tqdm implementation at <code class="docutils literal notranslate"><span class="pre">ray.experimental.tqdm_ray</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">ray</span>

<span class="c1"># Instead of &quot;from tqdm import tqdm&quot;, use:</span>
<span class="kn">from</span> <span class="nn">ray.experimental.tqdm_ray</span> <span class="kn">import</span> <span class="n">tqdm</span>


<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="n">name</span><span class="p">):</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>


<span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="n">f</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="s2">&quot;task 1&quot;</span><span class="p">),</span> <span class="n">f</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="s2">&quot;task 2&quot;</span><span class="p">)])</span>
</pre></div>
</div>
<p>This tqdm implementation works as follows:</p>
<ol class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">tqdm_ray</span></code> module translates TQDM calls into special JSON log messages written to the worker stdout.</p></li>
<li><p>The Ray log monitor routes these log messages to a tqdm singleton, instead of copying them directly to the driver stdout.</p></li>
<li><p>The tqdm singleton determines the positions of progress bars from various Ray Tasks or Actors, ensuring they don’t collide or conflict with each other.</p></li>
</ol>
<p>Limitations:</p>
<ul class="simple">
<li><p>Only a subset of tqdm functionality is supported. Refer to the ray_tqdm <code class="docutils literal notranslate"><span class="pre">implementation</span> <span class="pre">&lt;https://github.com/ray-project/ray/blob/master/python/ray/experimental/tqdm_ray.py&gt;</span></code>__ for more details.</p></li>
<li><p>Performance may be poor if there are more than a couple thousand updates per second (updates are not batched).</p></li>
</ul>
<p>By default, the built-in print is also be patched to use <code class="docutils literal notranslate"><span class="pre">ray.experimental.tqdm_ray.safe_print</span></code> when <code class="docutils literal notranslate"><span class="pre">tqdm_ray</span></code> is used.
This avoids progress bar corruption on driver print statements. To disable this, set <code class="docutils literal notranslate"><span class="pre">RAY_TQDM_PATCH_PRINT=0</span></code>.</p>
</section>
<section id="using-rays-logger">
<h2>Using Ray’s logger<a class="headerlink" href="configure-logging.html#using-rays-logger" title="Permalink to this headline">#</a></h2>
<p>When <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">ray</span></code> is executed, Ray’s logger is initialized, generating a default configuration given in <code class="docutils literal notranslate"><span class="pre">python/ray/_private/log.py</span></code>. The default logging level is <code class="docutils literal notranslate"><span class="pre">logging.INFO</span></code>.</p>
<p>All Ray loggers are automatically configured in <code class="docutils literal notranslate"><span class="pre">ray._private.ray_logging</span></code>. To modify the Ray logger:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;ray&quot;</span><span class="p">)</span>
<span class="n">logger</span> <span class="c1"># Modify the Ray logging config</span>
</pre></div>
</div>
<p>Similarly, to modify the logging configuration for Ray AIR or other libraries, specify the appropriate logger name:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># First, get the handle for the logger you want to modify</span>
<span class="n">ray_air_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;ray.air&quot;</span><span class="p">)</span>
<span class="n">ray_data_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;ray.data&quot;</span><span class="p">)</span>
<span class="n">ray_tune_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;ray.tune&quot;</span><span class="p">)</span>
<span class="n">ray_rllib_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;ray.rllib&quot;</span><span class="p">)</span>
<span class="n">ray_train_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;ray.train&quot;</span><span class="p">)</span>
<span class="n">ray_serve_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;ray.serve&quot;</span><span class="p">)</span>
<span class="n">ray_workflow_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;ray.workflow&quot;</span><span class="p">)</span>

<span class="c1"># Modify the ray.data logging level</span>
<span class="n">ray_data_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

<span class="c1"># Other loggers can be modified similarly.</span>
<span class="c1"># Here&#39;s how to add an aditional file handler for Ray Tune:</span>
<span class="n">ray_tune_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="s2">&quot;extra_ray_tune_log.log&quot;</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="structured-logging">
<span id="id2"></span><h2>Structured logging<a class="headerlink" href="configure-logging.html#structured-logging" title="Permalink to this headline">#</a></h2>
<p>Implement structured logging to enable downstream users and applications to consume the logs efficiently.</p>
<section id="id3">
<h3>Application logs<a class="headerlink" href="configure-logging.html#id3" title="Permalink to this headline">#</a></h3>
<p>A Ray applications include both driver and worker processes. For Python applications, use Python loggers to format and structure your logs.
As a result, Python loggers need to be set up for both driver and worker processes.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Ray Core</label><div class="sd-tab-content docutils">
<p>Set up the Python logger for driver and worker processes separately:</p>
<ol class="simple">
<li><p>Set up the logger for the driver process after importing <code class="docutils literal notranslate"><span class="pre">ray</span></code>.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">worker_process_setup_hook</span></code> to configure the Python logger for all worker processes.</p></li>
</ol>
<p><img alt="Set up python loggers" src="../../_images/setup-logger-application.png" /></p>
<p>If you want to control the logger for particular actors or tasks, view <a class="reference external" href="configure-logging.html#customizing-worker-process-loggers">customizing logger for individual worker process</a></p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Ray AIR or other libraries</label><div class="sd-tab-content docutils">
<p>If you are using Ray AIR or any of the Ray libraries, follow the instructions provided in the documentation for the library.</p>
</div>
</div>
</section>
<section id="system-logs">
<h3>System logs<a class="headerlink" href="configure-logging.html#system-logs" title="Permalink to this headline">#</a></h3>
<p>Most of Ray’s system or component logs are structured by default. <br /></p>
<p>Logging format for Python logs <br /></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="o">(</span>asctime<span class="o">)</span>s<span class="se">\t</span>%<span class="o">(</span>levelname<span class="o">)</span>s %<span class="o">(</span>filename<span class="o">)</span>s:%<span class="o">(</span>lineno<span class="o">)</span>s -- %<span class="o">(</span>message<span class="o">)</span>s
</pre></div>
</div>
<p>Example: <br /></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2023</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">01</span> <span class="mi">09</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">34</span><span class="p">,</span><span class="mi">601</span>	<span class="n">INFO</span> <span class="n">job_manager</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">408</span> <span class="o">--</span> <span class="n">Submitting</span> <span class="n">job</span> <span class="k">with</span> <span class="n">RAY_ADDRESS</span> <span class="o">=</span> <span class="mf">10.0.24.73</span><span class="p">:</span><span class="mi">6379</span>
</pre></div>
</div>
<p>Logging format for CPP logs <br /></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>year-month-day, time, pid, thread_id<span class="o">]</span> <span class="o">(</span>component<span class="o">)</span> <span class="o">[</span>file<span class="o">]</span>:<span class="o">[</span>line<span class="o">]</span> <span class="o">[</span>message<span class="o">]</span>
</pre></div>
</div>
<p>Example: <br /></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="m">2023</span>-06-01 <span class="m">08</span>:47:47,457 I <span class="m">31009</span> <span class="m">225171</span><span class="o">]</span> <span class="o">(</span>gcs_server<span class="o">)</span> gcs_node_manager.cc:42: Registering node info, node <span class="nv">id</span> <span class="o">=</span> 8cc65840f0a332f4f2d59c9814416db9c36f04ac1a29ac816ad8ca1e, <span class="nv">address</span> <span class="o">=</span> <span class="m">127</span>.0.0.1, node <span class="nv">name</span> <span class="o">=</span> <span class="m">127</span>.0.0.1
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some system component logs are not structured as suggested above as of 2.5. The migration of system logs to structured logs is ongoing.</p>
</div>
</section>
<section id="add-metadata-to-structured-logs">
<h3>Add metadata to structured logs<a class="headerlink" href="configure-logging.html#add-metadata-to-structured-logs" title="Permalink to this headline">#</a></h3>
<p>If you need additional metadata to make logs more structured, fetch the metadata of Jobs, Tasks or Actors with Ray’s <a class="reference internal" href="../../ray-core/api/doc/ray.runtime_context.get_runtime_context.html#ray.runtime_context.get_runtime_context" title="ray.runtime_context.get_runtime_context"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ray.runtime_context.get_runtime_context</span></code></a> API.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-2">
Ray Job</label><div class="sd-tab-content docutils">
<p>Get the job ID.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="c1"># Initiate a driver.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

<span class="n">job_id</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">get_runtime_context</span><span class="p">()</span><span class="o">.</span><span class="n">get_job_id</span>
</pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>The job submission ID is not supported yet. This <a class="reference external" href="https://github.com/ray-project/ray/issues/28089#issuecomment-1557891407">GitHub issue</a> tracks the work to support it.</p>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-3">
Ray Actor</label><div class="sd-tab-content docutils">
<p>Get the actor ID.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="c1"># Initiate a driver.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">class</span> <span class="nc">actor</span><span class="p">():</span>
    <span class="n">actor_id</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">get_runtime_context</span><span class="p">()</span><span class="o">.</span><span class="n">get_actor_id</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-4">
Ray Task</label><div class="sd-tab-content docutils">
<p>Get the task ID.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="c1"># Initiate a driver.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">task</span><span class="p">():</span>
    <span class="n">task_id</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">get_runtime_context</span><span class="p">()</span><span class="o">.</span><span class="n">get_task_id</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-5">
Node</label><div class="sd-tab-content docutils">
<p>Get the node ID.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="c1"># Initiate a driver.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

<span class="c1"># Get the ID of the node where the driver process is running</span>
<span class="n">driver_process_node_id</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">get_runtime_context</span><span class="p">()</span><span class="o">.</span><span class="n">get_node_id</span>

<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">task</span><span class="p">():</span>
    <span class="c1"># Get the ID of the node where the worker process is running</span>
    <span class="n">worker_process_node_id</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">get_runtime_context</span><span class="p">()</span><span class="o">.</span><span class="n">get_node_id</span>
</pre></div>
</div>
<div class="tip admonition">
<p class="admonition-title">Tip</p>
<p>If you need node IP, use <a class="reference internal" href="../../ray-core/api/doc/ray.nodes.html#ray.nodes" title="ray.nodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ray.nodes</span></code></a> API to fetch all nodes and map the node ID to the corresponding IP.</p>
</div>
</div>
</div>
</section>
</section>
<section id="customizing-worker-process-loggers">
<h2>Customizing worker process loggers<a class="headerlink" href="configure-logging.html#customizing-worker-process-loggers" title="Permalink to this headline">#</a></h2>
<p>When using Ray, Tasks and Actors are executed remotely in Ray’s worker processes. To provide your own logging configuration for the worker processes, customize the worker loggers with the instructions below:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-6">
Ray Core: individual worker process</label><div class="sd-tab-content docutils">
<p>Customize the logger configuration when you define the Tasks or Actors.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="c1"># Initiate a driver.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">class</span> <span class="nc">Actor</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Basic config automatically configures logs to</span>
        <span class="c1"># stream to stdout and stderr.</span>
        <span class="c1"># Set the severity to INFO so that info logs are printed to stdout.</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="n">actor</span> <span class="o">=</span> <span class="n">Actor</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>
<span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="s2">&quot;A log message for an actor.&quot;</span><span class="p">))</span>

<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="s2">&quot;A log message for a task.&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>Actor <span class="nv">pid</span><span class="o">=</span><span class="m">179641</span><span class="o">)</span> INFO:__main__:A log message <span class="k">for</span> an actor.
<span class="o">(</span>f <span class="nv">pid</span><span class="o">=</span><span class="m">177572</span><span class="o">)</span> INFO:__main__:A log message <span class="k">for</span> a task.
</pre></div>
</div>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-7">
Ray Core: all worker processes of a job</label><div class="sd-tab-content docutils">
<p>Use <code class="docutils literal notranslate"><span class="pre">worker_process_setup_hook</span></code> to apply the new logging configuration to all worker processes within a job.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># driver.py</span>
<span class="k">def</span> <span class="nf">logging_setup_func</span><span class="p">():</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;ray&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;always&quot;</span><span class="p">)</span>

<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;worker_process_setup_hook&quot;</span><span class="p">:</span> <span class="n">logging_setup_func</span><span class="p">})</span>

<span class="n">logging_setup_func</span><span class="p">()</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-8" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-8">
Ray AIR or other libraries</label><div class="sd-tab-content docutils">
<p>If you are using Ray AIR or any of the Ray libraries, follow the instructions provided in the documentation for the library.</p>
</div>
</div>
</section>
<section id="log-rotation">
<span id="id4"></span><h2>Log rotation<a class="headerlink" href="configure-logging.html#log-rotation" title="Permalink to this headline">#</a></h2>
<p>Ray supports log rotation of log files. Note that not all components support log rotation. (Raylet, Python, and Java worker logs do not rotate).</p>
<p>By default, logs rotate when they reach 512MB (maxBytes), and have a maximum of five backup files (backupCount). Indexes are appended to all backup files (e.g., <code class="docutils literal notranslate"><span class="pre">raylet.out.1</span></code>)
To change the log rotation configuration, specify environment variables. For example,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">RAY_ROTATION_MAX_BYTES</span><span class="o">=</span><span class="m">1024</span><span class="p">;</span> ray start --head <span class="c1"># Start a ray instance with maxBytes 1KB.</span>
<span class="nv">RAY_ROTATION_BACKUP_COUNT</span><span class="o">=</span><span class="m">1</span><span class="p">;</span> ray start --head <span class="c1"># Start a ray instance with backupCount 1.</span>
</pre></div>
</div>
<p>The max size of a log file, including its backup, is <code class="docutils literal notranslate"><span class="pre">RAY_ROTATION_MAX_BYTES</span> <span class="pre">*</span> <span class="pre">RAY_ROTATION_BACKUP_COUNT</span> <span class="pre">+</span> <span class="pre">RAY_ROTATION_MAX_BYTES</span></code></p>
</section>
<section id="log-persistence">
<h2>Log persistence<a class="headerlink" href="configure-logging.html#log-persistence" title="Permalink to this headline">#</a></h2>
<p>To process and export logs to external stroage or management systems, view <a class="reference internal" href="../../cluster/kubernetes/user-guides/logging.html#kuberay-logging"><span class="std std-ref">log persistence on Kubernetes</span></a> and <a class="reference internal" href="../../cluster/vms/user-guides/logging.html#vm-logging"><span class="std std-ref">log persistence on VMs</span></a> for more details.</p>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="cli-sdk.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Monitoring with the CLI or SDK</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="add-app-metrics.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Adding Application-Level Metrics</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Ray Team<br/>
  
      &copy; Copyright 2023, The Ray Team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js@digest=1999514e3f237ded88cf"></script>


  </body>
</html>